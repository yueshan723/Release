<files codepage='65001' xmlns:dt='urn:schemas-microsoft-com:datatypes'>
	<file name='zb_system\function\c_system_common.php' crc32='478C1C8C'  dt:dt='bin.base64'>PD9waHANCi8qKg0KICog6L6F5Yqp6YCa55So5Ye95pWwLg0KICoNCiAqIEBjb3B5cmlnaHQgKEMpIFJhaW5ib3dTb2Z0IFN0dWRpbw0KICovDQoNCi8qKg0KICog5b6X5Yiw6K+35rGC5Y2P6K6u77yI6ICD6JmR5Yiw5Y+N5ZCR5Luj55CG562J5Y6f5Zug77yM5pyq5b+F5YeG56Gu77yJDQogKiDlpoLmnpzmg7Pojrflj5blh4bnoa7nmoTlgLzvvIzor7d6YnAtPkxvYWTlkI7kvb/nlKgkemJwLT5pc0h0dHBzLg0KICoNCiAqIEBwYXJhbSAkYXJyYXkNCiAqDQogKiBAcmV0dXJuICRzdHJpbmcNCiAqLw0KZnVuY3Rpb24gR2V0U2NoZW1lKCRhcnJheSkNCnsNCiAgICAkYXJyYXkgPSBhcnJheV9jaGFuZ2Vfa2V5X2Nhc2UoJGFycmF5LCBDQVNFX1VQUEVSKTsNCiAgICBpZiAoDQogICAgICAgIChhcnJheV9rZXlfZXhpc3RzKCdSRVFVRVNUX1NDSEVNRScsICRhcnJheSkNCiAgICAgICAgICAgICYmDQogICAgICAgICAgICAoc3RydG9sb3dlcigkYXJyYXlbJ1JFUVVFU1RfU0NIRU1FJ10pID09ICdodHRwcycpKQ0KICAgICAgICB8fA0KICAgICAgICAoYXJyYXlfa2V5X2V4aXN0cygnSFRUUFMnLCAkYXJyYXkpDQogICAgICAgICAgICAmJg0KICAgICAgICAgICAgKHN0cnRvbG93ZXIoJGFycmF5WydIVFRQUyddKSA9PSAnb24nKSkNCiAgICAgICAgfHwNCiAgICAgICAgKGFycmF5X2tleV9leGlzdHMoJ0hUVFBfRlJPTV9IVFRQUycsICRhcnJheSkNCiAgICAgICAgICAgICYmDQogICAgICAgICAgICAoc3RydG9sb3dlcigkYXJyYXlbJ0hUVFBfRlJPTV9IVFRQUyddKSA9PSAnb24nKSkNCiAgICAgICAgfHwNCiAgICAgICAgKGFycmF5X2tleV9leGlzdHMoJ1NFUlZFUl9QT1JUJywgJGFycmF5KQ0KICAgICAgICAgICAgJiYNCiAgICAgICAgICAgIChzdHJ0b2xvd2VyKCRhcnJheVsnU0VSVkVSX1BPUlQnXSkgPT0gNDQzKSkNCiAgICAgICAgfHwNCiAgICAgICAgKGFycmF5X2tleV9leGlzdHMoJ0hUVFBfWF9GT1JXQVJERURfUE9SVCcsICRhcnJheSkNCiAgICAgICAgICAgICYmDQogICAgICAgICAgICAoc3RydG9sb3dlcigkYXJyYXlbJ0hUVFBfWF9GT1JXQVJERURfUE9SVCddKSA9PSA0NDMpKQ0KICAgICAgICB8fA0KICAgICAgICAoYXJyYXlfa2V5X2V4aXN0cygnSFRUUF9YX0ZPUldBUkRFRF9QUk9UTycsICRhcnJheSkNCiAgICAgICAgICAgICYmDQogICAgICAgICAgICAoc3RydG9sb3dlcigkYXJyYXlbJ0hUVFBfWF9GT1JXQVJERURfUFJPVE8nXSkgPT0gJ2h0dHBzJykpDQogICAgICAgIHx8DQogICAgICAgIChhcnJheV9rZXlfZXhpc3RzKCdIVFRQX0ZST05UX0VORF9IVFRQUycsICRhcnJheSkNCiAgICAgICAgICAgICYmDQogICAgICAgICAgICAoc3RydG9sb3dlcigkYXJyYXlbJ0hUVFBfRlJPTlRfRU5EX0hUVFBTJ10pID09ICdvbicpKQ0KICAgICAgICB8fA0KICAgICAgICAoYXJyYXlfa2V5X2V4aXN0cygnSFRUUF9YX0ZPUldBUkRFRF9QUk9UT0NPTCcsICRhcnJheSkNCiAgICAgICAgICAgICYmDQogICAgICAgICAgICAoc3RydG9sb3dlcigkYXJyYXlbJ0hUVFBfWF9GT1JXQVJERURfUFJPVE9DT0wnXSkgPT0gJ2h0dHBzJykpDQogICAgICAgIHx8DQogICAgICAgIChhcnJheV9rZXlfZXhpc3RzKCdIVFRQX1hfRk9SV0FSREVEX1NTTCcsICRhcnJheSkNCiAgICAgICAgICAgICYmDQogICAgICAgICAgICAoc3RydG9sb3dlcigkYXJyYXlbJ0hUVFBfWF9GT1JXQVJERURfU1NMJ10pID09ICdvbicpKQ0KICAgICAgICB8fA0KICAgICAgICAoYXJyYXlfa2V5X2V4aXN0cygnSFRUUF9YX1VSTF9TQ0hFTUUnLCAkYXJyYXkpDQogICAgICAgICAgICAmJg0KICAgICAgICAgICAgKHN0cnRvbG93ZXIoJGFycmF5WydIVFRQX1hfVVJMX1NDSEVNRSddKSA9PSAnaHR0cHMnKSkNCiAgICAgICAgfHwNCiAgICAgICAgKGFycmF5X2tleV9leGlzdHMoJ0hUVFBfQ0ZfVklTSVRPUicsICRhcnJheSkNCiAgICAgICAgICAgICYmDQogICAgICAgICAgICAoc3RyaXBvcygkYXJyYXlbJ0hUVFBfQ0ZfVklTSVRPUiddLCAnaHR0cHMnKSAhPT0gZmFsc2UpKQ0KICAgICAgICB8fA0KICAgICAgICAoYXJyYXlfa2V5X2V4aXN0cygnU0VSVkVSX1BPUlRfU0VDVVJFJywgJGFycmF5KQ0KICAgICAgICAgICAgJiYNCiAgICAgICAgICAgIChzdHJ0b2xvd2VyKCRhcnJheVsnU0VSVkVSX1BPUlRfU0VDVVJFJ10pID09IDEpKQ0KICAgICkgew0KICAgICAgICByZXR1cm4gJ2h0dHBzOi8vJzsNCiAgICB9DQoNCiAgICByZXR1cm4gJ2h0dHA6Ly8nOw0KfQ0KDQovKioNCiAqIOiOt+WPluacjeWKoeWZqC4NCiAqDQogKiBAcmV0dXJuIGludA0KICovDQpmdW5jdGlvbiBHZXRXZWJTZXJ2ZXIoKQ0Kew0KICAgIGlmICghaXNzZXQoJF9TRVJWRVJbJ1NFUlZFUl9TT0ZUV0FSRSddKSkgew0KICAgICAgICByZXR1cm4gU0VSVkVSX1VOS05PV047DQogICAgfQ0KICAgICR3ZWJTZXJ2ZXIgPSBzdHJ0b2xvd2VyKCRfU0VSVkVSWydTRVJWRVJfU09GVFdBUkUnXSk7DQogICAgaWYgKHN0cnBvcygkd2ViU2VydmVyLCAnYXBhY2hlJykgIT09IGZhbHNlKSB7DQogICAgICAgIHJldHVybiBTRVJWRVJfQVBBQ0hFOw0KICAgIH0gZWxzZWlmIChzdHJwb3MoJHdlYlNlcnZlciwgJ21pY3Jvc29mdC1paXMnKSAhPT0gZmFsc2UpIHsNCiAgICAgICAgcmV0dXJuIFNFUlZFUl9JSVM7DQogICAgfSBlbHNlaWYgKHN0cnBvcygkd2ViU2VydmVyLCAnbmdpbngnKSAhPT0gZmFsc2UpIHsNCiAgICAgICAgcmV0dXJuIFNFUlZFUl9OR0lOWDsNCiAgICB9IGVsc2VpZiAoc3RycG9zKCR3ZWJTZXJ2ZXIsICdsaWdodHRwZCcpICE9PSBmYWxzZSkgew0KICAgICAgICByZXR1cm4gU0VSVkVSX0xJR0hUVFBEOw0KICAgIH0gZWxzZWlmIChzdHJwb3MoJHdlYlNlcnZlciwgJ2thbmdsZScpICE9PSBmYWxzZSkgew0KICAgICAgICByZXR1cm4gU0VSVkVSX0tBTkdMRTsNCiAgICB9IGVsc2VpZiAoc3RycG9zKCR3ZWJTZXJ2ZXIsICdjYWRkeScpICE9PSBmYWxzZSkgew0KICAgICAgICByZXR1cm4gU0VSVkVSX0NBRERZOw0KICAgIH0gZWxzZWlmIChzdHJwb3MoJHdlYlNlcnZlciwgJ2RldmVsb3BtZW50IHNlcnZlcicpICE9PSBmYWxzZSkgew0KICAgICAgICByZXR1cm4gU0VSVkVSX0JVSUxUSU47DQogICAgfSBlbHNlIHsNCiAgICAgICAgcmV0dXJuIFNFUlZFUl9VTktOT1dOOw0KICAgIH0NCn0NCg0KLyoqDQogKiDojrflj5bmk43kvZzns7vnu58NCiAqDQogKiBAcmV0dXJuIGludA0KICovDQpmdW5jdGlvbiBHZXRTeXN0ZW0oKQ0Kew0KICAgIGlmIChpbl9hcnJheShzdHJ0b3VwcGVyKFBIUF9PUyksIGFycmF5KCdXSU5OVCcsICdXSU4zMicsICdXSU5ET1dTJykpKSB7DQogICAgICAgIHJldHVybiBTWVNURU1fV0lORE9XUzsNCiAgICB9IGVsc2VpZiAoKHN0cnRvdXBwZXIoUEhQX09TKSA9PT0gJ1VOSVgnKSkgew0KICAgICAgICByZXR1cm4gU1lTVEVNX1VOSVg7DQogICAgfSBlbHNlaWYgKHN0cnRvdXBwZXIoUEhQX09TKSA9PT0gJ0xJTlVYJykgew0KICAgICAgICByZXR1cm4gU1lTVEVNX0xJTlVYOw0KICAgIH0gZWxzZWlmIChzdHJ0b3VwcGVyKFBIUF9PUykgPT09ICdEQVJXSU4nKSB7DQogICAgICAgIHJldHVybiBTWVNURU1fREFSV0lOOw0KICAgIH0gZWxzZWlmIChzdHJ0b3VwcGVyKHN1YnN0cihQSFBfT1MsIDAsIDYpKSA9PT0gJ0NZR1dJTicpIHsNCiAgICAgICAgcmV0dXJuIFNZU1RFTV9DWUdXSU47DQogICAgfSBlbHNlaWYgKGluX2FycmF5KHN0cnRvdXBwZXIoUEhQX09TKSwgYXJyYXkoJ05FVEJTRCcsICdPUEVOQlNEJywgJ0ZSRUVCU0QnKSkpIHsNCiAgICAgICAgcmV0dXJuIFNZU1RFTV9CU0Q7DQogICAgfSBlbHNlIHsNCiAgICAgICAgcmV0dXJuIFNZU1RFTV9VTktOT1dOOw0KICAgIH0NCn0NCg0KLyoqDQogKiDojrflj5ZQSFDop6PmnpDlvJXmk44uDQogKg0KICogQHJldHVybiBpbnQNCiAqLw0KZnVuY3Rpb24gR2V0UEhQRW5naW5lKCkNCnsNCiAgICByZXR1cm4gRU5HSU5FX1BIUDsNCn0NCg0KLyoqDQogKiDojrflj5ZQSFAgVmVyc2lvbi4NCiAqDQogKiBAcmV0dXJuIHN0cmluZw0KICovDQpmdW5jdGlvbiBHZXRQSFBWZXJzaW9uKCkNCnsNCiAgICAkcCA9IHBocHZlcnNpb24oKTsNCiAgICBpZiAoc3RycG9zKCRwLCAnLScpICE9PSBmYWxzZSkgew0KICAgICAgICAkcCA9IHN1YnN0cigkcCwgMCwgc3RycG9zKCRwLCAnLScpKTsNCiAgICB9DQoNCiAgICByZXR1cm4gJHA7DQp9DQoNCi8qKg0KICog6Ieq5Yqo5Yqg6L2957G75paH5Lu2Lg0KICoNCiAqIEBhcGkgRmlsdGVyX1BsdWdpbl9BdXRvbG9hZA0KICoNCiAqIEBwYXJhbSBzdHJpbmcgJGNsYXNzTmFtZSDnsbvlkI0NCiAqDQogKiBAcmV0dXJuIG1peGVkDQogKi8NCmZ1bmN0aW9uIEF1dG9sb2FkQ2xhc3MoJGNsYXNzTmFtZSkNCnsNCiAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9BdXRvbG9hZCddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAkZnByZXR1cm4gPSAkZnBuYW1lKCRjbGFzc05hbWUpOw0KICAgICAgICBpZiAoJGZwc2lnbmFsID09IFBMVUdJTl9FWElUU0lHTkFMX1JFVFVSTikgew0KICAgICAgICAgICAgJGZwc2lnbmFsID0gUExVR0lOX0VYSVRTSUdOQUxfTk9ORTsNCg0KICAgICAgICAgICAgcmV0dXJuICRmcHJldHVybjsNCiAgICAgICAgfQ0KICAgIH0NCiAgICAkY2xhc3NOYW1lID0gc3RyX3JlcGxhY2UoJ19fJywgJy8nLCAkY2xhc3NOYW1lKTsNCiAgICAkZmlsZU5hbWUgPSBaQlBfUEFUSCAuICd6Yl9zeXN0ZW0vZnVuY3Rpb24vbGliLycgLiBzdHJ0b2xvd2VyKCRjbGFzc05hbWUpIC4gJy5waHAnOw0KICAgIGlmIChpc19yZWFkYWJsZSgkZmlsZU5hbWUpKSB7DQogICAgICAgIHJlcXVpcmUgJGZpbGVOYW1lOw0KDQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIHJldHVybiBmYWxzZTsNCn0NCg0KLyoqDQogKiDorrDlvZXml6Xlv5cuDQogKg0KICogQHBhcmFtIHN0cmluZyAkbG9nU3RyaW5nDQogKiBAcGFyYW0gYm9vbCAgICRpc0Vycm9yDQogKg0KICogQHJldHVybiBib29sDQogKi8NCmZ1bmN0aW9uIExvZ3MoJGxvZ1N0cmluZywgJGlzRXJyb3IgPSBmYWxzZSkNCnsNCiAgICBnbG9iYWwgJHpicDsNCiAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9Mb2dzJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICRmcHJldHVybiA9ICRmcG5hbWUoJGxvZ1N0cmluZywgJGlzRXJyb3IpOw0KICAgICAgICBpZiAoJGZwc2lnbmFsID09IFBMVUdJTl9FWElUU0lHTkFMX1JFVFVSTikgew0KICAgICAgICAgICAgJGZwc2lnbmFsID0gUExVR0lOX0VYSVRTSUdOQUxfTk9ORTsNCg0KICAgICAgICAgICAgcmV0dXJuICRmcHJldHVybjsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBpZiAoJHpicC0+Z3VpZCkgew0KICAgICAgICBpZiAoJGlzRXJyb3IpIHsNCiAgICAgICAgICAgICRmID0gJHpicC0+dXNlcnNkaXIgLiAnbG9ncy8nIC4gJHpicC0+Z3VpZCAuICctZXJyb3InIC4gZGF0ZSgiWW1kIikgLiAnLnR4dCc7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAkZiA9ICR6YnAtPnVzZXJzZGlyIC4gJ2xvZ3MvJyAuICR6YnAtPmd1aWQgLiAnLWxvZycgLiBkYXRlKCJZbWQiKSAuICcudHh0JzsNCiAgICAgICAgfQ0KICAgIH0gZWxzZSB7DQogICAgICAgIGlmICgkaXNFcnJvcikgew0KICAgICAgICAgICAgJGYgPSAkemJwLT51c2Vyc2RpciAuICdsb2dzLycgLiBtZDUoJHpicC0+cGF0aCkgLiAnLWVycm9yLnR4dCc7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAkZiA9ICR6YnAtPnVzZXJzZGlyIC4gJ2xvZ3MvJyAuIG1kNSgkemJwLT5wYXRoKSAuICcudHh0JzsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBaQmxvZ0V4Y2VwdGlvbjo6U3VzcGVuZEVycm9ySG9vaygpOw0KICAgIGlmICgkaGFuZGxlID0gQGZvcGVuKCRmLCAnYSsnKSkgew0KICAgICAgICAkdCA9IGRhdGUoJ1ktbS1kJykgLiAnICcgLiBkYXRlKCdIOmk6cycpIC4gJyAnIC4gc3Vic3RyKG1pY3JvdGltZSgpLCAxLCA5KSAuICcgJyAuIGRhdGUoJ1AnKTsNCiAgICAgICAgQGZ3cml0ZSgkaGFuZGxlLCAnWycgLiAkdCAuICddJyAuICJcclxuIiAuICRsb2dTdHJpbmcgLiAiXHJcbiIpOw0KICAgICAgICBAZmNsb3NlKCRoYW5kbGUpOw0KICAgIH0NCiAgICBaQmxvZ0V4Y2VwdGlvbjo6UmVzdW1lRXJyb3JIb29rKCk7DQoNCiAgICByZXR1cm4gdHJ1ZTsNCn0NCg0KLyoqDQogKiDovpPlh7rpobXpnaLov5DooYzml7bplb8NCiAqDQogKiBAcGFyYW0gYm9vbCAkaXNPdXRwdXQg5piv5ZCm6L6T5Ye677yI6ICD6JmR5Y6G5Y+y5Y6f5Zug77yM6buY6K6k6L6T5Ye677yJDQogKg0KICogQHJldHVybiBhcnJheQ0KICovDQpmdW5jdGlvbiBSdW5UaW1lKCRpc091dHB1dCA9IHRydWUpDQp7DQogICAgZ2xvYmFsICR6YnA7DQoNCiAgICAkcnQgPSBhcnJheSgpOw0KICAgICRydFsndGltZSddID0gbnVtYmVyX2Zvcm1hdCgxMDAwICogKG1pY3JvdGltZSgxKSAtICRfU0VSVkVSWydfc3RhcnRfdGltZSddKSwgMik7DQogICAgJHJ0WydxdWVyeSddID0gJF9TRVJWRVJbJ19xdWVyeV9jb3VudCddOw0KICAgICRydFsnbWVtb3J5J10gPSAkX1NFUlZFUlsnX21lbW9yeV91c2FnZSddOw0KICAgICRydFsnZXJyb3InXSA9ICRfU0VSVkVSWydfZXJyb3JfY291bnQnXTsNCiAgICBpZiAoZnVuY3Rpb25fZXhpc3RzKCdtZW1vcnlfZ2V0X3VzYWdlJykpIHsNCiAgICAgICAgJHJ0WydtZW1vcnknXSA9IChpbnQpICgobWVtb3J5X2dldF91c2FnZSgpIC0gJF9TRVJWRVJbJ19tZW1vcnlfdXNhZ2UnXSkgLyAxMDI0KTsNCiAgICB9DQoNCiAgICBpZiAoaXNzZXQoJHpicC0+b3B0aW9uWydaQ19SVU5JTkZPX0RJU1BMQVknXSkgJiYgJHpicC0+b3B0aW9uWydaQ19SVU5JTkZPX0RJU1BMQVknXSA9PSBmYWxzZSkgew0KICAgICAgICAkX1NFUlZFUlsnX3J1bnRpbWVfcmVzdWx0J10gPSAkcnQ7DQoNCiAgICAgICAgcmV0dXJuICRydDsNCiAgICB9DQoNCiAgICBpZiAoJGlzT3V0cHV0KSB7DQogICAgICAgIGVjaG8gJzwhLS0nIC4gJHJ0Wyd0aW1lJ10gLiAnIG1zICwgJzsNCiAgICAgICAgZWNobyAkcnRbJ3F1ZXJ5J10gLiAnIHF1ZXJ5JzsNCiAgICAgICAgaWYgKGZ1bmN0aW9uX2V4aXN0cygnbWVtb3J5X2dldF91c2FnZScpKSB7DQogICAgICAgICAgICBlY2hvICcgLCAnIC4gJHJ0WydtZW1vcnknXSAuICdrYiBtZW1vcnknOw0KICAgICAgICB9DQoNCiAgICAgICAgZWNobyAnICwgJyAuICRydFsnZXJyb3InXSAuICcgZXJyb3InOw0KICAgICAgICBlY2hvICctLT4nOw0KICAgIH0NCg0KICAgIHJldHVybiAkcnQ7DQp9DQoNCi8qKg0KICog6I635b6X57O757uf5L+h5oGvLg0KICoNCiAqIEByZXR1cm4gc3RyaW5nIOezu+e7n+S/oeaBrw0KICoNCiAqIEBzaW5jZSAxLjQNCiAqLw0KZnVuY3Rpb24gR2V0RW52aXJvbm1lbnQoKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KICAgICRhamF4ID0gTmV0d29yazo6Q3JlYXRlKCk7DQogICAgaWYgKCRhamF4KSB7DQogICAgICAgICRhamF4ID0gc3Vic3RyKGdldF9jbGFzcygkYWpheCksIDkpOw0KICAgIH0NCiAgICBpZiAoJGFqYXggPT0gJ2N1cmwnKSB7DQogICAgICAgIGlmIChpbmlfZ2V0KCJzYWZlX21vZGUiKSB8fCAodmVyc2lvbl9jb21wYXJlKFBIUF9WRVJTSU9OLCAnNS42LjAnLCAnPCcpICYmIGluaV9nZXQoIm9wZW5fYmFzZWRpciIpKSkgew0KICAgICAgICAgICAgJGFqYXggLj0gJy1zYWZlbW9kZSc7DQogICAgICAgIH0NCiAgICAgICAgJGFycmF5ID0gY3VybF92ZXJzaW9uKCk7DQogICAgICAgICRhamF4IC49ICRhcnJheVsndmVyc2lvbiddOw0KICAgIH0NCiAgICBpZiAoZnVuY3Rpb25fZXhpc3RzKCdwaHBfdW5hbWUnKSA9PSB0cnVlKSB7DQogICAgICAgICR1bmFtZSA9IFNwbGl0QW5kR2V0KHBocF91bmFtZSgncicpLCAnLScsIDApOw0KICAgIH0gZWxzZSB7DQogICAgICAgICR1bmFtZSA9ICcnOw0KICAgIH0NCiAgICAkc3lzdGVtX2Vudmlyb25tZW50ID0gUEhQX09TIC4gJHVuYW1lIC4gJzsgJyAuDQogICAgR2V0VmFsdWVJbkFycmF5KA0KICAgICAgICBleHBsb2RlKA0KICAgICAgICAgICAgJyAnLA0KICAgICAgICAgICAgc3RyX3JlcGxhY2UoYXJyYXkoJ01pY3Jvc29mdC0nLCAnLycpLCBhcnJheSgnJywgJycpLCBHZXRWYXJzKCdTRVJWRVJfU09GVFdBUkUnLCAnU0VSVkVSJykpDQogICAgICAgICksDQogICAgICAgIDANCiAgICApIC4gJzsgJyAuDQogICAgJ1BIUCcgLiBHZXRQSFBWZXJzaW9uKCkgLiAoSVNfWDY0ID8gJ3g2NCcgOiAnJykgLiAnOyAnIC4NCiAgICAkemJwLT5vcHRpb25bJ1pDX0RBVEFCQVNFX1RZUEUnXSAuICR6YnAtPmRiLT52ZXJzaW9uIC4gJzsgJyAuICRhamF4Ow0KDQogICAgaWYgKGRlZmluZWQoJ09QRU5TU0xfVkVSU0lPTl9URVhUJykpIHsNCiAgICAgICAgJHN5c3RlbV9lbnZpcm9ubWVudCAuPSAnOyAnIC4gc3RyX3JlcGxhY2UoJyAnLCAnJywgT1BFTlNTTF9WRVJTSU9OX1RFWFQpOw0KICAgIH0NCg0KICAgIHJldHVybiAkc3lzdGVtX2Vudmlyb25tZW50Ow0KfQ0KDQovKioNCiAqIOmAmui/h+aWh+S7tuiOt+WPluW6lOeUqFVSTOWcsOWdgA0KICoNCiAqIEBwYXJhbSBzdHJpbmcgJGZpbGUg5paH5Lu25ZCNDQogKg0KICogQHJldHVybiBzdHJpbmcg6L+U5ZueVVJM5Zyw5Z2ADQogKi8NCmZ1bmN0aW9uIHBsdWdpbl9kaXJfdXJsKCRmaWxlKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KICAgICRzMSA9ICR6YnAtPnBhdGg7DQogICAgJHMyID0gc3RyX3JlcGxhY2UoJ1xcJywgJy8nLCBkaXJuYW1lKCRmaWxlKSAuICcvJyk7DQogICAgJHMgPSBzdWJzdHIoJHMyLCBzdHJzcG4oJHMxLCAkczIsIDApKTsNCiAgICBpZiAoc3RycG9zKCRzLCAnemJfdXNlcnMvcGx1Z2luLycpICE9PSBmYWxzZSkgew0KICAgICAgICAkcyA9IHN1YnN0cigkcywgc3Ryc3BuKCRzLCAkczMgPSAnemJfdXNlcnMvcGx1Z2luLycsIDApKTsNCiAgICB9IGVsc2Ugew0KICAgICAgICAkcyA9IHN1YnN0cigkcywgc3Ryc3BuKCRzLCAkczMgPSAnemJfdXNlcnMvdGhlbWUvJywgMCkpOw0KICAgIH0NCiAgICAkYSA9IGV4cGxvZGUoJy8nLCAkcyk7DQogICAgJHMgPSAkYVswXTsNCiAgICAkcyA9ICR6YnAtPmhvc3QgLiAkczMgLiAkcyAuICcvJzsNCg0KICAgIHJldHVybiAkczsNCn0NCg0KLyoqDQogKiDpgJrov4fmlofku7bojrflj5blupTnlKjnm67lvZXot6/lvoQuDQogKg0KICogQHBhcmFtICRmaWxlDQogKg0KICogQHJldHVybiBzdHJpbmcNCiAqLw0KZnVuY3Rpb24gcGx1Z2luX2Rpcl9wYXRoKCRmaWxlKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KICAgICRzMSA9ICR6YnAtPnBhdGg7DQogICAgJHMyID0gc3RyX3JlcGxhY2UoJ1xcJywgJy8nLCBkaXJuYW1lKCRmaWxlKSAuICcvJyk7DQogICAgJHMgPSBzdWJzdHIoJHMyLCBzdHJzcG4oJHMxLCAkczIsIDApKTsNCiAgICBpZiAoc3RycG9zKCRzLCAnemJfdXNlcnMvcGx1Z2luLycpICE9PSBmYWxzZSkgew0KICAgICAgICAkcyA9IHN1YnN0cigkcywgc3Ryc3BuKCRzLCAkczMgPSAnemJfdXNlcnMvcGx1Z2luLycsIDApKTsNCiAgICB9IGVsc2Ugew0KICAgICAgICAkcyA9IHN1YnN0cigkcywgc3Ryc3BuKCRzLCAkczMgPSAnemJfdXNlcnMvdGhlbWUvJywgMCkpOw0KICAgIH0NCiAgICAkYSA9IGV4cGxvZGUoJy8nLCAkcyk7DQogICAgJHMgPSAkYVswXTsNCiAgICAkcyA9ICR6YnAtPnBhdGggLiAkczMgLiAkcyAuICcvJzsNCg0KICAgIHJldHVybiAkczsNCn0NCg0KLyoqDQogKiDpgJrov4dLZXnku47mlbDnu4Tojrflj5bmlbDmja4uDQogKg0KICogQHBhcmFtIGFycmF5ICAkYXJyYXkg5pWw57uE5ZCNDQogKiBAcGFyYW0gc3RyaW5nICRuYW1lICDkuIvmoIdrZXkNCiAqDQogKiBAcmV0dXJuIG1peGVkDQogKi8NCmZ1bmN0aW9uIEdldFZhbHVlSW5BcnJheSgkYXJyYXksICRuYW1lKQ0Kew0KICAgIGlmIChpc19hcnJheSgkYXJyYXkpKSB7DQogICAgICAgIGlmIChhcnJheV9rZXlfZXhpc3RzKCRuYW1lLCAkYXJyYXkpKSB7DQogICAgICAgICAgICByZXR1cm4gJGFycmF5WyRuYW1lXTsNCiAgICAgICAgfQ0KICAgIH0NCn0NCg0KLyoqDQogKiDojrflj5bmlbDnu4TkuK3nmoTlvZPliY3lhYPntKDmlbDmja4uDQogKg0KICogQHBhcmFtIHN0cmluZyAkYXJyYXkg5pWw57uE5ZCNDQogKiBAcGFyYW0gc3RyaW5nICRuYW1lICDkuIvmoIdrZXkNCiAqDQogKiBAcmV0dXJuIG1peGVkDQogKi8NCmZ1bmN0aW9uIEdldFZhbHVlSW5BcnJheUJ5Q3VycmVudCgkYXJyYXksICRuYW1lKQ0Kew0KICAgIGlmIChpc19hcnJheSgkYXJyYXkpKSB7DQogICAgICAgICRhcnJheSA9IGN1cnJlbnQoJGFycmF5KTsNCg0KICAgICAgICByZXR1cm4gR2V0VmFsdWVJbkFycmF5KCRhcnJheSwgJG5hbWUpOw0KICAgIH0NCn0NCg0KLyoqDQogKiDliIblibJzdHJpbmflubblj5bmn5DpobnmlbDmja4uDQogKg0KICogQHBhcmFtIHN0cmluZyAkc3RyaW5nDQogKiBAcGFyYW0gc3RyaW5nICRkZWxpbWl0ZXINCiAqIEBwYXJhbSBpbnQgICAgJG4NCiAqDQogKiBAcmV0dXJuIHN0cmluZw0KICovDQpmdW5jdGlvbiBTcGxpdEFuZEdldCgkc3RyaW5nLCAkZGVsaW1pdGVyID0gJzsnLCAkbiA9IDApDQp7DQogICAgJGEgPSBleHBsb2RlKCRkZWxpbWl0ZXIsICRzdHJpbmcpOw0KICAgIGlmICghaXNfYXJyYXkoJGEpKSB7DQogICAgICAgICRhID0gYXJyYXkoKTsNCiAgICB9DQogICAgaWYgKGlzc2V0KCRhWyRuXSkpIHsNCiAgICAgICAgcmV0dXJuIChzdHJpbmcpICRhWyRuXTsNCiAgICB9DQoNCiAgICByZXR1cm4gJyc7DQp9DQoNCi8qKg0KICog5Yig6Zmk6L+e57ut56m65qC8DQogKg0KICogQHBhcmFtICRzDQogKg0KICogQHJldHVybiBudWxsfHN0cmluZ3xzdHJpbmdbXQ0KICovDQpmdW5jdGlvbiBSZW1vdmVNb3JlU3BhY2VzKCRzKQ0Kew0KICAgIHJldHVybiBwcmVnX3JlcGxhY2UoIi9ccyg/PVxzKS8iLCAiXFwxIiwgJHMpOw0KfQ0KDQovKioNCiAqIOiOt+WPlkd1aWQuDQogKg0KICogQHJldHVybiBzdHJpbmcNCiAqLw0KZnVuY3Rpb24gR2V0R3VpZCgpDQp7DQogICAgJGNoYXJpZCA9IHN0cnRvbG93ZXIobWQ1KHVuaXFpZChtdF9yYW5kKCksIHRydWUpKSk7DQoNCiAgICByZXR1cm4gJGNoYXJpZDsNCn0NCg0KLyoqDQogKiDojrflj5blj4LmlbDlgLwNCiAqDQogKiBAcGFyYW0gc3RyaW5nICRuYW1lIOaVsOe7hGtleeWQjQ0KICogQHBhcmFtIHN0cmluZyAkdHlwZSDpu5jorqTkuLpSRVFVRVNUDQogKg0KICogQHJldHVybiBtaXhlZHxudWxsDQogKi8NCmZ1bmN0aW9uIEdldFZhcnMoJG5hbWUsICR0eXBlID0gJ1JFUVVFU1QnKQ0Kew0KICAgICRhcnJheSA9ICYkR0xPQkFMU1tzdHJ0b3VwcGVyKCJfJHR5cGUiKV07DQoNCiAgICBpZiAoaXNzZXQoJGFycmF5WyRuYW1lXSkpIHsNCiAgICAgICAgcmV0dXJuICRhcnJheVskbmFtZV07DQogICAgfSBlbHNlIHsNCiAgICAgICAgcmV0dXJuIG51bGw7DQogICAgfQ0KfQ0KDQovKioNCiAqIOiOt+WPluWPguaVsOWAvO+8iOWPr+iuvue9rum7mOiupOi/lOWbnuWAvO+8iS4NCiAqDQogKiBAcGFyYW0gc3RyaW5nICRuYW1lICAgIOaVsOe7hGtleeWQjQ0KICogQHBhcmFtIHN0cmluZyAkdHlwZSAgICDpu5jorqTkuLpSRVFVRVNUDQogKiBAcGFyYW0gc3RyaW5nICRkZWZhdWx0IOm7mOiupOS4um51bGwNCiAqDQogKiBAcmV0dXJuIG1peGVkfG51bGwNCiAqDQogKiBAc2luY2UgMS4zLjE0MDYxNA0KICovDQpmdW5jdGlvbiBHZXRWYXJzQnlEZWZhdWx0KCRuYW1lLCAkdHlwZSA9ICdSRVFVRVNUJywgJGRlZmF1bHQgPSBudWxsKQ0Kew0KICAgICRnID0gR2V0VmFycygkbmFtZSwgJHR5cGUpOw0KICAgIGlmICgkZyA9PSBudWxsIHx8ICRnID09ICcnKSB7DQogICAgICAgIHJldHVybiAkZGVmYXVsdDsNCiAgICB9DQoNCiAgICByZXR1cm4gJGc7DQp9DQoNCi8qKg0KICog6I635Y+W5pWw5o2u5bqT5ZCNLg0KICoNCiAqIEByZXR1cm4gc3RyaW5nIOi/lOWbnuS4gOS4qumaj+acuueahFNRTGl0ZeaVsOaNruaWh+S7tuWQjQ0KICovDQpmdW5jdGlvbiBHZXREYk5hbWUoKQ0Kew0KICAgIHJldHVybiBzdHJfcmVwbGFjZSgnLScsICcnLCAnIyUyMCcgLiBzdHJ0b2xvd2VyKEdldEd1aWQoKSkpIC4gJy5kYic7DQp9DQoNCi8qKg0KICog6I635Y+W5b2T5YmN572R56uZ5Zyw5Z2ADQogKg0KICogQHBhcmFtIHN0cmluZyAkYmxvZ3BhdGggICAgIOe9keermeWfn+WQjQ0KICogQHBhcmFtIHN0cmluZyAmJGNvb2tpZXNQYXRoIOi/lOWbnmNvb2tpZeS9nOeUqOWfn+WAvO+8jOimgeS8oOW8leWFpQ0KICoNCiAqIEByZXR1cm4gc3RyaW5nIOi/lOWbnue9keermeWujOaVtOWcsOWdgO+8jOWmgmh0dHA6Ly9sb2NhbGhvc3QvemJwLw0KICovDQpmdW5jdGlvbiBHZXRDdXJyZW50SG9zdCgkYmxvZ3BhdGgsICYkY29va2llc1BhdGgpDQp7DQogICAgJGhvc3QgPSBIVFRQX1NDSEVNRTsNCg0KICAgICRob3N0IC49ICRfU0VSVkVSWydIVFRQX0hPU1QnXTsNCg0KICAgIGlmIChpc3NldCgkX1NFUlZFUlsnU0NSSVBUX05BTUUnXSkgJiYgJF9TRVJWRVJbJ1NDUklQVF9OQU1FJ10pIHsNCiAgICAgICAgJHggPSAkX1NFUlZFUlsnU0NSSVBUX05BTUUnXTsNCiAgICAgICAgJHkgPSAkYmxvZ3BhdGg7DQogICAgICAgIGZvciAoJGkgPSAwOyAkaSA8IHN0cmxlbigkeCk7ICRpKyspIHsNCiAgICAgICAgICAgICRmID0gJHkgLiBzdWJzdHIoJHgsICRpIC0gc3RybGVuKCR4KSk7DQogICAgICAgICAgICAkeiA9IHN1YnN0cigkeCwgMCwgJGkpOw0KICAgICAgICAgICAgaWYgKGZpbGVfZXhpc3RzKCRmKSAmJiBpc19maWxlKCRmKSkgew0KICAgICAgICAgICAgICAgICR6ID0gdHJpbSgkeiwgJy8nKTsNCiAgICAgICAgICAgICAgICAkeiA9ICcvJyAuICR6IC4gJy8nOw0KICAgICAgICAgICAgICAgICR6ID0gc3RyX3JlcGxhY2UoJy8vJywgJy8nLCAkeik7DQogICAgICAgICAgICAgICAgJGNvb2tpZXNQYXRoID0gJHo7DQoNCiAgICAgICAgICAgICAgICByZXR1cm4gJGhvc3QgLiAkejsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAgICR4ID0gJF9TRVJWRVJbJ1NDUklQVF9OQU1FJ107DQogICAgJHkgPSAkYmxvZ3BhdGg7DQogICAgaWYgKGlzc2V0KCRfU0VSVkVSWyJDT05URVhUX0RPQ1VNRU5UX1JPT1QiXSkgJiYgaXNzZXQoJF9TRVJWRVJbIkNPTlRFWFRfUFJFRklYIl0pKSB7DQogICAgICAgIGlmICgkX1NFUlZFUlsiQ09OVEVYVF9ET0NVTUVOVF9ST09UIl0gJiYgJF9TRVJWRVJbIkNPTlRFWFRfUFJFRklYIl0pIHsNCiAgICAgICAgICAgICR5ID0gJF9TRVJWRVJbIkNPTlRFWFRfRE9DVU1FTlRfUk9PVCJdIC4gJF9TRVJWRVJbIkNPTlRFWFRfUFJFRklYIl0gLiAnLyc7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAkeiA9ICcnOw0KDQogICAgZm9yICgkaSA9IHN0cmxlbigkeCk7ICRpID4gMDsgJGktLSkgew0KICAgICAgICAkeiA9IHN1YnN0cigkeCwgMCwgJGkpOw0KICAgICAgICBpZiAoc3RydG9sb3dlcihzdWJzdHIoJHksIHN0cmxlbigkeSkgLSAkaSkpID09IHN0cnRvbG93ZXIoJHopKSB7DQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgICRjb29raWVzUGF0aCA9ICR6Ow0KDQogICAgcmV0dXJuICRob3N0IC4gJHo7DQp9DQoNCi8qKg0KICog6YCa6L+HVVJM6I635Y+W6L+c56iL6aG16Z2i5YaF5a65Lg0KICoNCiAqIEBwYXJhbSBzdHJpbmcgJHVybCBVUkzlnLDlnYANCiAqDQogKiBAcmV0dXJuIHN0cmluZyDov5Tlm57pobXpnaLmlofmnKzlhoXlrrnvvIzpu5jorqTkuLpudWxsDQogKi8NCmZ1bmN0aW9uIEdldEh0dHBDb250ZW50KCR1cmwpDQp7DQogICAgJGFqYXggPSBOZXR3b3JrOjpDcmVhdGUoKTsNCiAgICBpZiAoISRhamF4KSB7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICAkYWpheC0+b3BlbignR0VUJywgJHVybCk7DQogICAgJGFqYXgtPmVuYWJsZUd6aXAoKTsNCiAgICAkYWpheC0+c2V0VGltZU91dHMoNjAsIDYwLCAwLCAwKTsNCiAgICAkYWpheC0+c2VuZCgpOw0KDQogICAgcmV0dXJuICgkYWpheC0+c3RhdHVzID09IDIwMCkgPyAkYWpheC0+cmVzcG9uc2VUZXh0IDogbnVsbDsNCn0NCg0KLyoqDQogKiDojrflj5bnm67lvZXkuIvmlofku7blpLnliJfooaguDQogKg0KICogQHBhcmFtIHN0cmluZyAkZGlyIOebruW9lQ0KICoNCiAqIEByZXR1cm4gYXJyYXkg5paH5Lu25aS55YiX6KGoDQogKi8NCmZ1bmN0aW9uIEdldERpcnNJbkRpcigkZGlyKQ0Kew0KICAgICRkaXJzID0gYXJyYXkoKTsNCg0KICAgIGlmICghZmlsZV9leGlzdHMoJGRpcikpIHsNCiAgICAgICAgcmV0dXJuIGFycmF5KCk7DQogICAgfQ0KICAgIGlmICghaXNfZGlyKCRkaXIpKSB7DQogICAgICAgIHJldHVybiBhcnJheSgpOw0KICAgIH0NCiAgICAkZGlyID0gc3RyX3JlcGxhY2UoJ1xcJywgJy8nLCAkZGlyKTsNCiAgICBpZiAoc3Vic3RyKCRkaXIsIC0xKSAhPT0gJy8nKSB7DQogICAgICAgICRkaXIgLj0gJy8nOw0KICAgIH0NCg0KICAgIC8vc2Nhbg0KICAgIGlmIChmdW5jdGlvbl9leGlzdHMoJ3NjYW5kaXInKSkgew0KICAgICAgICBmb3JlYWNoIChzY2FuZGlyKCRkaXIsIDApIGFzICRkKSB7DQogICAgICAgICAgICBpZiAoaXNfZGlyKCRkaXIgLiAkZCkpIHsNCiAgICAgICAgICAgICAgICBpZiAoKCRkICE9ICcuJykgJiYgKCRkICE9ICcuLicpKSB7DQogICAgICAgICAgICAgICAgICAgICRkaXJzW10gPSAkZDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9IGVsc2Ugew0KICAgICAgICBpZiAoJGhhbmRsZSA9IG9wZW5kaXIoJGRpcikpIHsNCiAgICAgICAgICAgIHdoaWxlIChmYWxzZSAhPT0gKCRmaWxlID0gcmVhZGRpcigkaGFuZGxlKSkpIHsNCiAgICAgICAgICAgICAgICBpZiAoJGZpbGUgIT0gIi4iICYmICRmaWxlICE9ICIuLiIpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGlzX2RpcigkZGlyIC4gJGZpbGUpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAkZGlyc1tdID0gJGZpbGU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjbG9zZWRpcigkaGFuZGxlKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHJldHVybiAkZGlyczsNCn0NCg0KLyoqDQogKiDojrflj5bnm67lvZXkuIvmjIflrprnsbvlnovmlofku7bliJfooaguDQogKg0KICogQHBhcmFtIHN0cmluZyAkZGlyICDnm67lvZUNCiAqIEBwYXJhbSBzdHJpbmcgJHR5cGUg5paH5Lu257G75Z6L77yM5Lul772c5YiG6ZqUDQogKg0KICogQHJldHVybiBhcnJheSDmlofku7bliJfooagNCiAqLw0KZnVuY3Rpb24gR2V0RmlsZXNJbkRpcigkZGlyLCAkdHlwZSkNCnsNCiAgICAkZmlsZXMgPSBhcnJheSgpOw0KICAgICRkaXIgPSBzdHJfcmVwbGFjZSgnXFwnLCAnLycsICRkaXIpOw0KICAgIGlmIChzdWJzdHIoJGRpciwgLTEpICE9PSAnLycpIHsNCiAgICAgICAgJGRpciAuPSAnLyc7DQogICAgfQ0KICAgIGlmICghaXNfZGlyKCRkaXIpKSB7DQogICAgICAgIHJldHVybiBhcnJheSgpOw0KICAgIH0NCg0KICAgIGlmIChmdW5jdGlvbl9leGlzdHMoJ3NjYW5kaXInKSkgew0KICAgICAgICBmb3JlYWNoIChzY2FuZGlyKCRkaXIpIGFzICRmKSB7DQogICAgICAgICAgICBpZiAoaXNfZmlsZSgkZGlyIC4gJGYpKSB7DQogICAgICAgICAgICAgICAgZm9yZWFjaCAoZXhwbG9kZSgifCIsICR0eXBlKSBhcyAkdCkgew0KICAgICAgICAgICAgICAgICAgICAkdCA9ICcuJyAuICR0Ow0KICAgICAgICAgICAgICAgICAgICAkaSA9IHN0cmxlbigkdCk7DQogICAgICAgICAgICAgICAgICAgIGlmIChzdWJzdHIoJGYsIC0kaSwgJGkpID09ICR0KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAkc29ydG5hbWUgPSBzdWJzdHIoJGYsIDAsIChzdHJsZW4oJGYpIC0gJGkpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICRmaWxlc1skc29ydG5hbWVdID0gJGRpciAuICRmOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9IGVsc2Ugew0KICAgICAgICAkaGFuZGxlID0gb3BlbmRpcigkZGlyKTsNCiAgICAgICAgaWYgKCRoYW5kbGUpIHsNCiAgICAgICAgICAgIHdoaWxlIChmYWxzZSAhPT0gKCRmaWxlID0gcmVhZGRpcigkaGFuZGxlKSkpIHsNCiAgICAgICAgICAgICAgICBpZiAoJGZpbGUgIT0gIi4iICYmICRmaWxlICE9ICIuLiIpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGlzX2ZpbGUoJGRpciAuICRmaWxlKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAoZXhwbG9kZSgifCIsICR0eXBlKSBhcyAkdCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0ID0gJy4nIC4gJHQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGkgPSBzdHJsZW4oJHQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWJzdHIoJGZpbGUsIC0kaSwgJGkpID09ICR0KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzb3J0bmFtZSA9IHN1YnN0cigkZmlsZSwgMCwgKHN0cmxlbigkZmlsZSkgLSAkaSkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZmlsZXNbJHNvcnRuYW1lXSA9ICRkaXIgLiAkZmlsZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2xvc2VkaXIoJGhhbmRsZSk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICByZXR1cm4gJGZpbGVzOw0KfQ0KDQovKioNCiAqIOiuvue9rmh0dHDnirbmgIHlpLQuDQogKg0KICogQHBhcmFtIGludCAkbnVtYmVyIEh0dHBTdGF0dXMNCiAqDQogKiBAaW50ZXJuYWwgcGFyYW0gc3RyaW5nICRzdGF0dXMg5oiQ5Yqf6I635Y+W54q25oCB56CB6K6+572u6Z2Z5oCB5Y+C5pWwc3RhdHVzDQogKg0KICogQHJldHVybiBib29sDQogKi8NCmZ1bmN0aW9uIFNldEh0dHBTdGF0dXNDb2RlKCRudW1iZXIsICRmb3JjZSA9IGZhbHNlKQ0Kew0KICAgIHN0YXRpYyAkc3RhdHVzID0gJyc7DQogICAgaWYgKCRzdGF0dXMgIT0gJycgJiYgJGZvcmNlID09IGZhbHNlKSB7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQoNCiAgICAkY29kZXMgPSBhcnJheSgNCiAgICAgICAgLy8gSW5mb3JtYXRpb25hbCAxeHgNCiAgICAgICAgMTAwID0+ICdDb250aW51ZScsDQogICAgICAgIDEwMSA9PiAnU3dpdGNoaW5nIFByb3RvY29scycsDQogICAgICAgIDEwMiA9PiAnUHJvY2Vzc2luZycsDQoNCiAgICAgICAgLy8gU3VjY2VzcyAyeHgNCiAgICAgICAgMjAwID0+ICdPSycsDQogICAgICAgIDIwMSA9PiAnQ3JlYXRlZCcsDQogICAgICAgIDIwMiA9PiAnQWNjZXB0ZWQnLA0KICAgICAgICAyMDMgPT4gJ05vbi1BdXRob3JpdGF0aXZlIEluZm9ybWF0aW9uJywNCiAgICAgICAgMjA0ID0+ICdObyBDb250ZW50JywNCiAgICAgICAgMjA1ID0+ICdSZXNldCBDb250ZW50JywNCiAgICAgICAgMjA2ID0+ICdQYXJ0aWFsIENvbnRlbnQnLA0KICAgICAgICAyMDcgPT4gJ011bHRpLVN0YXR1cycsDQoNCiAgICAgICAgLy8gUmVkaXJlY3Rpb24gM3h4DQogICAgICAgIDMwMCA9PiAnTXVsdGlwbGUgQ2hvaWNlcycsDQogICAgICAgIDMwMSA9PiAnTW92ZWQgUGVybWFuZW50bHknLA0KICAgICAgICAzMDIgPT4gJ0ZvdW5kJywgLy8gMS4xDQogICAgICAgIDMwMyA9PiAnU2VlIE90aGVyJywNCiAgICAgICAgMzA0ID0+ICdOb3QgTW9kaWZpZWQnLA0KICAgICAgICAzMDUgPT4gJ1VzZSBQcm94eScsDQogICAgICAgIDMwNiA9PiAnU3dpdGNoIFByb3h5JywNCiAgICAgICAgMzA3ID0+ICdUZW1wb3JhcnkgUmVkaXJlY3QnLA0KDQogICAgICAgIC8vIENsaWVudCBFcnJvciA0eHgNCiAgICAgICAgNDAwID0+ICdCYWQgUmVxdWVzdCcsDQogICAgICAgIDQwMSA9PiAnVW5hdXRob3JpemVkJywNCiAgICAgICAgNDAyID0+ICdQYXltZW50IFJlcXVpcmVkJywNCiAgICAgICAgNDAzID0+ICdGb3JiaWRkZW4nLA0KICAgICAgICA0MDQgPT4gJ05vdCBGb3VuZCcsDQogICAgICAgIDQwNSA9PiAnTWV0aG9kIE5vdCBBbGxvd2VkJywNCiAgICAgICAgNDA2ID0+ICdOb3QgQWNjZXB0YWJsZScsDQogICAgICAgIDQwNyA9PiAnUHJveHkgQXV0aGVudGljYXRpb24gUmVxdWlyZWQnLA0KICAgICAgICA0MDggPT4gJ1JlcXVlc3QgVGltZW91dCcsDQogICAgICAgIDQwOSA9PiAnQ29uZmxpY3QnLA0KICAgICAgICA0MTAgPT4gJ0dvbmUnLA0KICAgICAgICA0MTEgPT4gJ0xlbmd0aCBSZXF1aXJlZCcsDQogICAgICAgIDQxMiA9PiAnUHJlY29uZGl0aW9uIEZhaWxlZCcsDQogICAgICAgIDQxMyA9PiAnUmVxdWVzdCBFbnRpdHkgVG9vIExhcmdlJywNCiAgICAgICAgNDE0ID0+ICdSZXF1ZXN0LVVSSSBUb28gTG9uZycsDQogICAgICAgIDQxNSA9PiAnVW5zdXBwb3J0ZWQgTWVkaWEgVHlwZScsDQogICAgICAgIDQxNiA9PiAnUmVxdWVzdGVkIFJhbmdlIE5vdCBTYXRpc2ZpYWJsZScsDQogICAgICAgIDQxNyA9PiAnRXhwZWN0YXRpb24gRmFpbGVkJywNCiAgICAgICAgNDUxID0+ICdVbmF2YWlsYWJsZSBGb3IgTGVnYWwgUmVhc29ucycsDQoNCiAgICAgICAgLy8gU2VydmVyIEVycm9yIDV4eA0KICAgICAgICA1MDAgPT4gJ0ludGVybmFsIFNlcnZlciBFcnJvcicsDQogICAgICAgIDUwMSA9PiAnTm90IEltcGxlbWVudGVkJywNCiAgICAgICAgNTAyID0+ICdCYWQgR2F0ZXdheScsDQogICAgICAgIDUwMyA9PiAnU2VydmljZSBVbmF2YWlsYWJsZScsDQogICAgICAgIDUwNCA9PiAnR2F0ZXdheSBUaW1lb3V0JywNCiAgICAgICAgNTA1ID0+ICdIVFRQIFZlcnNpb24gTm90IFN1cHBvcnRlZCcsDQogICAgICAgIDUwNiA9PiAnVmFyaWFudCBBbHNvIE5lZ290aWF0ZXMnLA0KICAgICAgICA1MDcgPT4gJ0luc3VmZmljaWVudCBTdG9yYWdlJywNCiAgICAgICAgNTA4ID0+ICdMb29wIERldGVjdGVkJywNCiAgICAgICAgNTA5ID0+ICdCYW5kd2lkdGggTGltaXQgRXhjZWVkZWQnLA0KICAgICAgICA1MTAgPT4gJ05vdCBFeHRlbmRlZCcsDQogICAgKTsNCg0KICAgIGlmIChpc3NldCgkY29kZXNbJG51bWJlcl0pKSB7DQogICAgICAgIGhlYWRlcignSFRUUC8xLjEgJyAuICRudW1iZXIgLiAnICcgLiAkY29kZXNbJG51bWJlcl0pOw0KICAgICAgICAkc3RhdHVzID0gJG51bWJlcjsNCg0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICByZXR1cm4gZmFsc2U7DQp9DQoNCi8qKg0KICog55Soc2NyaXB05qCH562+6L+b6KGM6Lez6L2sLg0KICoNCiAqIEBwYXJhbSBzdHJpbmcgJHVybCDot7Povazpk77mjqUNCiAqLw0KZnVuY3Rpb24gUmVkaXJlY3RCeVNjcmlwdCgkdXJsKQ0Kew0KICAgIGVjaG8gJzxzY3JpcHQ+bG9jYXRpb24uaHJlZiA9IGRlY29kZVVSSUNvbXBvbmVudCgiJyAuIHVybGVuY29kZSgkdXJsKSAuICciKTs8L3NjcmlwdD4nOw0KICAgIGRpZSgpOw0KfQ0KLyoqDQogKiAzMDLot7PovawuDQogKg0KICogQHBhcmFtIHN0cmluZyAkdXJsIOi3s+i9rOmTvuaOpQ0KICovDQpmdW5jdGlvbiBSZWRpcmVjdCgkdXJsKQ0Kew0KICAgIFNldEh0dHBTdGF0dXNDb2RlKDMwMik7DQogICAgaGVhZGVyKCdMb2NhdGlvbjogJyAuICR1cmwpOw0KICAgIGRpZSgpOw0KfQ0KDQovKioNCiAqIDMwMei3s+i9rC4NCiAqDQogKiBAcGFyYW0gc3RyaW5nICR1cmwg6Lez6L2s6ZO+5o6lDQogKi8NCmZ1bmN0aW9uIFJlZGlyZWN0MzAxKCR1cmwpDQp7DQogICAgU2V0SHR0cFN0YXR1c0NvZGUoMzAxKTsNCiAgICBoZWFkZXIoJ0xvY2F0aW9uOiAnIC4gJHVybCk7DQogICAgZGllKCk7DQp9DQovKioNCiAqIEBpZ25vcmUNCiAqLw0KZnVuY3Rpb24gSHR0cDQwNCgpDQp7DQogICAgU2V0SHR0cFN0YXR1c0NvZGUoNDA0KTsNCiAgICBoZWFkZXIoIlN0YXR1czogNDA0IE5vdCBGb3VuZCIpOw0KfQ0KLyoqDQogKiBAaWdub3JlDQogKi8NCmZ1bmN0aW9uIEh0dHA1MDAoKQ0Kew0KICAgIFNldEh0dHBTdGF0dXNDb2RlKDUwMCk7DQp9DQovKioNCiAqIEBpZ25vcmUNCiAqLw0KZnVuY3Rpb24gSHR0cDUwMygpDQp7DQogICAgU2V0SHR0cFN0YXR1c0NvZGUoNTAzKTsNCn0NCg0KLyoqDQogKiDorr7nva4zMDTnvJPlrZjlpLQuDQogKg0KICogQHBhcmFtIHN0cmluZyAkZmlsZW5hbWUg5paH5Lu25ZCNDQogKiBAcGFyYW0gc3RyaW5nICR0aW1lICAgICDnvJPlrZjml7bpl7QNCiAqLw0KZnVuY3Rpb24gSHR0cDMwNCgkZmlsZW5hbWUsICR0aW1lKQ0Kew0KICAgICR1cmwgPSAkZmlsZW5hbWU7DQogICAgJG1kNSA9IG1kNSgkdXJsIC4gJHRpbWUpOw0KICAgICRldGFnID0gJyInIC4gJG1kNSAuICciJzsNCiAgICBoZWFkZXIoJ0xhc3QtTW9kaWZpZWQ6ICcgLiBnbWRhdGUoJ0QsIGQgTSBZIEg6aTpzJywgJHRpbWUpIC4gJyBHTVQnKTsNCiAgICBoZWFkZXIoIkVUYWc6ICRldGFnIik7DQogICAgaWYgKChpc3NldCgkX1NFUlZFUlsnSFRUUF9JRl9OT05FX01BVENIJ10pICYmICRfU0VSVkVSWydIVFRQX0lGX05PTkVfTUFUQ0gnXSA9PSAkZXRhZykpIHsNCiAgICAgICAgU2V0SHR0cFN0YXR1c0NvZGUoMzA0KTsNCiAgICAgICAgZGllKCk7DQogICAgfQ0KfQ0KDQovKioNCiAqIOiOt+WPluWuouaIt+err0lQLg0KICoNCiAqIEByZXR1cm4gc3RyaW5nIOi/lOWbnklQ5Zyw5Z2ADQogKi8NCmZ1bmN0aW9uIEdldEd1ZXN0SVAoKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KICAgIGlmIChpc3NldCgkemJwLT5vcHRpb25bJ1pDX1VTSU5HX0NETl9HVUVTVElQX1RZUEUnXSkgJiYgJHpicC0+b3B0aW9uWydaQ19VU0lOR19DRE5fR1VFU1RJUF9UWVBFJ10gIT0gJycpIHsNCiAgICAgICAgJHVzZXJfaXAgPSBHZXRWYXJzKCR6YnAtPm9wdGlvblsnWkNfVVNJTkdfQ0ROX0dVRVNUSVBfVFlQRSddLCAiU0VSVkVSIik7DQogICAgfSBlbHNlIHsNCiAgICAgICAgJHVzZXJfaXAgPSBHZXRWYXJzKCJSRU1PVEVfQUREUiIsICJTRVJWRVIiKTsNCiAgICB9DQoNCiAgICByZXR1cm4gJHVzZXJfaXA7DQp9DQoNCi8qKg0KICog6I635Y+W5a6i5oi356uvQWdlbnQuDQogKg0KICogQHJldHVybiBzdHJpbmcg6L+U5ZueQWdlbnQNCiAqLw0KZnVuY3Rpb24gR2V0R3Vlc3RBZ2VudCgpDQp7DQogICAgcmV0dXJuIEdldFZhcnMoIkhUVFBfVVNFUl9BR0VOVCIsICJTRVJWRVIiKTsNCn0NCg0KLyoqDQogKiDojrflj5bor7fmsYLmnaXmupBVUkwuDQogKg0KICogQHJldHVybiBzdHJpbmcg6L+U5ZueVVJMDQogKi8NCmZ1bmN0aW9uIEdldFJlcXVlc3RVcmkoKQ0Kew0KICAgIGlmIChpc3NldCgkX1NFUlZFUlsnSFRUUF9YX09SSUdJTkFMX1VSTCddKSkgew0KICAgICAgICAkdXJsID0gJF9TRVJWRVJbJ0hUVFBfWF9PUklHSU5BTF9VUkwnXTsNCiAgICB9IGVsc2VpZiAoaXNzZXQoJF9TRVJWRVJbJ0hUVFBfWF9SRVdSSVRFX1VSTCddKSkgew0KICAgICAgICAkdXJsID0gJF9TRVJWRVJbJ0hUVFBfWF9SRVdSSVRFX1VSTCddOw0KICAgICAgICBpZiAoc3RycG9zKCR1cmwsICc/JykgIT09IGZhbHNlKSB7DQogICAgICAgICAgICAkcXVlcmllcyA9IEdldFZhbHVlSW5BcnJheShleHBsb2RlKCc/JywgJHVybCksICcxJyk7DQogICAgICAgICAgICBmb3JlYWNoIChleHBsb2RlKCcmJywgJHF1ZXJpZXMpIGFzICRxdWVyeSkgew0KICAgICAgICAgICAgICAgICRuYW1lID0gR2V0VmFsdWVJbkFycmF5KGV4cGxvZGUoJz0nLCAkcXVlcnkpLCAnMCcpOw0KICAgICAgICAgICAgICAgICR2YWx1ZSA9IEdldFZhbHVlSW5BcnJheShleHBsb2RlKCc9JywgJHF1ZXJ5KSwgJzEnKTsNCiAgICAgICAgICAgICAgICAkbmFtZSA9IHVybGRlY29kZSgkbmFtZSk7DQogICAgICAgICAgICAgICAgJHZhbHVlID0gdXJsZGVjb2RlKCR2YWx1ZSk7DQogICAgICAgICAgICAgICAgaWYgKCFpc3NldCgkX0dFVFskbmFtZV0pKSB7DQogICAgICAgICAgICAgICAgICAgICRfR0VUWyRuYW1lXSA9ICR2YWx1ZTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAoIWlzc2V0KCRfR0VUWyRuYW1lXSkpIHsNCiAgICAgICAgICAgICAgICAgICAgJF9SRVFVRVNUWyRuYW1lXSA9ICR2YWx1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9IGVsc2VpZiAoaXNzZXQoJF9TRVJWRVJbJ1JFUVVFU1RfVVJJJ10pKSB7DQogICAgICAgICR1cmwgPSAkX1NFUlZFUlsnUkVRVUVTVF9VUkknXTsNCiAgICB9IGVsc2VpZiAoaXNzZXQoJF9TRVJWRVJbJ1JFRElSRUNUX1VSTCddKSkgew0KICAgICAgICAkdXJsID0gJF9TRVJWRVJbJ1JFRElSRUNUX1VSTCddOw0KICAgICAgICBpZiAoaXNzZXQoJF9TRVJWRVJbJ1JFRElSRUNUX1FVRVJZX1NUUklOJ10pKSB7DQogICAgICAgICAgICAkdXJsIC49ICc/JyAuICRfU0VSVkVSWydSRURJUkVDVF9RVUVSWV9TVFJJTiddOw0KICAgICAgICB9DQogICAgfSBlbHNlIHsNCiAgICAgICAgJHVybCA9ICRfU0VSVkVSWydQSFBfU0VMRiddIC4gKCRfU0VSVkVSWydRVUVSWV9TVFJJTkcnXSA/ICc/JyAuICRfU0VSVkVSWydRVUVSWV9TVFJJTkcnXSA6ICcnKTsNCiAgICB9DQoNCiAgICByZXR1cm4gJHVybDsNCn0NCg0KLyoqDQogKiDojrflj5bmlofku7blkI7nvIDlkI0uDQogKg0KICogQHBhcmFtIHN0cmluZyAkZiDmlofku7blkI0NCiAqDQogKiBAcmV0dXJuIHN0cmluZyDov5Tlm57lsI/lhpnnmoTlkI7nvIDlkI0NCiAqLw0KZnVuY3Rpb24gR2V0RmlsZUV4dCgkZikNCnsNCiAgICBpZiAoc3RycG9zKCRmLCAnLicpID09PSBmYWxzZSkgew0KICAgICAgICByZXR1cm4gJyc7DQogICAgfQ0KDQogICAgJGEgPSBleHBsb2RlKCcuJywgJGYpOw0KDQogICAgcmV0dXJuIHN0cnRvbG93ZXIoZW5kKCRhKSk7DQp9DQoNCi8qKg0KICog6I635Y+W5paH5Lu25p2D6ZmQLg0KICoNCiAqIEBwYXJhbSBzdHJpbmcgJGYg5paH5Lu25ZCNDQogKg0KICogQHJldHVybiBzdHJpbmd8bnVsbCDov5Tlm57mlofku7bmnYPpmZDvvIzmlbDlgLzmoLzlvI/vvIzlpoIwNjQ0DQogKi8NCmZ1bmN0aW9uIEdldEZpbGVQZXJtc09jdCgkZikNCnsNCiAgICBpZiAoIWZpbGVfZXhpc3RzKCRmKSkgew0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgcmV0dXJuIHN1YnN0cihzcHJpbnRmKCclbycsIGZpbGVwZXJtcygkZikpLCAtNCk7DQp9DQoNCi8qKg0KICog6I635Y+W5paH5Lu25p2D6ZmQLg0KICoNCiAqIEBwYXJhbSBzdHJpbmcgJGYg5paH5Lu25ZCNDQogKg0KICogQHJldHVybiBzdHJpbmd8bnVsbCDov5Tlm57mlofku7bmnYPpmZDvvIzlrZfnrKbooajovr7moLzlvI/vvIzlpoItcnctci0tci0tDQogKi8NCmZ1bmN0aW9uIEdldEZpbGVQZXJtcygkZikNCnsNCiAgICBpZiAoIWZpbGVfZXhpc3RzKCRmKSkgew0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgJHBlcm1zID0gZmlsZXBlcm1zKCRmKTsNCiAgICBzd2l0Y2ggKCRwZXJtcyAmIDB4RjAwMCkgew0KICAgICAgICBjYXNlIDB4QzAwMDogLy8gc29ja2V0DQogICAgICAgICAgICAkaW5mbyA9ICdzJzsNCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlIDB4QTAwMDogLy8gc3ltYm9saWMgbGluaw0KICAgICAgICAgICAgJGluZm8gPSAnbCc7DQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAweDgwMDA6IC8vIHJlZ3VsYXINCiAgICAgICAgICAgICRpbmZvID0gJy0nOw0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgMHg2MDAwOiAvLyBibG9jayBzcGVjaWFsDQogICAgICAgICAgICAkaW5mbyA9ICdiJzsNCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlIDB4NDAwMDogLy8gZGlyZWN0b3J5DQogICAgICAgICAgICAkaW5mbyA9ICdkJzsNCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlIDB4MjAwMDogLy8gY2hhcmFjdGVyIHNwZWNpYWwNCiAgICAgICAgICAgICRpbmZvID0gJ2MnOw0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgMHgxMDAwOiAvLyBGSUZPIHBpcGUNCiAgICAgICAgICAgICRpbmZvID0gJ3AnOw0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgIGRlZmF1bHQ6IC8vIHVua25vd24NCiAgICAgICAgICAgICRpbmZvID0gJ3UnOw0KICAgIH0NCg0KICAgIC8vIE93bmVyDQogICAgJGluZm8gLj0gKCgkcGVybXMgJiAweDAxMDApID8gJ3InIDogJy0nKTsNCiAgICAkaW5mbyAuPSAoKCRwZXJtcyAmIDB4MDA4MCkgPyAndycgOiAnLScpOw0KICAgICRpbmZvIC49ICgoJHBlcm1zICYgMHgwMDQwKSA/ICgoJHBlcm1zICYgMHgwODAwKSA/ICdzJyA6ICd4JykgOiAoKCRwZXJtcyAmIDB4MDgwMCkgPyAnUycgOiAnLScpKTsNCg0KICAgIC8vIEdyb3VwDQogICAgJGluZm8gLj0gKCgkcGVybXMgJiAweDAwMjApID8gJ3InIDogJy0nKTsNCiAgICAkaW5mbyAuPSAoKCRwZXJtcyAmIDB4MDAxMCkgPyAndycgOiAnLScpOw0KICAgICRpbmZvIC49ICgoJHBlcm1zICYgMHgwMDA4KSA/ICgoJHBlcm1zICYgMHgwNDAwKSA/ICdzJyA6ICd4JykgOiAoKCRwZXJtcyAmIDB4MDQwMCkgPyAnUycgOiAnLScpKTsNCg0KICAgIC8vIE90aGVyDQogICAgJGluZm8gLj0gKCgkcGVybXMgJiAweDAwMDQpID8gJ3InIDogJy0nKTsNCiAgICAkaW5mbyAuPSAoKCRwZXJtcyAmIDB4MDAwMikgPyAndycgOiAnLScpOw0KICAgICRpbmZvIC49ICgoJHBlcm1zICYgMHgwMDAxKSA/ICgoJHBlcm1zICYgMHgwMjAwKSA/ICd0JyA6ICd4JykgOiAoKCRwZXJtcyAmIDB4MDIwMCkgPyAnVCcgOiAnLScpKTsNCg0KICAgIHJldHVybiAkaW5mbzsNCn0NCg0KLyoqDQogKiDlkJHlrZfnrKbkuLLlnovnmoTlj4LmlbDooajliqDlhaXkuIDkuKrmlrDlj4LmlbAuDQogKg0KICogQHBhcmFtIHN0cmluZyAkcyAgICDlrZfnrKbkuLLlnovnmoTlj4LmlbDooajvvIzku6V856ym5Y+35YiG6ZqUDQogKiBAcGFyYW0gc3RyaW5nICRuYW1lIOWPguaVsOWQjQ0KICoNCiAqIEByZXR1cm4gc3RyaW5nIOi/lOWbnuaWsOWtl+espuS4su+8jOS7pXznrKblj7fliIbpmpQNCiAqLw0KZnVuY3Rpb24gQWRkTmFtZUluU3RyaW5nKCRzLCAkbmFtZSkNCnsNCiAgICAkcGwgPSAkczsNCiAgICAkbmFtZSA9IChzdHJpbmcpICRuYW1lOw0KICAgICRhcGwgPSBleHBsb2RlKCd8JywgJHBsKTsNCiAgICBpZiAoaW5fYXJyYXkoJG5hbWUsICRhcGwpID09IGZhbHNlKSB7DQogICAgICAgICRhcGxbXSA9ICRuYW1lOw0KICAgIH0NCiAgICAkcGwgPSB0cmltKGltcGxvZGUoJ3wnLCAkYXBsKSwgJ3wnKTsNCg0KICAgIHJldHVybiAkcGw7DQp9DQoNCi8qKg0KICog5LuO5a2X56ym5Liy5Z6L55qE5Y+C5pWw6KGo5Lit5Yig6Zmk5LiA5Liq5Y+C5pWwLg0KICoNCiAqIEBwYXJhbSBzdHJpbmcgJHMgICAg5a2X56ym5Liy5Z6L55qE5Y+C5pWw6KGo77yM5LulfOespuWPt+WIhumalA0KICogQHBhcmFtIHN0cmluZyAkbmFtZSDlj4LmlbDlkI0NCiAqDQogKiBAcmV0dXJuIHN0cmluZyDov5Tlm57mlrDlrZfnrKbkuLLvvIzku6V856ym5Y+35YiG6ZqUDQogKi8NCmZ1bmN0aW9uIERlbE5hbWVJblN0cmluZygkcywgJG5hbWUpDQp7DQogICAgJHBsID0gJHM7DQogICAgJG5hbWUgPSAoc3RyaW5nKSAkbmFtZTsNCiAgICAkYXBsID0gZXhwbG9kZSgnfCcsICRwbCk7DQogICAgJGNvdW50ID0gY291bnQoJGFwbCk7DQogICAgZm9yICgkaSA9IDA7ICRpIDwgJGNvdW50OyAkaSsrKSB7DQogICAgICAgIGlmICgkYXBsWyRpXSA9PSAkbmFtZSkgew0KICAgICAgICAgICAgdW5zZXQoJGFwbFskaV0pOw0KICAgICAgICB9DQogICAgfQ0KICAgICRwbCA9IHRyaW0oaW1wbG9kZSgnfCcsICRhcGwpLCAnfCcpOw0KDQogICAgcmV0dXJuICRwbDsNCn0NCg0KLyoqDQogKiDlnKjlrZfnrKbkuLLlj4LmlbDlgLzmn6Xmib7lj4LmlbAuDQogKg0KICogQHBhcmFtIHN0cmluZyAkcyAgICDlrZfnrKbkuLLlnovnmoTlj4LmlbDooajvvIzku6V856ym5Y+35YiG6ZqUDQogKiBAcGFyYW0gc3RyaW5nICRuYW1lIOWPguaVsOWQjQ0KICoNCiAqIEByZXR1cm4gYm9vbA0KICovDQpmdW5jdGlvbiBIYXNOYW1lSW5TdHJpbmcoJHMsICRuYW1lKQ0Kew0KICAgICRwbCA9ICRzOw0KICAgICRuYW1lID0gKHN0cmluZykgJG5hbWU7DQogICAgJGFwbCA9IGV4cGxvZGUoJ3wnLCAkcGwpOw0KDQogICAgcmV0dXJuIGluX2FycmF5KCRuYW1lLCAkYXBsKTsNCn0NCg0KLyoqDQogKiDku6VKU09O5b2i5byP6L6T5Ye66ZSZ6K+v5L+h5oGv77yI55So5LqOU2hvd0Vycm9y5o6l5Y+j77yJLg0KICoNCiAqIEBwYXJhbSAkZXJyb3JDb2RlDQogKiBAcGFyYW0gJGVycm9yU3RyaW5nDQogKiBAcGFyYW0gJGZpbGUNCiAqIEBwYXJhbSAkbGluZQ0KICovDQpmdW5jdGlvbiBKc29uRXJyb3I0U2hvd0Vycm9ySG9vaygkZXJyb3JDb2RlLCAkZXJyb3JTdHJpbmcsICRmaWxlLCAkbGluZSkNCnsNCiAgICBpZiAoJGVycm9yQ29kZSA9PT0gMCkgew0KICAgICAgICAkZXJyb3JDb2RlID0gMTsNCiAgICB9DQogICAgSnNvbkVycm9yKCRlcnJvckNvZGUsICRlcnJvclN0cmluZywgbnVsbCk7DQp9DQoNCi8qKg0KICog5LulSlNPTuW9ouW8j+i+k+WHuumUmeivr+S/oeaBry4oZXJyIGNvZGXkuLooaW50KTDorqTkuLrmmK/msqHmnInplJnor6/vvIzmiYDku6Xmioow6L2s5Li6MSkNCiAqDQogKiBAcGFyYW0gc3RyaW5nICRlcnJvckNvZGUgICDplJnor6/nvJblj7cNCiAqIEBwYXJhbSBzdHJpbmcgJGVycm9yU3RyaW5nIOmUmeivr+WGheWuuQ0KICogQHBhcmFtIG9iamVjdCAkZGF0YSDlhbfkvZPlhoXlrrkNCiAqLw0KZnVuY3Rpb24gSnNvbkVycm9yKCRlcnJvckNvZGUsICRlcnJvclN0cmluZywgJGRhdGEpDQp7DQogICAgJGV4aXQgPSB0cnVlOw0KICAgIGlmICgkZXJyb3JDb2RlID09PSAwKSB7DQogICAgICAgICRleGl0ID0gZmFsc2U7DQogICAgfQ0KICAgICRyZXN1bHQgPSBhcnJheSgNCiAgICAgICAgJ2RhdGEnID0+ICRkYXRhLA0KICAgICAgICAnZXJyJyAgPT4gYXJyYXkoDQogICAgICAgICAgICAnY29kZScgPT4gJGVycm9yQ29kZSwNCiAgICAgICAgICAgICdtc2cnICA9PiAkZXJyb3JTdHJpbmcsDQogICAgICAgICAgICAvLydydW50aW1lJyA9PiBSdW5UaW1lKCksDQogICAgICAgICAgICAndGltZXN0YW1wJyA9PiB0aW1lKCksDQogICAgICAgICksDQogICAgKTsNCiAgICBAb2JfY2xlYW4oKTsNCiAgICBlY2hvIGpzb25fZW5jb2RlKCRyZXN1bHQpOw0KICAgIGlmICgkZXhpdCkgew0KICAgICAgICBleGl0Ow0KICAgIH0NCn0NCg0KLyoqDQogKiDlvZPku6PnoIHmraPluLjov5DooYzml7bvvIzku6VKU09O5b2i5byP6L6T5Ye65L+h5oGvLg0KICoNCiAqIEBwYXJhbSBvYmplY3Qg5b6F6L+U5Zue5YaF5a65DQogKi8NCmZ1bmN0aW9uIEpzb25SZXR1cm4oJGRhdGEpDQp7DQogICAgSnNvbkVycm9yKDAsICcnLCAkZGF0YSk7DQp9DQoNCi8qKg0KICogWE1MLVJQQ+W6lOetlOmUmeivr+mhtemdoi4NCiAqDQogKiBAcGFyYW0gJGVycm9yQ29kZQ0KICogQHBhcmFtICRlcnJvclN0cmluZw0KICoNCiAqIEByZXR1cm4gdm9pZA0KICovDQpmdW5jdGlvbiBSZXNwb25kRXJyb3IoJGVycm9yQ29kZSwgJGVycm9yU3RyaW5nID0gJycsICRmaWxlID0gJycsICRsaW5lID0gJycpDQp7DQogICAgJHN0clhNTCA9ICc8P3htbCB2ZXJzaW9uPSIxLjAiIGVuY29kaW5nPSJVVEYtOCI/PjxtZXRob2RSZXNwb25zZT48ZmF1bHQ+PHZhbHVlPjxzdHJ1Y3Q+PG1lbWJlcj48bmFtZT5mYXVsdENvZGU8L25hbWU+PHZhbHVlPjxpbnQ+JDE8L2ludD48L3ZhbHVlPjwvbWVtYmVyPjxtZW1iZXI+PG5hbWU+ZmF1bHRTdHJpbmc8L25hbWU+PHZhbHVlPjxzdHJpbmc+JDI8L3N0cmluZz48L3ZhbHVlPjwvbWVtYmVyPjwvc3RydWN0PjwvdmFsdWU+PC9mYXVsdD48L21ldGhvZFJlc3BvbnNlPic7DQogICAgJHN0ckVycm9yID0gJHN0clhNTDsNCiAgICAkc3RyRXJyb3IgPSBzdHJfcmVwbGFjZSgiJDEiLCBGb3JtYXRTdHJpbmcoJGVycm9yQ29kZSwgIltodG1sLWZvcm1hdF0iKSwgJHN0ckVycm9yKTsNCiAgICAkc3RyRXJyb3IgPSBzdHJfcmVwbGFjZSgiJDIiLCBGb3JtYXRTdHJpbmcoJGVycm9yU3RyaW5nLCAiW2h0bWwtZm9ybWF0XSIpLCAkc3RyRXJyb3IpOw0KDQogICAgb2JfY2xlYW4oKTsNCiAgICBlY2hvICRzdHJFcnJvcjsNCiAgICBleGl0Ow0KfQ0KDQovKioNCiAqIFhNTC1SUEPohJrmnKzplJnor6/pobXpnaIuDQogKg0KICogQHBhcmFtIHN0cmluZyAkZXJyb3JDb2RlIOmUmeivr+aPkOekuuWtl+espuS4sg0KICogQHBhcmFtICRlcnJvclN0cmluZw0KICoNCiAqIEByZXR1cm4gdm9pZA0KICovDQpmdW5jdGlvbiBTY3JpcHRFcnJvcigkZXJyb3JDb2RlLCAkZXJyb3JUZXh0ID0gJycsICRmaWxlID0gJycsICRsaW5lID0gJycpDQp7DQogICAgaGVhZGVyKCdDb250ZW50LXR5cGU6IGFwcGxpY2F0aW9uL3gtamF2YXNjcmlwdDsgQ2hhcnNldD11dGYtOCcpOw0KICAgIG9iX2NsZWFuKCk7DQogICAgZWNobyAnYWxlcnQoIicgLiBzdHJfcmVwbGFjZSgnIicsICdcIicsICRlcnJvckNvZGUgLiAnOicgLiAkZXJyb3JUZXh0KSAuICciKSc7DQogICAgZGllKCk7DQp9DQoNCi8qKg0KICogIOmqjOivgeWtl+espuS4suaYr+WQpuespuWQiOato+WImeihqOi+vuW8jy4NCiAqDQogKiBAcGFyYW0gc3RyaW5nICRzb3VyY2Ug5a2X56ym5LiyDQogKiBAcGFyYW0gc3RyaW5nICRwYXJhICAg5q2j5YiZ6KGo6L6+5byP77yM5Y+v55SoW3VzZXJuYW1lXXxbcGFzc3dvcmRdfFtlbWFpbF18W2hvbWVwYWdlXeaIluiHquWumuS5ieihqOi+vuW8jw0KICoNCiAqIEByZXR1cm4gYm9vbA0KICovDQpmdW5jdGlvbiBDaGVja1JlZ0V4cCgkc291cmNlLCAkcGFyYSkNCnsNCiAgICBpZiAoc3RycG9zKCRwYXJhLCAnW3VzZXJuYW1lXScpICE9PSBmYWxzZSkgew0KICAgICAgICAkcGFyYSA9ICIvXltcLlxfQS1aYS16MC05wrdAXHh7NGUwMH0tXHh7OWZhNX1dKyQvdSI7DQogICAgfSBlbHNlaWYgKHN0cnBvcygkcGFyYSwgJ1tuaWNrbmFtZV0nKSAhPT0gZmFsc2UpIHsNCiAgICAgICAgJHBhcmEgPSAnLyhbXlx4ezAxfS1ceHsxRn1ceHs4MH0tXHh7RkZ9XC86XFx+JiU7QFwnIj88PnwjJFwqfXssXCs9XFtcXVwoXClce1x9XHRcclxuXHB7Q31dKS91JzsNCiAgICB9IGVsc2VpZiAoc3RycG9zKCRwYXJhLCAnW3Bhc3N3b3JkXScpICE9PSBmYWxzZSkgew0KICAgICAgICAkcGFyYSA9ICIvXltBLVphLXowLTlgfiFAI1wkJVxeJlwqXC1fXD9dKyQvdSI7DQogICAgfSBlbHNlaWYgKHN0cnBvcygkcGFyYSwgJ1tlbWFpbF0nKSAhPT0gZmFsc2UpIHsNCiAgICAgICAgJHBhcmEgPSAiL14oWzAtOWEtekEtWl0oWy0uXHddKlswLTlhLXpBLVpdKSpAKFswLTlhLXpBLVpdWy1cd10qXC4pK1thLXpBLVpdKikkL3UiOw0KICAgIH0gZWxzZWlmIChzdHJwb3MoJHBhcmEsICdbaG9tZXBhZ2VdJykgIT09IGZhbHNlKSB7DQogICAgICAgICRwYXJhID0gIi9eW2EtekEtWl0rOlwvXC9bYS16QS1aMC05XF9cLVwuXCZcP1wvOj0jXHh7NGUwMH0tXHh7OWZhNX1dKyQvdSI7DQogICAgfSBlbHNlaWYgKCEkcGFyYSkgew0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KDQogICAgcmV0dXJuIChib29sKSBwcmVnX21hdGNoKCRwYXJhLCAkc291cmNlKTsNCn0NCg0KLyoqDQogKiAg5qC85byP5YyW5a2X56ym5LiyLg0KICoNCiAqIEBwYXJhbSBzdHJpbmcgJHNvdXJjZSDlrZfnrKbkuLINCiAqIEBwYXJhbSBzdHJpbmcgJHBhcmEgICDmraPliJnooajovr7lvI/vvIzlj6/nlKhbaHRtbC1mb3JtYXRdfFtub2h0bWxdfFtub3NjcmlwdF18W2VudGVyXXxbbm9lbnRlcl18W2ZpbGVuYW1lXXxbbm9ybWFsbmFtZV3miJboh6rlrprkuYnooajovr7lvI8NCiAqDQogKiBAcmV0dXJuIHN0cmluZw0KICovDQpmdW5jdGlvbiBGb3JtYXRTdHJpbmcoJHNvdXJjZSwgJHBhcmEpDQp7DQogICAgaWYgKHN0cnBvcygkcGFyYSwgJ1todG1sLWZvcm1hdF0nKSAhPT0gZmFsc2UpIHsNCiAgICAgICAgJHNvdXJjZSA9IGh0bWxzcGVjaWFsY2hhcnMoJHNvdXJjZSk7DQogICAgfQ0KDQogICAgaWYgKHN0cnBvcygkcGFyYSwgJ1tub2h0bWxdJykgIT09IGZhbHNlKSB7DQogICAgICAgICRzb3VyY2UgPSBwcmVnX3JlcGxhY2UoIi88KFtePD5dKik+L3NpIiwgIiIsICRzb3VyY2UpOw0KICAgICAgICAkc291cmNlID0gc3RyX3JlcGxhY2UoIjwiLCAiy4IiLCAkc291cmNlKTsNCiAgICAgICAgJHNvdXJjZSA9IHN0cl9yZXBsYWNlKCI+IiwgIsuDIiwgJHNvdXJjZSk7DQogICAgfQ0KDQogICAgaWYgKHN0cnBvcygkcGFyYSwgJ1tub3NjcmlwdF0nKSAhPT0gZmFsc2UpIHsNCiAgICAgICAgJGNsYXNzID0gbmV3IFhzc0h0bWwoJHNvdXJjZSk7DQogICAgICAgICRzb3VyY2UgPSB0cmltKCRjbGFzcy0+Z2V0SHRtbCgpKTsNCiAgICB9DQogICAgaWYgKHN0cnBvcygkcGFyYSwgJ1tlbnRlcl0nKSAhPT0gZmFsc2UpIHsNCiAgICAgICAgJHNvdXJjZSA9IHN0cl9yZXBsYWNlKCJcclxuIiwgIjxici8+IiwgJHNvdXJjZSk7DQogICAgICAgICRzb3VyY2UgPSBzdHJfcmVwbGFjZSgiXG4iLCAiPGJyLz4iLCAkc291cmNlKTsNCiAgICAgICAgJHNvdXJjZSA9IHN0cl9yZXBsYWNlKCJcciIsICI8YnIvPiIsICRzb3VyY2UpOw0KICAgICAgICAkc291cmNlID0gcHJlZ19yZXBsYWNlKCIvKDxiclwvPikrLyIsICI8YnIvPiIsICRzb3VyY2UpOw0KICAgIH0NCiAgICBpZiAoc3RycG9zKCRwYXJhLCAnW25vZW50ZXJdJykgIT09IGZhbHNlKSB7DQogICAgICAgICRzb3VyY2UgPSBzdHJfcmVwbGFjZSgiXHJcbiIsICIiLCAkc291cmNlKTsNCiAgICAgICAgJHNvdXJjZSA9IHN0cl9yZXBsYWNlKCJcbiIsICIiLCAkc291cmNlKTsNCiAgICAgICAgJHNvdXJjZSA9IHN0cl9yZXBsYWNlKCJcciIsICIiLCAkc291cmNlKTsNCiAgICB9DQogICAgaWYgKHN0cnBvcygkcGFyYSwgJ1tmaWxlbmFtZV0nKSAhPT0gZmFsc2UpIHsNCiAgICAgICAgJHNvdXJjZSA9IHN0cl9yZXBsYWNlKGFycmF5KCIvIiwgIiMiLCAiJCIsICJcXCIsICI6IiwgIj8iLCAiKiIsICJcIiIsICI8IiwgIj4iLCAifCIsICIgIiksIGFycmF5KCIiKSwgJHNvdXJjZSk7DQogICAgfQ0KICAgIGlmIChzdHJwb3MoJHBhcmEsICdbbm9ybWFsbmFtZV0nKSAhPT0gZmFsc2UpIHsNCiAgICAgICAgJHNvdXJjZSA9IHN0cl9yZXBsYWNlKGFycmF5KCIjIiwgIiQiLCAiKCIsICIpIiwgIioiLCAiKyIsICJbIiwgIl0iLCAieyIsICJ9IiwgIj8iLCAiXFwiLCAiXiIsICJ8IiwgIjoiLCAiJyIsICJcIiIsICI7IiwgIkAiLCAifiIsICI9IiwgIiUiLCAiJiIpLCBhcnJheSgiIiksICRzb3VyY2UpOw0KICAgIH0NCg0KICAgIHJldHVybiAkc291cmNlOw0KfQ0KDQovKioNCiAqIEBEZXByZWNhdGVkDQogKiDmoLzlvI/ljJblrZfnrKbkuLINCiAqKi8NCmZ1bmN0aW9uIFRyYW5zZmVySFRNTCgkc291cmNlLCAkcGFyYW0pDQp7DQogICAgcmV0dXJuIEZvcm1hdFN0cmluZygkc291cmNlLCAkcGFyYW0pOw0KfQ0KDQovKioNCiAqICDlsIHoo4VIVE1M5qCH562+Lg0KICoNCiAqIEBwYXJhbSBzdHJpbmcgJGh0bWwgaHRtbOa6kOeggQ0KICoNCiAqIEByZXR1cm4gc3RyaW5nDQogKi8NCmZ1bmN0aW9uIENsb3NlVGFncygkaHRtbCkNCnsNCiAgICBwcmVnX21hdGNoX2FsbCgnIzwoPyFtZXRhfGltZ3xicnxocnxpbnB1dFxiKVxiKFthLXpdKykoPzogLiopPyg/PCFbL3wvIF0pPiNpVScsICRodG1sLCAkcmVzdWx0KTsNCiAgICAkb3BlbmVkdGFncyA9ICRyZXN1bHRbMV07DQogICAgcHJlZ19tYXRjaF9hbGwoJyM8LyhbYS16XSspPiNpVScsICRodG1sLCAkcmVzdWx0KTsNCiAgICAkY2xvc2VkdGFncyA9ICRyZXN1bHRbMV07DQogICAgJGxlbl9vcGVuZWQgPSBjb3VudCgkb3BlbmVkdGFncyk7DQogICAgaWYgKGNvdW50KCRjbG9zZWR0YWdzKSA9PSAkbGVuX29wZW5lZCkgew0KICAgICAgICByZXR1cm4gJGh0bWw7DQogICAgfQ0KICAgICRvcGVuZWR0YWdzID0gYXJyYXlfcmV2ZXJzZSgkb3BlbmVkdGFncyk7DQogICAgZm9yICgkaSA9IDA7ICRpIDwgJGxlbl9vcGVuZWQ7ICRpKyspIHsNCiAgICAgICAgaWYgKCFpbl9hcnJheSgkb3BlbmVkdGFnc1skaV0sICRjbG9zZWR0YWdzKSkgew0KICAgICAgICAgICAgJGh0bWwgLj0gJzwvJyAuICRvcGVuZWR0YWdzWyRpXSAuICc+JzsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHVuc2V0KCRjbG9zZWR0YWdzW2FycmF5X3NlYXJjaCgkb3BlbmVkdGFnc1skaV0sICRjbG9zZWR0YWdzKV0pOw0KICAgICAgICB9DQogICAgfQ0KICAgIHJldHVybiAkaHRtbDsNCn0NCg0KLyoqDQogKiDojrflj5ZVVEY45qC85byP55qE5a2X56ym5Liy55qE5a2Q5LiyLg0KICoNCiAqIEBwYXJhbSBzdHJpbmcgJHNvdXJjZXN0ciDmupDlrZfnrKbkuLINCiAqIEBwYXJhbSBpbnQgICAgJHN0YXJ0ICAgICDotbflp4vkvY3nva4NCiAqIEBwYXJhbSBpbnQgICAgJGN1dGxlbmd0aCDlrZDkuLLplb/luqYNCiAqDQogKiBAcmV0dXJuIHN0cmluZw0KICovDQpmdW5jdGlvbiBTdWJTdHJVVEY4X1N0YXJ0KCRzb3VyY2VzdHIsICRzdGFydCwgJGN1dGxlbmd0aCkNCnsNCiAgICBpZiAoZnVuY3Rpb25fZXhpc3RzKCdtYl9zdWJzdHInKSAmJiBmdW5jdGlvbl9leGlzdHMoJ21iX2ludGVybmFsX2VuY29kaW5nJykpIHsNCiAgICAgICAgbWJfaW50ZXJuYWxfZW5jb2RpbmcoJ1VURi04Jyk7DQoNCiAgICAgICAgcmV0dXJuIG1iX3N1YnN0cigkc291cmNlc3RyLCAkc3RhcnQsICRjdXRsZW5ndGgpOw0KICAgIH0NCg0KICAgIGlmIChmdW5jdGlvbl9leGlzdHMoJ2ljb252X3N1YnN0cicpICYmIGZ1bmN0aW9uX2V4aXN0cygnaWNvbnZfc2V0X2VuY29kaW5nJykpIHsNCiAgICAgICAgaWNvbnZfc2V0X2VuY29kaW5nKCJpbnRlcm5hbF9lbmNvZGluZyIsICJVVEYtOCIpOw0KICAgICAgICBpY29udl9zZXRfZW5jb2RpbmcoIm91dHB1dF9lbmNvZGluZyIsICJVVEYtOCIpOw0KDQogICAgICAgIHJldHVybiBpY29udl9zdWJzdHIoJHNvdXJjZXN0ciwgJHN0YXJ0LCAkY3V0bGVuZ3RoKTsNCiAgICB9DQoNCiAgICByZXR1cm4gc3Vic3RyKCRzb3VyY2VzdHIsICRzdGFydCwgJGN1dGxlbmd0aCk7DQp9DQoNCi8qKg0KICogIOiOt+WPllVURjjmoLzlvI/nmoTlrZfnrKbkuLLnmoTlrZDkuLIuDQogKg0KICogQHBhcmFtIHN0cmluZyAkc291cmNlc3RyIOa6kOWtl+espuS4sg0KICogQHBhcmFtIGludCAgICAkY3V0bGVuZ3RoIOWtkOS4sumVv+W6pg0KICoNCiAqIEByZXR1cm4gc3RyaW5nDQogKi8NCmZ1bmN0aW9uIFN1YlN0clVURjgoJHNvdXJjZXN0ciwgJGN1dGxlbmd0aCkNCnsNCiAgICBpZiAoZnVuY3Rpb25fZXhpc3RzKCdtYl9zdWJzdHInKSAmJiBmdW5jdGlvbl9leGlzdHMoJ21iX2ludGVybmFsX2VuY29kaW5nJykpIHsNCiAgICAgICAgbWJfaW50ZXJuYWxfZW5jb2RpbmcoJ1VURi04Jyk7DQoNCiAgICAgICAgcmV0dXJuIG1iX3N1YnN0cigkc291cmNlc3RyLCAwLCAkY3V0bGVuZ3RoKTsNCiAgICB9DQoNCiAgICBpZiAoZnVuY3Rpb25fZXhpc3RzKCdpY29udl9zdWJzdHInKSAmJiBmdW5jdGlvbl9leGlzdHMoJ2ljb252X3NldF9lbmNvZGluZycpKSB7DQogICAgICAgIGljb252X3NldF9lbmNvZGluZygiaW50ZXJuYWxfZW5jb2RpbmciLCAiVVRGLTgiKTsNCiAgICAgICAgaWNvbnZfc2V0X2VuY29kaW5nKCJvdXRwdXRfZW5jb2RpbmciLCAiVVRGLTgiKTsNCg0KICAgICAgICByZXR1cm4gaWNvbnZfc3Vic3RyKCRzb3VyY2VzdHIsIDAsICRjdXRsZW5ndGgpOw0KICAgIH0NCg0KICAgICRyZXQgPSAnJzsNCiAgICAkaSA9IDA7DQogICAgJG4gPSAwOw0KDQogICAgJHN0cl9sZW5ndGggPSBzdHJsZW4oJHNvdXJjZXN0cik7IC8v5a2X56ym5Liy55qE5a2X6IqC5pWwDQoNCiAgICB3aGlsZSAoKCRuIDwgJGN1dGxlbmd0aCkgYW5kICgkaSA8PSAkc3RyX2xlbmd0aCkpIHsNCiAgICAgICAgJHRlbXBfc3RyID0gc3Vic3RyKCRzb3VyY2VzdHIsICRpLCAxKTsNCiAgICAgICAgJGFzY251bSA9IG9yZCgkdGVtcF9zdHIpOyAvL+W+l+WIsOWtl+espuS4suS4reesrCRp5L2N5a2X56ym55qEYXNjaWnnoIENCiAgICAgICAgaWYgKCRhc2NudW0gPj0gMjI0KSB7IC8v5aaC5p6cQVNDSUnkvY3pq5jkuI4yMjTvvIwNCiAgICAgICAgICAgICRyZXQgPSAkcmV0IC4gc3Vic3RyKCRzb3VyY2VzdHIsICRpLCAzKTsgLy/moLnmja5VVEYtOOe8lueggeinhOiMg++8jOWwhjPkuKrov57nu63nmoTlrZfnrKborqHkuLrljZXkuKrlrZfnrKYNCiAgICAgICAgICAgICRpID0gJGkgKyAzOyAvL+WunumZhUJ5dGXorqHkuLozDQogICAgICAgICAgICAkbisrOyAvL+Wtl+S4sumVv+W6puiuoTENCiAgICAgICAgfSBlbHNlaWYgKCRhc2NudW0gPj0gMTkyKSB7IC8v5aaC5p6cQVNDSUnkvY3pq5jkuI4xOTLvvIwNCiAgICAgICAgICAgICRyZXQgPSAkcmV0IC4gc3Vic3RyKCRzb3VyY2VzdHIsICRpLCAyKTsgLy/moLnmja5VVEYtOOe8lueggeinhOiMg++8jOWwhjLkuKrov57nu63nmoTlrZfnrKborqHkuLrljZXkuKrlrZfnrKYNCiAgICAgICAgICAgICRpID0gJGkgKyAyOyAvL+WunumZhUJ5dGXorqHkuLoyDQogICAgICAgICAgICAkbisrOyAvL+Wtl+S4sumVv+W6puiuoTENCiAgICAgICAgfSBlbHNlaWYgKCRhc2NudW0gPj0gNjUgJiYgJGFzY251bSA8PSA5MCkgeyAvL+WmguaenOaYr+Wkp+WGmeWtl+avje+8jA0KICAgICAgICAgICAgJHJldCA9ICRyZXQgLiBzdWJzdHIoJHNvdXJjZXN0ciwgJGksIDEpOw0KICAgICAgICAgICAgJGkgPSAkaSArIDE7IC8v5a6e6ZmF55qEQnl0ZeaVsOS7jeiuoTHkuKoNCiAgICAgICAgICAgICRuKys7IC8v5L2G6ICD6JmR5pW05L2T576O6KeC77yM5aSn5YaZ5a2X5q+N6K6h5oiQ5LiA5Liq6auY5L2N5a2X56ymDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAvL+WFtuS7luaDheWGteS4i++8jOWMheaLrOWwj+WGmeWtl+avjeWSjOWNiuinkuagh+eCueespuWPt++8jA0KDQogICAgICAgICAgICAkcmV0ID0gJHJldCAuIHN1YnN0cigkc291cmNlc3RyLCAkaSwgMSk7DQogICAgICAgICAgICAkaSA9ICRpICsgMTsgLy/lrp7pmYXnmoRCeXRl5pWw6K6hMeS4qg0KICAgICAgICAgICAgICAgICRuID0gJG4gKyAwLjU7IC8v5bCP5YaZ5a2X5q+N5ZKM5Y2K6KeS5qCH54K5562J5LiO5Y2K5Liq6auY5L2N5a2X56ym5a69Li4uDQogICAgICAgIH0NCiAgICAgICAgLyoNCiAgICAgICAgaWYgKCRzdHJfbGVuZ3RoID4gJGN1dGxlbmd0aCkgew0KICAgICAgICAgICAgJHJldCA9ICRyZXQ7DQogICAgICAgIH0NCiAgICAgICAgKi8NCiAgICB9DQoNCiAgICByZXR1cm4gJHJldDsNCn0NCg0KLyoqDQogKiDmiKrlj5ZIVE1M5qC85byP55qEVVRGOOagvOW8j+eahOWtl+espuS4sueahOWtkOS4si4NCiAqDQogKiBAcGFyYW0gc3RyaW5nICRzb3VyY2Ug5rqQ5a2X56ym5LiyDQogKiBAcGFyYW0gaW50ICAgICRsZW5ndGgg5a2Q5Liy6ZW/5bqmDQogKg0KICogQHJldHVybiBzdHJpbmcNCiAqLw0KZnVuY3Rpb24gU3ViU3RyVVRGOF9IdG1sKCRzb3VyY2UsICRsZW5ndGgpDQp7DQogICAgaWYgKGZ1bmN0aW9uX2V4aXN0cygnbWJfc3Vic3RyJykgJiYgZnVuY3Rpb25fZXhpc3RzKCdtYl9pbnRlcm5hbF9lbmNvZGluZycpKSB7DQogICAgICAgIG1iX2ludGVybmFsX2VuY29kaW5nKCdVVEYtOCcpOw0KICAgICAgICAkaiA9IG1iX3N0cmxlbigkc291cmNlKTsNCiAgICAgICAgJHMgPSBtYl9zdWJzdHIoJHNvdXJjZSwgMCwgJGxlbmd0aCk7DQogICAgICAgICRsID0gbWJfc3Vic3RyX2NvdW50KCRzLCAnPCcpOw0KICAgICAgICAkciA9IG1iX3N1YnN0cl9jb3VudCgkcywgJz4nKTsNCiAgICAgICAgaWYgKCRsID4gMCAmJiAkbCA+ICRyKSB7DQogICAgICAgICAgICBmb3IgKCRpID0gJGxlbmd0aDsgJGkgPCAkajsgJGkrKykgew0KICAgICAgICAgICAgICAgICRzIC49IG1iX3N1YnN0cigkc291cmNlLCAkaSwgMSk7DQogICAgICAgICAgICAgICAgaWYgKG1iX3N1YnN0cigkc291cmNlLCAkaSwgMSkgPT0gJz4nKSB7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiAkczsNCiAgICB9DQoNCiAgICBpZiAoZnVuY3Rpb25fZXhpc3RzKCdpY29udl9zdWJzdHInKSAmJiBmdW5jdGlvbl9leGlzdHMoJ2ljb252X3NldF9lbmNvZGluZycpKSB7DQogICAgICAgIGljb252X3NldF9lbmNvZGluZygiaW50ZXJuYWxfZW5jb2RpbmciLCAiVVRGLTgiKTsNCiAgICAgICAgaWNvbnZfc2V0X2VuY29kaW5nKCJvdXRwdXRfZW5jb2RpbmciLCAiVVRGLTgiKTsNCiAgICAgICAgJGogPSBpY29udl9zdHJsZW4oJHNvdXJjZSk7DQogICAgICAgICRzID0gaWNvbnZfc3Vic3RyKCRzb3VyY2UsIDAsICRsZW5ndGgpOw0KICAgICAgICAkbCA9IHN1YnN0cl9jb3VudCgkcywgJzwnKTsNCiAgICAgICAgJHIgPSBzdWJzdHJfY291bnQoJHMsICc+Jyk7DQogICAgICAgIGlmICgkbCA+IDAgJiYgJGwgPiAkcikgew0KICAgICAgICAgICAgZm9yICgkaSA9ICRsZW5ndGg7ICRpIDwgJGo7ICRpKyspIHsNCiAgICAgICAgICAgICAgICAkcyAuPSBpY29udl9zdWJzdHIoJHNvdXJjZSwgJGksIDEpOw0KICAgICAgICAgICAgICAgIGlmIChpY29udl9zdWJzdHIoJHNvdXJjZSwgJGksIDEpID09ICc+Jykgew0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gJHM7DQogICAgfQ0KDQogICAgJGogPSBzdHJsZW4oJHNvdXJjZSk7DQogICAgJHMgPSBzdWJzdHIoJHNvdXJjZSwgMCwgJGxlbmd0aCk7DQogICAgJGwgPSBzdWJzdHJfY291bnQoJHMsICc8Jyk7DQogICAgJHIgPSBzdWJzdHJfY291bnQoJHMsICc+Jyk7DQogICAgaWYgKCRsID4gMCAmJiAkbCA+ICRyKSB7DQogICAgICAgIGZvciAoJGkgPSAkbGVuZ3RoOyAkaSA8ICRqOyAkaSsrKSB7DQogICAgICAgICAgICAkcyAuPSBzdWJzdHIoJHNvdXJjZSwgJGksIDEpOw0KICAgICAgICAgICAgaWYgKHN1YnN0cigkc291cmNlLCAkaSwgMSkgPT0gJz4nKSB7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICByZXR1cm4gJHM7DQp9DQoNCi8qKg0KICog5Yig6Zmk5paH5Lu2Qk9N5aS0Lg0KICoNCiAqIEBwYXJhbSBzdHJpbmcgJHMg5paH5Lu25YaF5a65DQogKg0KICogQHJldHVybiBzdHJpbmcNCiAqLw0KZnVuY3Rpb24gUmVtb3ZlQk9NKCRzKQ0Kew0KICAgICRjaGFyc2V0ID0gYXJyYXkoKTsNCiAgICAkY2hhcnNldFsxXSA9IHN1YnN0cigkcywgMCwgMSk7DQogICAgJGNoYXJzZXRbMl0gPSBzdWJzdHIoJHMsIDEsIDEpOw0KICAgICRjaGFyc2V0WzNdID0gc3Vic3RyKCRzLCAyLCAxKTsNCiAgICBpZiAob3JkKCRjaGFyc2V0WzFdKSA9PSAyMzkgJiYgb3JkKCRjaGFyc2V0WzJdKSA9PSAxODcgJiYgb3JkKCRjaGFyc2V0WzNdKSA9PSAxOTEpIHsNCiAgICAgICAgJHMgPSBzdWJzdHIoJHMsIDMpOw0KICAgIH0NCg0KICAgIHJldHVybiAkczsNCn0NCg0KLyoqDQogKiDojrflj5bmjIflrprml7bljLrlkI0uDQogKg0KICogQHBhcmFtIGludCAkeiDml7bljLrlj7cNCiAqDQogKiBAcmV0dXJuIHN0cmluZyDml7bljLrlkI0NCiAqDQogKiBAc2luY2UgMS4zLjE0MDYxNA0KICovDQpmdW5jdGlvbiBHZXRUaW1lWm9uZUJ5R01UKCR6KQ0Kew0KICAgICR0aW1lem9uZXMgPSBhcnJheSgNCiAgICAgICAgLTEyID0+ICdFdGMvR01UKzEyJywNCiAgICAgICAgLTExID0+ICdQYWNpZmljL01pZHdheScsDQogICAgICAgIC0xMCA9PiAnUGFjaWZpYy9Ib25vbHVsdScsDQogICAgICAgIC05ICA9PiAnQW1lcmljYS9BbmNob3JhZ2UnLA0KICAgICAgICAtOCAgPT4gJ0FtZXJpY2EvTG9zX0FuZ2VsZXMnLA0KICAgICAgICAtNyAgPT4gJ0FtZXJpY2EvRGVudmVyJywNCiAgICAgICAgLTYgID0+ICdBbWVyaWNhL1RlZ3VjaWdhbHBhJywNCiAgICAgICAgLTUgID0+ICdBbWVyaWNhL05ld19Zb3JrJywNCiAgICAgICAgLTQgID0+ICdBbWVyaWNhL0hhbGlmYXgnLA0KICAgICAgICAtMyAgPT4gJ0FtZXJpY2EvQXJnZW50aW5hL0J1ZW5vc19BaXJlcycsDQogICAgICAgIC0yICA9PiAnQXRsYW50aWMvU291dGhfR2VvcmdpYScsDQogICAgICAgIC0xICA9PiAnQXRsYW50aWMvQXpvcmVzJywNCiAgICAgICAgMCAgID0+ICdVVEMnLA0KICAgICAgICAxICAgPT4gJ0V1cm9wZS9CZXJsaW4nLA0KICAgICAgICAyICAgPT4gJ0V1cm9wZS9Tb2ZpYScsDQogICAgICAgIDMgICA9PiAnQWZyaWNhL05haXJvYmknLA0KICAgICAgICA0ICAgPT4gJ0V1cm9wZS9Nb3Njb3cnLA0KICAgICAgICA1ICAgPT4gJ0FzaWEvS2FyYWNoaScsDQogICAgICAgIDYgICA9PiAnQXNpYS9EaGFrYScsDQogICAgICAgIDcgICA9PiAnQXNpYS9CYW5na29rJywNCiAgICAgICAgOCAgID0+ICdBc2lhL1NoYW5naGFpJywNCiAgICAgICAgOSAgID0+ICdBc2lhL1Rva3lvJywNCiAgICAgICAgMTAgID0+ICdQYWNpZmljL0d1YW0nLA0KICAgICAgICAxMSAgPT4gJ0F1c3RyYWxpYS9TeWRuZXknLA0KICAgICAgICAxMiAgPT4gJ1BhY2lmaWMvRmlqaScsDQogICAgICAgIDEzICA9PiAnUGFjaWZpYy9Ub25nYXRhcHUnLA0KICAgICk7DQogICAgaWYgKCFpc3NldCgkdGltZXpvbmVzWyR6XSkpIHsNCiAgICAgICAgcmV0dXJuICdVVEMnOw0KICAgIH0NCg0KICAgIHJldHVybiAkdGltZXpvbmVzWyR6XTsNCn0NCg0KLyoqDQogKiDlr7nmlbDnu4TlhoXnmoTlrZfnrKbkuLLov5vooYxodG1sc3BlY2lhbGNoYXJzLg0KICoNCiAqIEBwYXJhbSBhcnJheSAkYXJyYXkg5b6F6L+H5ruk5a2X56ym5LiyDQogKg0KICogQHJldHVybiBhcnJheQ0KICoNCiAqIEBzaW5jZSAxLjQNCiAqLw0KZnVuY3Rpb24gaHRtbHNwZWNpYWxjaGFyc19hcnJheSgkYXJyYXkpDQp7DQogICAgJG5ld0FycmF5ID0gYXJyYXkoKTsNCiAgICBmb3JlYWNoICgkYXJyYXkgYXMgJGtleSA9PiAkdmFsdWUpIHsNCiAgICAgICAgJG5ld0tleSA9IGh0bWxzcGVjaWFsY2hhcnMoJGtleSk7DQogICAgICAgIGlmIChpc19hcnJheSgkdmFsdWUpKSB7DQogICAgICAgICAgICAkbmV3QXJyYXlbJG5ld0tleV0gPSBodG1sc3BlY2lhbGNoYXJzX2FycmF5KCR2YWx1ZSk7DQogICAgICAgIH0gZWxzZWlmIChpc19zdHJpbmcoJHZhbHVlKSkgew0KICAgICAgICAgICAgJG5ld0FycmF5WyRuZXdLZXldID0gaHRtbHNwZWNpYWxjaGFycygkdmFsdWUpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcmV0dXJuICRuZXdBcnJheTsNCn0NCg0KLyoqDQogKiDojrflvpfkuIDkuKrlj6rlkKvmlbDlrZflrZfmr43lkowt57q/55qEc3RyaW5nLg0KICoNCiAqIEBwYXJhbSBzdHJpbmcgJHMg5b6F6L+H5ruk5a2X56ym5LiyDQogKg0KICogQHJldHVybiBzdHJpbmd8c3RyaW5nW10NCiAqDQogKiBAc2luY2UgMS40DQogKi8NCmZ1bmN0aW9uIEZpbHRlckNvcnJlY3ROYW1lKCRzKQ0Kew0KICAgIHJldHVybiBwcmVnX3JlcGxhY2UoJ3xbXjAtOWEtekEtWl8vLV18JywgJycsICRzKTsNCn0NCg0KLyoqDQogKiDnoa7orqTkuIDkuKrlr7nosaHmmK/lkKblj6/ooqvovazmjaLkuLpzdHJpbmcuDQogKg0KICogQHBhcmFtIG9iamVjdCAkb2JqDQogKg0KICogQHJldHVybiBib29sDQogKg0KICogQHNpbmNlIDEuNA0KICovDQpmdW5jdGlvbiBDaGVja0NhbkJlU3RyaW5nKCRvYmopDQp7DQogICAgLy8gRnVjayBQSFAgNS4yISEhIQ0KICAgIC8vIHJldHVybiAkb2JqID09PSBudWxsIHx8IGlzX3NjYWxhcigkb2JqKSB8fCBpc19jYWxsYWJsZShbJG9iaiwgJ19fdG9TdHJpbmcnXSk7DQogICAgaWYgKGlzX29iamVjdCgkb2JqKSAmJiBtZXRob2RfZXhpc3RzKCRvYmosICdfX3RvU3RyaW5nJykpIHsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgaWYgKGlzX251bGwoJG9iaikpIHsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgcmV0dXJuIGlzX3NjYWxhcigkb2JqKTsNCn0NCg0KLyoqDQogKiDmnoTpgKDluKZUb2tlbueahOWuieWFqFVSTC4NCiAqDQogKiBAcGFyYW0gc3RyaW5nICR1cmwNCiAqIEBwYXJhbSBzdHJpbmcgJGFwcElkIOW6lOeUqElE77yM5Y+v5Lul55Sf5oiQ5LiA5Liq5bqU55So5LiT5bGe55qEVG9rZW4NCiAqDQogKiBAcmV0dXJuIHN0cmluZw0KICoNCiAqIEBzaW5jZSAxLjUuMg0KICovDQpmdW5jdGlvbiBCdWlsZFNhZmVVUkwoJHVybCwgJGFwcElkID0gJycpDQp7DQogICAgZ2xvYmFsICR6YnA7DQogICAgaWYgKHN0cnBvcygkdXJsLCAnPycpICE9PSBmYWxzZSkgew0KICAgICAgICAkdXJsIC49ICcmY3NyZlRva2VuPSc7DQogICAgfSBlbHNlIHsNCiAgICAgICAgJHVybCAuPSAnP2NzcmZUb2tlbj0nOw0KICAgIH0NCiAgICBpZiAoc3Vic3RyKCR1cmwsIDAsIDEpID09PSAnLycpIHsNCiAgICAgICAgJHVybCA9ICR6YnAtPmhvc3QgLiBzdWJzdHIoJHVybCwgMSk7DQogICAgfQ0KICAgICR1cmwgPSAkdXJsIC4gJHpicC0+R2V0Q1NSRlRva2VuKCRhcHBJZCk7DQoNCiAgICByZXR1cm4gJHVybDsNCn0NCg0KLyoqDQogKiDmnoTpgKBjbWQucGhw55qE6K6/6Zeu6ZO+5o6lLg0KICoNCiAqIEBwYXJhbSBzdHJpbmcgJHBhcmFtdGVycyBjbWQucGhw5Y+C5pWwDQogKg0KICogQHJldHVybiBib29sDQogKg0KICogQHNpbmNlIDEuNS4yDQogKi8NCmZ1bmN0aW9uIEJ1aWxkU2FmZUNtZFVSTCgkcGFyYW10ZXJzKQ0Kew0KICAgIHJldHVybiBCdWlsZFNhZmVVUkwoJy96Yl9zeXN0ZW0vY21kLnBocD8nIC4gJHBhcmFtdGVycyk7DQp9DQoNCmZ1bmN0aW9uIHV0Zjg0bWJfZmlsdGVyKCYkc3FsKQ0Kew0KICAgICRzcWwgPSBwcmVnX3JlcGxhY2VfY2FsbGJhY2soIi9bXHh7MTAwMDB9LVx4ezEwRkZGRn1dL3UiLCAndXRmODRtYl9jb252ZXJ0VG9VQ1M0JywgJHNxbCk7DQp9DQoNCmZ1bmN0aW9uIHV0Zjg0bWJfZml4SHRtbFNwZWNpYWxDaGFycygpDQp7DQogICAgZ2xvYmFsICRhcnRpY2xlOw0KICAgICRhcnRpY2xlLT5Db250ZW50ID0gcHJlZ19yZXBsYWNlX2NhbGxiYWNrKCIvXCZcI3goWzAtOUEtWl17Miw2fSlcOy91IiwgJ3V0Zjg0bWJfY29udmVydFRvVVRGOCcsICRhcnRpY2xlLT5Db250ZW50KTsNCiAgICAkYXJ0aWNsZS0+SW50cm8gPSBwcmVnX3JlcGxhY2VfY2FsbGJhY2soIi9cJlwjeChbMC05QS1aXXsyLDZ9KVw7L3UiLCAndXRmODRtYl9jb252ZXJ0VG9VVEY4JywgJGFydGljbGUtPkludHJvKTsNCn0NCg0KZnVuY3Rpb24gdXRmODRtYl9jb252ZXJ0VG9VQ1M0KCRtYXRjaGVzKQ0Kew0KICAgIHJldHVybiBzcHJpbnRmKCImI3glczsiLCBsdHJpbShzdHJ0b3VwcGVyKGJpbjJoZXgoaWNvbnYoJ1VURi04JywgJ1VDUy00JywgJG1hdGNoZXNbMF0pKSksICIwIikpOw0KfQ0KDQpmdW5jdGlvbiB1dGY4NG1iX2NvbnZlcnRUb1VURjgoJG1hdGNoZXMpDQp7DQogICAgcmV0dXJuIGljb252KCdVQ1MtNCcsICdVVEYtOCcsIGhleDJiaW4oc3RyX3BhZCgkbWF0Y2hlc1sxXSwgOCwgIjAiLCBTVFJfUEFEX0xFRlQpKSk7DQp9DQoNCi8qKg0KICog6aqM6K+BV2ViIFRva2Vu5piv5ZCm5ZCI5rOVLg0KICoNCiAqIEBwYXJhbSAkd2ViVG9rZW5TdHJpbmcNCiAqIEBwYXJhbSAkd2ViVG9rZW5JZA0KICogQHBhcmFtIHN0cmluZyAka2V5DQogKg0KICogQHJldHVybiBib29sDQogKi8NCmZ1bmN0aW9uIFZlcmlmeVdlYlRva2VuKCR3ZWJUb2tlblN0cmluZywgJHdlYlRva2VuSWQsICRrZXkgPSAnJykNCnsNCiAgICBnbG9iYWwgJHpicDsNCiAgICAkdGltZSA9IHN1YnN0cigkd2ViVG9rZW5TdHJpbmcsIDY0KTsNCiAgICAkd3QgPSBzdWJzdHIoJHdlYlRva2VuU3RyaW5nLCAwLCA2NCk7DQogICAgJGFyZ3MgPSBhcnJheSgpOw0KICAgIGZvciAoJGkgPSAzOyAkaSA8IGZ1bmNfbnVtX2FyZ3MoKTsgJGkrKykgew0KICAgICAgICAkYXJnc1tdID0gZnVuY19nZXRfYXJnKCRpKTsNCiAgICB9DQogICAgaWYgKCRrZXkgPT0gJycpIHsNCiAgICAgICAgJGtleSA9ICR6YnAtPmd1aWQ7DQogICAgfQ0KICAgICRzaGEgPSBoYXNoX2htYWMoJ3NoYTI1NicsICR0aW1lIC4gJHdlYlRva2VuSWQgLiBpbXBsb2RlKCRhcmdzKSwgJGtleSk7DQogICAgaWYgKCR3dCA9PT0gJHNoYSkgew0KICAgICAgICBpZiAoJHRpbWUgPiB0aW1lKCkpIHsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcmV0dXJuIGZhbHNlOw0KfQ0KDQovKioNCiAqIOWIm+W7uldlYiBUb2tlbi4NCiAqDQogKiBAcGFyYW0gJHdlYlRva2VuSWQNCiAqIEBwYXJhbSAkdGltZQ0KICogQHBhcmFtIHN0cmluZyAka2V5DQogKg0KICogQHJldHVybiBzdHJpbmcNCiAqLw0KZnVuY3Rpb24gQ3JlYXRlV2ViVG9rZW4oJHdlYlRva2VuSWQsICR0aW1lLCAka2V5ID0gJycpDQp7DQogICAgZ2xvYmFsICR6YnA7DQogICAgJHRpbWUgPSAoaW50KSAkdGltZTsNCiAgICAkYXJncyA9IGFycmF5KCk7DQogICAgZm9yICgkaSA9IDM7ICRpIDwgZnVuY19udW1fYXJncygpOyAkaSsrKSB7DQogICAgICAgICRhcmdzW10gPSBmdW5jX2dldF9hcmcoJGkpOw0KICAgIH0NCiAgICBpZiAoJGtleSA9PSAnJykgew0KICAgICAgICAka2V5ID0gJHpicC0+Z3VpZDsNCiAgICB9DQoNCiAgICByZXR1cm4gaGFzaF9obWFjKCdzaGEyNTYnLCAkdGltZSAuICR3ZWJUb2tlbklkIC4gaW1wbG9kZSgkYXJncyksICRrZXkpIC4gJHRpbWU7DQp9DQoNCi8qKg0KICog5qOA5rWL5p2l5rqQ5piv5ZCm5ZCI5rOV77yM6L+Z5YyF5ousQ1NSRuajgOa1i++8jOWcqOW8gOWQr+WinuW8uuWuieWFqOaooeW8j+aXtuWKoOWFpeadpea6kOajgOa1iy4NCiAqDQogKiBAdGhyb3dzIEV4Y2VwdGlvbg0KICovDQpmdW5jdGlvbiBDaGVja0lzUmVmZXJlclZhbGlkKCkNCnsNCiAgICBnbG9iYWwgJHpicDsNCiAgICAkZmxhZyA9IENoZWNrQ1NSRlRva2VuVmFsaWQoKTsNCiAgICBpZiAoJGZsYWcgJiYgJHpicC0+b3B0aW9uWydaQ19BRERJVElPTkFMX1NFQ1VSSVRZJ10pIHsNCiAgICAgICAgJGZsYWcgPSBDaGVja0hUVFBSZWZlcmVyVmFsaWQoKTsNCiAgICB9DQoNCiAgICBpZiAoISRmbGFnKSB7DQogICAgICAgICR6YnAtPlNob3dFcnJvcig1LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgICAgICBleGl0Ow0KICAgIH0NCn0NCg0KLyoqDQogKiDpqozor4FDU1JGIFRva2Vu5piv5ZCm5ZCI5rOVLg0KICoNCiAqIEBwYXJhbSBzdHJpbmcgJGZpZWxkTmFtZQ0KICogQHBhcmFtIGFycmF5ICAkbWV0aG9kcw0KICoNCiAqIEByZXR1cm4gYm9vbA0KICovDQpmdW5jdGlvbiBDaGVja0NTUkZUb2tlblZhbGlkKCRmaWVsZE5hbWUgPSAnY3NyZlRva2VuJywgJG1ldGhvZHMgPSBhcnJheSgnZ2V0JywgJ3Bvc3QnKSkNCnsNCiAgICBnbG9iYWwgJHpicDsNCiAgICAkZmxhZyA9IGZhbHNlOw0KICAgIGlmIChpc19zdHJpbmcoJG1ldGhvZHMpKSB7DQogICAgICAgICRtZXRob2RzID0gYXJyYXkoJG1ldGhvZHMpOw0KICAgIH0NCiAgICBmb3JlYWNoICgkbWV0aG9kcyBhcyAkbWV0aG9kKSB7DQogICAgICAgIGlmICgkemJwLT5WZXJpZnlDU1JGVG9rZW4oR2V0VmFycygkZmllbGROYW1lLCAkbWV0aG9kKSkpIHsNCiAgICAgICAgICAgICRmbGFnID0gdHJ1ZTsNCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcmV0dXJuICRmbGFnOw0KfQ0KDQovKioNCiAqIOajgOa1i0hUVFAgUmVmZXJlcuaYr+WQpuWQiOazlS4NCiAqDQogKiBAcmV0dXJuIGJvb2wNCiAqLw0KZnVuY3Rpb24gQ2hlY2tIVFRQUmVmZXJlclZhbGlkKCkNCnsNCiAgICBnbG9iYWwgJGJsb2dob3N0Ow0KICAgICRyZWZlcmVyID0gR2V0VmFycygnSFRUUF9SRUZFUkVSJywgJ1NFUlZFUicpOw0KICAgIGlmICh0cmltKCRyZWZlcmVyKSA9PT0gJycpIHsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KICAgICRzID0gJGJsb2dob3N0Ow0KICAgICRzID0gc3RyX3JlcGxhY2UoJzo4MC8nLCAnLycsICRzKTsNCiAgICAkcyA9IHN0cl9yZXBsYWNlKCc6NDQzLycsICcvJywgJHMpOw0KICAgIGlmIChzdHJpcG9zKCRyZWZlcmVyLCAkcykgPT09IGZhbHNlKSB7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQoNCiAgICByZXR1cm4gdHJ1ZTsNCn0NCg0KLyoqDQogKiDmuIXpmaTkuIDkuLLku6PnoIHlhoXmiYDmnInnmoRQSFDku6PnoIENCiAqDQogKiBAcGFyYW0gc3RyaW5nICRjb2RlDQogKg0KICogQHJldHVybiBzdHJpbmcNCiAqLw0KZnVuY3Rpb24gUmVtb3ZlUEhQQ29kZSgkY29kZSkNCnsNCiAgICAvLyBQSFAgU3RhcnQgdGFnczogPD9waHAgPD8gPD89DQogICAgLy8gUEhQIDUgc3VwcG9ydHM6IDwlIDxzY3JpcHQgbGFuZ3VhZ2U9InBocCI+DQogICAgLy8gRGVwZW5kcyBvbiBQSFANCiAgICAkY29udGludWUgPSB0cnVlOw0KICAgIHdoaWxlICgkY29udGludWUpIHsNCiAgICAgICAgJHRva2VucyA9IHRva2VuX2dldF9hbGwoJGNvZGUpOw0KICAgICAgICAkY29udGludWUgPSBmYWxzZTsNCiAgICAgICAgZm9yZWFjaCAoJHRva2VucyBhcyAkdHQpIHsNCiAgICAgICAgICAgICRuYW1lID0gaXNfbnVtZXJpYygkdHRbMF0pID8gdG9rZW5fbmFtZSgkdHRbMF0pIDogJyc7DQogICAgICAgICAgICBpZiAoJG5hbWUgPT09ICdUX09QRU5fVEFHJyB8fCAkbmFtZSA9PT0gJ1RfT1BFTl9UQUdfV0lUSF9FQ0hPJyB8fCAkbmFtZSA9PT0gJ1RfQ0xPU0VfVEFHJykgew0KICAgICAgICAgICAgICAgICRjb2RlID0gc3RyX3JlcGxhY2UoJHR0WzFdLCAiIiwgJGNvZGUpOw0KICAgICAgICAgICAgICAgICRjb250aW51ZSA9IHRydWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICByZXR1cm4gJGNvZGU7DQp9DQoNCmZ1bmN0aW9uIEdldElEQXJyYXlCeUxpc3QoJGFycmF5LCAka2V5bmFtZSA9IG51bGwpDQp7DQogICAgJGlkcyA9IGFycmF5KCk7DQogICAgZm9yZWFjaCAoJGFycmF5IGFzICRrZXkgPT4gJHZhbHVlKSB7DQogICAgICAgIGlmICgka2V5bmFtZSA9PSBudWxsKSB7DQogICAgICAgICAgICAkaWRzW10gPSByZXNldCgkdmFsdWUtPkdldERhdGEoKSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAkYSA9ICR2YWx1ZS0+R2V0RGF0YSgpOw0KICAgICAgICAgICAgJGlkc1tdID0gJGFbJGtleW5hbWVdOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcmV0dXJuICRpZHM7DQp9DQoNCmZ1bmN0aW9uIEdldEJhY2tlbmRDU1BIZWFkZXIoKQ0Kew0KICAgICRkZWZhdWx0Q1NQID0gYXJyYXkoDQogICAgICAgICdkZWZhdWx0LXNyYycgPT4gIidzZWxmJyBkYXRhOiBibG9iOiIsDQogICAgICAgICdpbWctc3JjJyAgICAgPT4gIiogZGF0YTogYmxvYjoiLA0KICAgICAgICAnbWVkaWEtc3JjJyAgID0+ICIqIGRhdGE6IGJsb2I6IiwNCiAgICAgICAgJ3NjcmlwdC1zcmMnICA9PiAiJ3NlbGYnICd1bnNhZmUtaW5saW5lJyAndW5zYWZlLWV2YWwnIiwNCiAgICAgICAgJ3N0eWxlLXNyYycgICA9PiAiJ3NlbGYnICd1bnNhZmUtaW5saW5lJyIsDQogICAgKTsNCiAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9DU1BfQmFja2VuZCddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAkZnByZXR1cm4gPSAkZnBuYW1lKCRkZWZhdWx0Q1NQKTsNCiAgICB9DQogICAgJHJldCA9IGFycmF5KCk7DQogICAgZm9yZWFjaCAoJGRlZmF1bHRDU1AgYXMgJGtleSA9PiAkdmFsdWUpIHsNCiAgICAgICAgJHJldFtdID0gJGtleSAuICcgJyAuICR2YWx1ZTsNCiAgICB9DQoNCiAgICByZXR1cm4gaW1wbG9kZSgnOyAnLCAkcmV0KTsNCn0NCg0KLyoqDQogKiDmo4Dmn6Xph43lpI3liqDovb3nmoQuDQogKi8NCmZ1bmN0aW9uIENoZWNrSW5jbHVkZWRGaWxlcygkZmlsZSkNCnsNCiAgICAkYSA9IGdldF9pbmNsdWRlZF9maWxlcygpOw0KICAgICRmaWxlID0gc3RyX3JlcGxhY2UoJ1xcJywgJy8nLCAkZmlsZSk7DQogICAgZm9yZWFjaCAoJGEgYXMgJGtleSA9PiAkdmFsdWUpIHsNCiAgICAgICAgJGFbJGtleV0gPSB0cmltKHN0cl9yZXBsYWNlKCdcXCcsICcvJywgJHZhbHVlKSk7DQogICAgfQ0KDQogICAgcmV0dXJuIGluX2FycmF5KHRyaW0oJGZpbGUpLCAkYSk7DQp9DQo=</file>
	<file name='zb_system\function\c_system_version.php' crc32='2BE1BDE1'  dt:dt='bin.base64'>PD9waHANCg0KaWYgKCFkZWZpbmVkKCdaQlBfUEFUSCcpKSB7DQogICAgZXhpdCgnQWNjZXNzIGRlbmllZCcpOw0KfQ0KLyoNCiAqIOWumuS5ieeJiOacrOWPtw0KDQrov5nmmK8xLjXlj5bmtojnmoTmlbDnu4TvvIzooqvlronmjpLliLDlupTnlKjkuK3lv4PlrqLmiLfnq6/nmoRpbmNsdWRlLnBocOaWh+S7tumHjOOAgg0KI+WumuS5ieeJiOacrOWPt+WIlw0KJHpicHZlcnM9YXJyYXkoKTsNCiR6YnB2ZXJzWycxMzA3MDcnXT0nMS4wIEJldGEgQnVpbGQgMTMwNzA3JzsNCiR6YnB2ZXJzWycxMzExMTEnXT0nMS4wIEJldGEyIEJ1aWxkIDEzMTExMSc7DQokemJwdmVyc1snMTMxMjIxJ109JzEuMSBUYWljaGkgQnVpbGQgMTMxMjIxJzsNCiR6YnB2ZXJzWycxNDAyMjAnXT0nMS4yIEhpcHBvIEJ1aWxkIDE0MDIyMCc7DQokemJwdmVyc1snMTQwNjE0J109JzEuMyBXb25jZSBCdWlsZCAxNDA2MTQnOw0KJHpicHZlcnNbJzE1MDEwMSddPScxLjQgRGVlcGx1ZSBCdWlsZCAxNTAxMDEnOw0KJHpicHZlcnNbJzE1MTYyNiddPScxLjUgWmVybyBCdWlsZCAxNTE2MjYnOw0KDQogKi8NCmRlZmluZSgnWkNfVkVSU0lPTl9NQUpPUicsICcxJyk7DQpkZWZpbmUoJ1pDX1ZFUlNJT05fTUlOT1InLCAnNicpOw0KZGVmaW5lKCdaQ19WRVJTSU9OX0JVSUxEJywgJzQnKTsNCmRlZmluZSgnWkNfVkVSU0lPTl9DT01NSVQnLCAnMjEzNScpOw0KZGVmaW5lKCdaQ19WRVJTSU9OX0NPREVOQU1FJywgJ1ZhbHlyaWEnKTsNCmRlZmluZSgnWkNfVkVSU0lPTicsIFpDX1ZFUlNJT05fTUFKT1IgLiAnLicgLiBaQ19WRVJTSU9OX01JTk9SIC4gJy4nIC4gWkNfVkVSU0lPTl9CVUlMRCAuICcuJyAuIFpDX1ZFUlNJT05fQ09NTUlUKTsNCmRlZmluZSgnWkNfVkVSU0lPTl9ESVNQTEFZJywgWkNfVkVSU0lPTl9NQUpPUiAuICcuJyAuIFpDX1ZFUlNJT05fTUlOT1IgLiAnLicgLiBaQ19WRVJTSU9OX0JVSUxEIC4gJyAnIC4gWkNfVkVSU0lPTl9DT0RFTkFNRSk7DQpkZWZpbmUoJ1pDX1ZFUlNJT05fRlVMTCcsIFpDX1ZFUlNJT04gLiAnICgnIC4gWkNfVkVSU0lPTl9DT0RFTkFNRSAuICcpJyk7DQpkZWZpbmUoJ1pDX0JMT0dfQ09NTUlUJywgWkNfVkVSU0lPTl9DT01NSVQpOyAvLyDkuLrlhpnlhaXns7vnu5/phY3nva7nu5/kuIDpo47moLwNCiRHTE9CQUxTWydibG9ndmVyc2lvbiddID0gWkNfVkVSU0lPTl9NQUpPUiAuIFpDX1ZFUlNJT05fTUlOT1IgLiBaQ19WRVJTSU9OX0NPTU1JVDsNCmRlZmluZSgnWkNfQkxPR19WRVJTSU9OJywgWkNfVkVSU0lPTl9ESVNQTEFZIC4gJyBCdWlsZCAnIC4gJEdMT0JBTFNbJ2Jsb2d2ZXJzaW9uJ10pOw0K</file>
	<file name='zb_system\function\c_system_event.php' crc32='E772CCFA'  dt:dt='bin.base64'>PD9waHANCg0KaWYgKCFkZWZpbmVkKCdaQlBfUEFUSCcpKSB7DQogICAgZXhpdCgnQWNjZXNzIGRlbmllZCcpOw0KfQ0KLyoqIA0KICog5LqL5Lu255u45YWz5Ye95pWwLg0KICoNCiAqIEBjb3B5cmlnaHQgKEMpIFJhaW5ib3dTb2Z0IFN0dWRpbw0KICovDQoNCi8vIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQovKioNCiAqIOmqjOivgeeZu+W9lS4NCiAqDQogKiBAcGFyYW0gYm9vbCAkdGhyb3dFeGNlcHRpb24NCiAqDQogKiBAdGhyb3dzIEV4Y2VwdGlvbg0KICoNCiAqIEByZXR1cm4gYm9vbA0KICovDQpmdW5jdGlvbiBWZXJpZnlMb2dpbigkdGhyb3dFeGNlcHRpb24gPSB0cnVlKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KICAgIC8qKiBAdmFyIE1lbWJlciAkbSAqLw0KICAgICRtID0gbnVsbDsNCiAgICBpZiAoJHpicC0+VmVyaWZ5X01ENSh0cmltKEdldFZhcnMoJ3VzZXJuYW1lJywgJ1BPU1QnKSksIHRyaW0oR2V0VmFycygncGFzc3dvcmQnLCAnUE9TVCcpKSwgJG0pKSB7DQoNCiAgICAgICAgJHpicC0+dXNlciA9ICRtOw0KICAgICAgICAkc2QgPSAoZmxvYXQpIEdldFZhcnMoJ3NhdmVkYXRlJyk7DQogICAgICAgICRzZCA9ICgkc2QgPCAxKSA/IDEgOiAkc2Q7IC8vIG11c3QgPj0gMSBkYXkNCiAgICAgICAgJHNkdCA9IHRpbWUoKSArIDM2MDAgKiAyNCAqICRzZDsNCiAgICAgICAgU2V0TG9naW5Db29raWUoJG0sIChpbnQpICRzZHQpOw0KDQogICAgICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1ZlcmlmeUxvZ2luX1N1Y2NlZWQnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgICAgICRmcG5hbWUoKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0gZWxzZWlmICgkdGhyb3dFeGNlcHRpb24pIHsNCiAgICAgICAgJHpicC0+U2hvd0Vycm9yKDgsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgfSBlbHNlIHsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCn0NCg0KLyoqDQogKiDorr7nva7nmbvlvZVDb29raWXvvIznm7TmjqXnmbvlvZXor6XnlKjmiLcuDQogKg0KICogQHBhcmFtIE1lbWJlciAkdXNlcg0KICogQHBhcmFtIGludCAgICAkY29va2llVGltZQ0KICoNCiAqIEByZXR1cm4gYm9vbA0KICovDQpmdW5jdGlvbiBTZXRMb2dpbkNvb2tpZSgkdXNlciwgJGNvb2tpZVRpbWUpDQp7DQogICAgZ2xvYmFsICR6YnA7DQogICAgJGFkZGluZm8gPSBhcnJheSgpOw0KICAgICRhZGRpbmZvWydjaGthZG1pbiddID0gKGludCkgJHpicC0+Q2hlY2tSaWdodHMoJ2FkbWluJyk7DQogICAgJGFkZGluZm9bJ2Noa2FydGljbGUnXSA9IChpbnQpICR6YnAtPkNoZWNrUmlnaHRzKCdBcnRpY2xlRWR0Jyk7DQogICAgJGFkZGluZm9bJ2xldmVsbmFtZSddID0gJHVzZXItPkxldmVsTmFtZTsNCiAgICAkYWRkaW5mb1sndXNlcmlkJ10gPSAkdXNlci0+SUQ7DQogICAgJGFkZGluZm9bJ3VzZXJhbGlhcyddID0gJHVzZXItPlN0YXRpY05hbWU7DQogICAgJHRva2VuID0gJHpicC0+R2VuZXJhdGVVc2VyVG9rZW4oJHVzZXIsICRjb29raWVUaW1lKTsNCiAgICAkc2VjdXJlID0gSFRUUF9TQ0hFTUUgPT0gJ2h0dHBzOi8vJzsNCiAgICBzZXRjb29raWUoInVzZXJuYW1lIiwgJHVzZXItPk5hbWUsICRjb29raWVUaW1lLCAkemJwLT5jb29raWVzcGF0aCwgJycsICRzZWN1cmUsIGZhbHNlKTsNCiAgICBzZXRjb29raWUoInRva2VuIiwgJHRva2VuLCAkY29va2llVGltZSwgJHpicC0+Y29va2llc3BhdGgsICcnLCAkc2VjdXJlLCB0cnVlKTsNCiAgICBzZXRjb29raWUoImFkZGluZm8iIC4gc3RyX3JlcGxhY2UoJy8nLCAnJywgJHpicC0+Y29va2llc3BhdGgpLCBqc29uX2VuY29kZSgkYWRkaW5mbyksICRjb29raWVUaW1lLCAkemJwLT5jb29raWVzcGF0aCwgJycsICRzZWN1cmUsIGZhbHNlKTsNCg0KICAgIHJldHVybiB0cnVlOw0KfQ0KDQovKioNCiAqIOazqOmUgOeZu+W9lS4NCiAqLw0KZnVuY3Rpb24gTG9nb3V0KCkNCnsNCiAgICBnbG9iYWwgJHpicDsNCg0KICAgIHNldGNvb2tpZSgndXNlcm5hbWUnLCAnJywgdGltZSgpIC0gMzYwMCwgJHpicC0+Y29va2llc3BhdGgpOw0KICAgIHNldGNvb2tpZSgncGFzc3dvcmQnLCAnJywgdGltZSgpIC0gMzYwMCwgJHpicC0+Y29va2llc3BhdGgpOw0KICAgIHNldGNvb2tpZSgndG9rZW4nLCAnJywgdGltZSgpIC0gMzYwMCwgJHpicC0+Y29va2llc3BhdGgpOw0KICAgIHNldGNvb2tpZSgiYWRkaW5mbyIgLiBzdHJfcmVwbGFjZSgnLycsICcnLCAkemJwLT5jb29raWVzcGF0aCksICcnLCB0aW1lKCkgLSAzNjAwLCAkemJwLT5jb29raWVzcGF0aCk7DQoNCiAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9Mb2dvdXRfU3VjY2VlZCddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAkZnBuYW1lKCk7DQogICAgfQ0KfQ0KDQovLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KLyoqDQogKiDojrflj5bmlofnq6AuDQogKg0KICogQHBhcmFtIG1peGVkICRpZG9ybmFtZSAgICDmlofnq6BpZCDmiJYg5ZCN56ew44CB5Yir5ZCNDQogKiBAcGFyYW0gYXJyYXkgJG9wdGlvbnxudWxsDQogKg0KICogQHJldHVybiBQb3N0DQogKi8NCmZ1bmN0aW9uIEdldFBvc3QoJGlkb3JuYW1lLCAkb3B0aW9uID0gbnVsbCkNCnsNCiAgICBnbG9iYWwgJHpicDsNCiAgICAkcG9zdCA9IG51bGw7DQoNCiAgICBpZiAoIWlzX2FycmF5KCRvcHRpb24pKSB7DQogICAgICAgICRvcHRpb24gPSBhcnJheSgpOw0KICAgIH0NCg0KICAgIGlmICghaXNzZXQoJG9wdGlvblsnb25seV9hcnRpY2xlJ10pKSB7DQogICAgICAgICRvcHRpb25bJ29ubHlfYXJ0aWNsZSddID0gZmFsc2U7DQogICAgfQ0KDQogICAgaWYgKCFpc3NldCgkb3B0aW9uWydvbmx5X3BhZ2UnXSkpIHsNCiAgICAgICAgJG9wdGlvblsnb25seV9wYWdlJ10gPSBmYWxzZTsNCiAgICB9DQoNCiAgICBpZiAoaXNfc3RyaW5nKCRpZG9ybmFtZSkpIHsNCiAgICAgICAgJHdbXSA9IGFycmF5KCdhcnJheScsIGFycmF5KGFycmF5KCdsb2dfQWxpYXMnLCAkaWRvcm5hbWUpLCBhcnJheSgnbG9nX1RpdGxlJywgJGlkb3JuYW1lKSkpOw0KICAgICAgICBpZiAoJG9wdGlvblsnb25seV9hcnRpY2xlJ10gPT0gdHJ1ZSkgew0KICAgICAgICAgICAgJHdbXSA9IGFycmF5KCc9JywgJ2xvZ19UeXBlJywgJzAnKTsNCiAgICAgICAgfSBlbHNlaWYgKCRvcHRpb25bJ29ubHlfcGFnZSddID09IHRydWUpIHsNCiAgICAgICAgICAgICR3W10gPSBhcnJheSgnPScsICdsb2dfVHlwZScsICcxJyk7DQogICAgICAgIH0NCiAgICAgICAgJGFydGljbGVzID0gJHpicC0+R2V0UG9zdExpc3QoJyonLCAkdywgbnVsbCwgMSwgbnVsbCk7DQogICAgICAgIGlmIChjb3VudCgkYXJ0aWNsZXMpID09IDApIHsNCiAgICAgICAgICAgICRwb3N0ID0gbmV3IFBvc3QoKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICRwb3N0ID0gJGFydGljbGVzWzBdOw0KICAgICAgICB9DQogICAgfSBlbHNlaWYgKGlzX2ludCgkaWRvcm5hbWUpKSB7DQogICAgICAgICRwb3N0ID0gJHpicC0+R2V0UG9zdEJ5SUQoJGlkb3JuYW1lKTsNCiAgICB9DQoNCiAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9HZXRQb3N0X1Jlc3VsdCddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAkZnByZXR1cm4gPSAkZnBuYW1lKCRwb3N0KTsNCiAgICB9DQoNCiAgICByZXR1cm4gJHBvc3Q7DQp9DQoNCi8qKg0KICog6I635Y+W5paH56ug5YiX6KGoLg0KICoNCiAqIEBwYXJhbSBpbnQgICRjb3VudCAg5pWw6YePDQogKiBAcGFyYW0gbnVsbCAkY2F0ZSAgIOWIhuexu0lEDQogKiBAcGFyYW0gbnVsbCAkYXV0aCAgIOeUqOaIt0lEDQogKiBAcGFyYW0gbnVsbCAkZGF0ZSAgIOaXpeacnw0KICogQHBhcmFtIG51bGwgJHRhZ3MgICDmoIfnrb4NCiAqIEBwYXJhbSBudWxsICRzZWFyY2gg5pCc57Si5YWz6ZSu6K+NDQogKiBAcGFyYW0gbnVsbCAkb3B0aW9uDQogKg0KICogQHJldHVybiBhcnJheXxtaXhlZA0KICovDQpmdW5jdGlvbiBHZXRMaXN0KCRjb3VudCA9IDEwLCAkY2F0ZSA9IG51bGwsICRhdXRoID0gbnVsbCwgJGRhdGUgPSBudWxsLCAkdGFncyA9IG51bGwsICRzZWFyY2ggPSBudWxsLCAkb3B0aW9uID0gbnVsbCkNCnsNCiAgICBnbG9iYWwgJHpicDsNCiAgICAkbGlzdCA9IGFycmF5KCk7DQoNCiAgICBpZiAoIWlzX2FycmF5KCRvcHRpb24pKSB7DQogICAgICAgICRvcHRpb24gPSBhcnJheSgpOw0KICAgIH0NCg0KICAgIGlmICghaXNzZXQoJG9wdGlvblsnb25seV9vbnRvcCddKSkgew0KICAgICAgICAkb3B0aW9uWydvbmx5X29udG9wJ10gPSBmYWxzZTsNCiAgICB9DQoNCiAgICBpZiAoIWlzc2V0KCRvcHRpb25bJ29ubHlfbm90X29udG9wJ10pKSB7DQogICAgICAgICRvcHRpb25bJ29ubHlfbm90X29udG9wJ10gPSBmYWxzZTsNCiAgICB9DQoNCiAgICBpZiAoIWlzc2V0KCRvcHRpb25bJ2hhc19zdWJjYXRlJ10pKSB7DQogICAgICAgICRvcHRpb25bJ2hhc19zdWJjYXRlJ10gPSBmYWxzZTsNCiAgICB9DQoNCiAgICBpZiAoIWlzc2V0KCRvcHRpb25bJ2lzX3JlbGF0ZWQnXSkpIHsNCiAgICAgICAgJG9wdGlvblsnaXNfcmVsYXRlZCddID0gZmFsc2U7DQogICAgfQ0KDQogICAgaWYgKCRvcHRpb25bJ2lzX3JlbGF0ZWQnXSkgew0KICAgICAgICAkYXQgPSAkemJwLT5HZXRQb3N0QnlJRCgkb3B0aW9uWydpc19yZWxhdGVkJ10pOw0KICAgICAgICAkdGFncyA9ICRhdC0+VGFnczsNCiAgICAgICAgaWYgKCEkdGFncykgew0KICAgICAgICAgICAgcmV0dXJuIGFycmF5KCk7DQogICAgICAgIH0NCg0KICAgICAgICAkY291bnQgPSAkY291bnQgKyAxOw0KICAgIH0NCg0KICAgICR3ID0gYXJyYXkoKTsNCg0KICAgIGlmICgkb3B0aW9uWydvbmx5X29udG9wJ10gPT0gdHJ1ZSkgew0KICAgICAgICAkd1tdID0gYXJyYXkoJz4nLCAnbG9nX0lzVG9wJywgMCk7DQogICAgfSBlbHNlaWYgKCRvcHRpb25bJ29ubHlfbm90X29udG9wJ10gPT0gdHJ1ZSkgew0KICAgICAgICAkd1tdID0gYXJyYXkoJz0nLCAnbG9nX0lzVG9wJywgMCk7DQogICAgfQ0KDQogICAgJHdbXSA9IGFycmF5KCc9JywgJ2xvZ19TdGF0dXMnLCAwKTsNCg0KICAgIGlmICghaXNfbnVsbCgkY2F0ZSkpIHsNCiAgICAgICAgJGNhdGVnb3J5ID0gbmV3IENhdGVnb3J5KCk7DQogICAgICAgICRjYXRlZ29yeSA9ICR6YnAtPkdldENhdGVnb3J5QnlJRCgkY2F0ZSk7DQoNCiAgICAgICAgaWYgKCRjYXRlZ29yeS0+SUQgPiAwKSB7DQogICAgICAgICAgICBpZiAoISRvcHRpb25bJ2hhc19zdWJjYXRlJ10pIHsNCiAgICAgICAgICAgICAgICAkd1tdID0gYXJyYXkoJz0nLCAnbG9nX0NhdGVJRCcsICRjYXRlZ29yeS0+SUQpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAkYXJ5c3ViY2F0ZSA9IGFycmF5KCk7DQogICAgICAgICAgICAgICAgJGFyeXN1YmNhdGVbXSA9IGFycmF5KCdsb2dfQ2F0ZUlEJywgJGNhdGVnb3J5LT5JRCk7DQogICAgICAgICAgICAgICAgaWYgKGlzc2V0KCR6YnAtPmNhdGVnb3JpZXNbJGNhdGVnb3J5LT5JRF0pKSB7DQogICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKCR6YnAtPmNhdGVnb3JpZXNbJGNhdGVnb3J5LT5JRF0tPkNoaWxkcmVuQ2F0ZWdvcmllcyBhcyAkc3ViY2F0ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgJGFyeXN1YmNhdGVbXSA9IGFycmF5KCdsb2dfQ2F0ZUlEJywgJHN1YmNhdGUtPklEKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAkd1tdID0gYXJyYXkoJ2FycmF5JywgJGFyeXN1YmNhdGUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgcmV0dXJuIGFycmF5KCk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBpZiAoIWlzX251bGwoJGF1dGgpKSB7DQogICAgICAgICRhdXRob3IgPSBuZXcgTWVtYmVyKCk7DQogICAgICAgICRhdXRob3IgPSAkemJwLT5HZXRNZW1iZXJCeUlEKCRhdXRoKTsNCg0KICAgICAgICBpZiAoJGF1dGhvci0+SUQgPiAwKSB7DQogICAgICAgICAgICAkd1tdID0gYXJyYXkoJz0nLCAnbG9nX0F1dGhvcklEJywgJGF1dGhvci0+SUQpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgcmV0dXJuIGFycmF5KCk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBpZiAoIWlzX251bGwoJGRhdGUpKSB7DQogICAgICAgICRkYXRldGltZSA9IHN0cnRvdGltZSgkZGF0ZSk7DQogICAgICAgIGlmICgkZGF0ZXRpbWUpIHsNCiAgICAgICAgICAgICRkYXRldGl0bGUgPSBzdHJfcmVwbGFjZShhcnJheSgnJXklJywgJyVtJScpLCBhcnJheShkYXRlKCdZJywgJGRhdGV0aW1lKSwgZGF0ZSgnbicsICRkYXRldGltZSkpLCAkemJwLT5sYW5nWydtc2cnXVsneWVhcl9tb250aCddKTsNCiAgICAgICAgICAgICR3W10gPSBhcnJheSgnQkVUV0VFTicsICdsb2dfUG9zdFRpbWUnLCAkZGF0ZXRpbWUsIHN0cnRvdGltZSgnKzEgbW9udGgnLCAkZGF0ZXRpbWUpKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHJldHVybiBhcnJheSgpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgaWYgKCFpc19udWxsKCR0YWdzKSkgew0KICAgICAgICAkdGFnID0gbmV3IFRhZygpOw0KICAgICAgICBpZiAoaXNfYXJyYXkoJHRhZ3MpKSB7DQogICAgICAgICAgICAkdGEgPSBhcnJheSgpOw0KICAgICAgICAgICAgZm9yZWFjaCAoJHRhZ3MgYXMgJHQpIHsNCiAgICAgICAgICAgICAgICAkdGFbXSA9IGFycmF5KCdsb2dfVGFnJywgJyV7JyAuICR0LT5JRCAuICd9JScpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgJHdbXSA9IGFycmF5KCdhcnJheV9saWtlJywgJHRhKTsNCiAgICAgICAgICAgIHVuc2V0KCR0YSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBpZiAoaXNfaW50KCR0YWdzKSkgew0KICAgICAgICAgICAgICAgICR0YWcgPSAkemJwLT5HZXRUYWdCeUlEKCR0YWdzKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgJHRhZyA9ICR6YnAtPkdldFRhZ0J5QWxpYXNPck5hbWUoJHRhZ3MpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCR0YWctPklEID4gMCkgew0KICAgICAgICAgICAgICAgICR3W10gPSBhcnJheSgnTElLRScsICdsb2dfVGFnJywgJyV7JyAuICR0YWctPklEIC4gJ30lJyk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHJldHVybiBhcnJheSgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KDQogICAgaWYgKGlzX3N0cmluZygkc2VhcmNoKSkgew0KICAgICAgICAkc2VhcmNoID0gdHJpbSgkc2VhcmNoKTsNCiAgICAgICAgaWYgKCRzZWFyY2ggIT09ICcnKSB7DQogICAgICAgICAgICAkd1tdID0gYXJyYXkoJ3NlYXJjaCcsICdsb2dfQ29udGVudCcsICdsb2dfSW50cm8nLCAnbG9nX1RpdGxlJywgJHNlYXJjaCk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICByZXR1cm4gYXJyYXkoKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgICRzZWxlY3QgPSAnKic7DQogICAgJG9yZGVyID0gYXJyYXkoJ2xvZ19Qb3N0VGltZScgPT4gJ0RFU0MnKTsNCg0KICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX0xhcmdlRGF0YV9HZXRMaXN0J10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICRmcHJldHVybiA9ICRmcG5hbWUoJHNlbGVjdCwgJHcsICRvcmRlciwgJGNvdW50LCAkb3B0aW9uKTsNCiAgICB9DQoNCiAgICAkbGlzdCA9ICR6YnAtPkdldEFydGljbGVMaXN0KCRzZWxlY3QsICR3LCAkb3JkZXIsICRjb3VudCwgbnVsbCwgZmFsc2UpOw0KDQogICAgaWYgKCRvcHRpb25bJ2lzX3JlbGF0ZWQnXSkgew0KICAgICAgICBmb3JlYWNoICgkbGlzdCBhcyAkayA9PiAkYSkgew0KICAgICAgICAgICAgaWYgKCRhLT5JRCA9PSAkb3B0aW9uWydpc19yZWxhdGVkJ10pIHsNCiAgICAgICAgICAgICAgICB1bnNldCgkbGlzdFska10pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGlmIChjb3VudCgkbGlzdCkgPT0gJGNvdW50KSB7DQogICAgICAgICAgICBhcnJheV9wb3AoJGxpc3QpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fR2V0TGlzdF9SZXN1bHQnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgJGZwcmV0dXJuID0gJGZwbmFtZSgkbGlzdCk7DQogICAgfQ0KDQogICAgcmV0dXJuICRsaXN0Ow0KfQ0KDQovLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KLyoqDQogKiBWaWV3SW5kZXgs6aaW6aG177yM5pCc57Si6aG177yMZmVlZOmhteeahOS4u+WHveaVsC4NCiAqDQogKiBAYXBpIEZpbHRlcl9QbHVnaW5fVmlld0luZGV4X0JlZ2luDQogKg0KICogQHRocm93cyBFeGNlcHRpb24NCiAqDQogKiBAcmV0dXJuIG1peGVkDQogKi8NCmZ1bmN0aW9uIFZpZXdJbmRleCgpDQp7DQogICAgZ2xvYmFsICR6YnAsICRhY3Rpb247DQoNCiAgICBpZiAoJHpicC0+dGVtcGxhdGUtPmhhc1RlbXBsYXRlKCc0MDQnKSkgew0KICAgICAgICBBZGRfRmlsdGVyX1BsdWdpbignRmlsdGVyX1BsdWdpbl9aYnBfU2hvd0Vycm9yJywgJ0luY2x1ZGVfU2hvd0Vycm9yNDA0Jyk7DQogICAgfQ0KDQogICAgaWYgKElTX0lJUyAmJiBpc3NldCgkX0dFVFsncmV3cml0ZSddKSAmJiBpc3NldCgkX0dFVFsnZnVsbF91cmknXSkpIHsNCiAgICAgICAgLy/lr7lpaXMgKyByZXdyaXRl6L+b6KGM5L+u5q2jDQogICAgICAgICR1cmlfYXJyYXkgPSBwYXJzZV91cmwoJF9HRVRbJ2Z1bGxfdXJpJ10pOw0KICAgICAgICBpZiAoaXNzZXQoJHVyaV9hcnJheVsncXVlcnknXSkpIHsNCiAgICAgICAgICAgIHBhcnNlX3N0cigkdXJpX2FycmF5WydxdWVyeSddLCAkdXJpX3F1ZXJ5KTsNCiAgICAgICAgICAgICRfR0VUID0gYXJyYXlfbWVyZ2UoJF9HRVQsICR1cmlfcXVlcnkpOw0KICAgICAgICAgICAgJF9SRVFVRVNUID0gYXJyYXlfbWVyZ2UoJF9SRVFVRVNULCAkdXJpX3F1ZXJ5KTsNCiAgICAgICAgfQ0KICAgICAgICB1bnNldCgkdXJpX2FycmF5LCAkdXJpX3F1ZXJ5KTsNCiAgICB9DQoNCiAgICBpZiAoJHpicC0+b3B0aW9uWydaQ19BRERJVElPTkFMX1NFQ1VSSVRZJ10pIHsNCiAgICAgICAgaGVhZGVyKCdYLVhTUy1Qcm90ZWN0aW9uOiAxOyBtb2RlPWJsb2NrJyk7DQogICAgICAgIGlmICgkemJwLT5pc0h0dHBzKSB7DQogICAgICAgICAgICBoZWFkZXIoJ1VwZ3JhZGUtSW5zZWN1cmUtUmVxdWVzdHM6IDEnKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgICR1cmwgPSAkemJwLT5jdXJyZW50dXJsOw0KICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1ZpZXdJbmRleF9CZWdpbiddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAkZnByZXR1cm4gPSAkZnBuYW1lKCR1cmwpOw0KICAgICAgICBpZiAoJGZwc2lnbmFsID09IFBMVUdJTl9FWElUU0lHTkFMX1JFVFVSTikgew0KICAgICAgICAgICAgJGZwc2lnbmFsID0gUExVR0lOX0VYSVRTSUdOQUxfTk9ORTsNCg0KICAgICAgICAgICAgcmV0dXJuICRmcHJldHVybjsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHN3aXRjaCAoJGFjdGlvbikgew0KICAgICAgICBjYXNlICdmZWVkJzoNCiAgICAgICAgICAgIFZpZXdGZWVkKCk7DQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAnc2VhcmNoJzoNCiAgICAgICAgICAgIFZpZXdTZWFyY2goKTsNCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlICcnOg0KICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgICAgaWYgKCR1cmwgPT0gJHpicC0+Y29va2llc3BhdGggfHwgJHVybCA9PSAkemJwLT5jb29raWVzcGF0aCAuICdpbmRleC5waHAnKSB7DQogICAgICAgICAgICAgICAgVmlld0xpc3QobnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgbnVsbCk7DQogICAgICAgICAgICB9IGVsc2VpZiAoKCR6YnAtPm9wdGlvblsnWkNfU1RBVElDX01PREUnXSA9PSAnQUNUSVZFJyB8fCBpc3NldCgkX0dFVFsncmV3cml0ZSddKSkgJiYNCiAgICAgICAgICAgIChpc3NldCgkX0dFVFsnaWQnXSkgfHwgaXNzZXQoJF9HRVRbJ2FsaWFzJ10pKSkgew0KICAgICAgICAgICAgICAgIFZpZXdQb3N0KEdldFZhcnMoJ2lkJywgJ0dFVCcpLCBHZXRWYXJzKCdhbGlhcycsICdHRVQnKSk7DQogICAgICAgICAgICB9IGVsc2VpZiAoKCR6YnAtPm9wdGlvblsnWkNfU1RBVElDX01PREUnXSA9PSAnQUNUSVZFJyB8fCBpc3NldCgkX0dFVFsncmV3cml0ZSddKSkgJiYNCiAgICAgICAgICAgICAgICAoaXNzZXQoJF9HRVRbJ3BhZ2UnXSkgfHwgaXNzZXQoJF9HRVRbJ2NhdGUnXSkgfHwgaXNzZXQoJF9HRVRbJ2F1dGgnXSkgfHwgaXNzZXQoJF9HRVRbJ2RhdGUnXSkgfHwgaXNzZXQoJF9HRVRbJ3RhZ3MnXSkpKSB7DQogICAgICAgICAgICAgICAgVmlld0xpc3QoR2V0VmFycygncGFnZScsICdHRVQnKSwgR2V0VmFycygnY2F0ZScsICdHRVQnKSwgR2V0VmFycygnYXV0aCcsICdHRVQnKSwgR2V0VmFycygnZGF0ZScsICdHRVQnKSwgR2V0VmFycygndGFncycsICdHRVQnKSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIFZpZXdBdXRvKCR1cmwpOw0KICAgICAgICAgICAgfQ0KICAgIH0NCg0KICAgIHJldHVybiBmYWxzZTsNCn0NCg0KLyoqDQogKiDmmL7npLpSU1MyRmVlZC4NCiAqDQogKiBAYXBpIEZpbHRlcl9QbHVnaW5fVmlld0ZlZWRfQmVnaW4NCiAqLw0KZnVuY3Rpb24gVmlld0ZlZWQoKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KDQogICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fVmlld0ZlZWRfQmVnaW4nXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgJGZwcmV0dXJuID0gJGZwbmFtZSgpOw0KICAgICAgICBpZiAoJGZwc2lnbmFsID09IFBMVUdJTl9FWElUU0lHTkFMX1JFVFVSTikgew0KICAgICAgICAgICAgJGZwc2lnbmFsID0gUExVR0lOX0VYSVRTSUdOQUxfTk9ORTsNCg0KICAgICAgICAgICAgcmV0dXJuICRmcHJldHVybjsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGlmICghJHpicC0+Q2hlY2tSaWdodHMoJEdMT0JBTFNbJ2FjdGlvbiddKSkgew0KICAgICAgICBIdHRwNDA0KCk7DQogICAgICAgIGRpZTsNCiAgICB9DQoNCiAgICAkcnNzMiA9IG5ldyBSc3MyKCR6YnAtPm5hbWUsICR6YnAtPmhvc3QsICR6YnAtPnN1Ym5hbWUpOw0KDQogICAgJHcgPSBhcnJheShhcnJheSgnPScsICdsb2dfU3RhdHVzJywgMCkpOw0KDQogICAgaWYgKEdldFZhcnMoJ2NhdGUnLCAnR0VUJykgIT0gbnVsbCkgew0KICAgICAgICAkd1tdID0gYXJyYXkoJz0nLCAnbG9nX0NhdGVJRCcsIChpbnQpIEdldFZhcnMoJ2NhdGUnLCAnR0VUJykpOw0KICAgIH0gZWxzZWlmIChHZXRWYXJzKCdhdXRoJywgJ0dFVCcpICE9IG51bGwpIHsNCiAgICAgICAgJHdbXSA9IGFycmF5KCc9JywgJ2xvZ19BdXRob3JJRCcsIChpbnQpIEdldFZhcnMoJ2F1dGgnLCAnR0VUJykpOw0KICAgIH0gZWxzZWlmIChHZXRWYXJzKCdkYXRlJywgJ0dFVCcpICE9IG51bGwpIHsNCiAgICAgICAgJGRhID0gZGF0ZV9wYXJzZShHZXRWYXJzKCdkYXRlJywgJ0dFVCcpKTsNCiAgICAgICAgJGQgPSBzdHJ0b3RpbWUoR2V0VmFycygnZGF0ZScsICdHRVQnKSk7DQogICAgICAgIGlmIChzdHJycG9zKEdldFZhcnMoJ2RhdGUnLCAnR0VUJyksICctJykgIT09IHN0cnBvcyhHZXRWYXJzKCdkYXRlJywgJ0dFVCcpLCAnLScpKSB7DQogICAgICAgICAgICAkd1tdID0gYXJyYXkoJ0JFVFdFRU4nLCAnbG9nX1Bvc3RUaW1lJywgJGQsIHN0cnRvdGltZSgnKzEgZGF5JywgJGQpKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICR3W10gPSBhcnJheSgnQkVUV0VFTicsICdsb2dfUG9zdFRpbWUnLCAkZCwgc3RydG90aW1lKCcrMSBtb250aCcsICRkKSk7DQogICAgICAgIH0NCiAgICB9IGVsc2VpZiAoR2V0VmFycygndGFncycsICdHRVQnKSAhPSBudWxsKSB7DQogICAgICAgICR3W10gPSBhcnJheSgnTElLRScsICdsb2dfVGFnJywgJyV7JyAuIChpbnQpIEdldFZhcnMoJ3RhZ3MnLCAnR0VUJykgLiAnfSUnKTsNCiAgICB9DQoNCiAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9WaWV3RmVlZF9Db3JlJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICRmcG5hbWUoJHcpOw0KICAgIH0NCg0KICAgICRhcnRpY2xlcyA9ICR6YnAtPkdldEFydGljbGVMaXN0KA0KICAgICAgICAnKicsDQogICAgICAgICR3LA0KICAgICAgICBhcnJheSgnbG9nX1Bvc3RUaW1lJyA9PiAnREVTQycpLA0KICAgICAgICAkemJwLT5vcHRpb25bJ1pDX1JTUzJfQ09VTlQnXSwNCiAgICAgICAgbnVsbA0KICAgICk7DQoNCiAgICBmb3JlYWNoICgkYXJ0aWNsZXMgYXMgJGFydGljbGUpIHsNCiAgICAgICAgJHJzczItPmFkZEl0ZW0oJGFydGljbGUtPlRpdGxlLCAkYXJ0aWNsZS0+VXJsLCAoJHpicC0+b3B0aW9uWydaQ19SU1NfRVhQT1JUX1dIT0xFJ10gPT0gdHJ1ZSA/ICRhcnRpY2xlLT5Db250ZW50IDogJGFydGljbGUtPkludHJvKSwgJGFydGljbGUtPlBvc3RUaW1lKTsNCiAgICB9DQoNCiAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9WaWV3RmVlZF9FbmQnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgJGZwcmV0dXJuID0gJGZwbmFtZSgkcnNzMik7DQogICAgICAgIGlmICgkZnBzaWduYWwgPT0gUExVR0lOX0VYSVRTSUdOQUxfUkVUVVJOKSB7DQogICAgICAgICAgICAkZnBzaWduYWwgPSBQTFVHSU5fRVhJVFNJR05BTF9OT05FOw0KDQogICAgICAgICAgICByZXR1cm4gJGZwcmV0dXJuOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgaGVhZGVyKCJDb250ZW50LXR5cGU6dGV4dC94bWw7IENoYXJzZXQ9dXRmLTgiKTsNCg0KICAgIGVjaG8gJHJzczItPnNhdmVYTUwoKTsNCg0KICAgIHJldHVybiB0cnVlOw0KfQ0KDQovKioNCiAqIOWxleekuuaQnOe0oue7k+aenC4NCiAqDQogKiBAYXBpIEZpbHRlcl9QbHVnaW5fVmlld1NlYXJjaF9CZWdpbg0KICogQGFwaSBGaWx0ZXJfUGx1Z2luX1ZpZXdQb3N0X1RlbXBsYXRlDQogKg0KICogQHRocm93cyBFeGNlcHRpb24NCiAqDQogKiBAcmV0dXJuIG1peGVkDQogKi8NCmZ1bmN0aW9uIFZpZXdTZWFyY2goKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KDQogICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fVmlld1NlYXJjaF9CZWdpbiddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAkZnByZXR1cm4gPSAkZnBuYW1lKCk7DQogICAgICAgIGlmICgkZnBzaWduYWwgPT0gUExVR0lOX0VYSVRTSUdOQUxfUkVUVVJOKSB7DQogICAgICAgICAgICAkZnBzaWduYWwgPSBQTFVHSU5fRVhJVFNJR05BTF9OT05FOw0KDQogICAgICAgICAgICByZXR1cm4gJGZwcmV0dXJuOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgaWYgKCEkemJwLT5DaGVja1JpZ2h0cygkR0xPQkFMU1snYWN0aW9uJ10pKSB7DQogICAgICAgIFJlZGlyZWN0KCcuLycpOw0KICAgIH0NCg0KICAgICRxID0gdHJpbShodG1sc3BlY2lhbGNoYXJzKEdldFZhcnMoJ3EnLCAnR0VUJykpKTsNCiAgICAkcGFnZSA9IEdldFZhcnMoJ3BhZ2UnLCAnR0VUJyk7DQogICAgJHBhZ2UgPSAoaW50KSAkcGFnZSA9PSAwID8gMSA6IChpbnQpICRwYWdlOw0KDQogICAgJGFydGljbGUgPSBuZXcgUG9zdCgpOw0KICAgICRhcnRpY2xlLT5JRCA9IDA7DQogICAgJGFydGljbGUtPlRpdGxlID0gJHpicC0+bGFuZ3MtPm1zZy0+c2VhcmNoIC4gJyZuYnNwOyZxdW90OzxzcGFuPicgLiAkcSAuICc8L3NwYW4+JnF1b3Q7JzsNCiAgICAkYXJ0aWNsZS0+SXNMb2NrID0gdHJ1ZTsNCiAgICAkYXJ0aWNsZS0+VHlwZSA9IFpDX1BPU1RfVFlQRV9QQUdFOw0KDQogICAgaWYgKCR6YnAtPnRlbXBsYXRlLT5oYXNUZW1wbGF0ZSgnc2VhcmNoJykpIHsNCiAgICAgICAgJGFydGljbGUtPlRlbXBsYXRlID0gJ3NlYXJjaCc7DQogICAgfQ0KDQogICAgJHcgPSBhcnJheSgpOw0KICAgICR3W10gPSBhcnJheSgnPScsICdsb2dfVHlwZScsICcwJyk7DQogICAgaWYgKCRxKSB7DQogICAgICAgICR3W10gPSBhcnJheSgnc2VhcmNoJywgJ2xvZ19Db250ZW50JywgJ2xvZ19JbnRybycsICdsb2dfVGl0bGUnLCAkcSk7DQogICAgfSBlbHNlIHsNCiAgICAgICAgUmVkaXJlY3QoJy4vJyk7DQogICAgfQ0KDQogICAgaWYgKCEoJHpicC0+Q2hlY2tSaWdodHMoJ0FydGljbGVBbGwnKSAmJiAkemJwLT5DaGVja1JpZ2h0cygnUGFnZUFsbCcpKSkgew0KICAgICAgICAkd1tdID0gYXJyYXkoJz0nLCAnbG9nX1N0YXR1cycsIDApOw0KICAgIH0NCg0KICAgICRwYWdlYmFyID0gbmV3IFBhZ2ViYXIoJHpicC0+b3B0aW9uWydaQ19TRUFSQ0hfUkVHRVgnXSwgdHJ1ZSk7DQogICAgJHBhZ2ViYXItPlBhZ2VDb3VudCA9ICR6YnAtPnNlYXJjaGNvdW50Ow0KICAgICRwYWdlYmFyLT5QYWdlTm93ID0gJHBhZ2U7DQogICAgJHBhZ2ViYXItPlBhZ2VCYXJDb3VudCA9ICR6YnAtPnBhZ2ViYXJjb3VudDsNCiAgICAkcGFnZWJhci0+VXJsUnVsZS0+UnVsZXNbJ3slcGFnZSV9J10gPSAkcGFnZTsNCiAgICAkcGFnZWJhci0+VXJsUnVsZS0+UnVsZXNbJ3slcSV9J10gPSByYXd1cmxlbmNvZGUoJHEpOw0KDQogICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fVmlld1NlYXJjaF9Db3JlJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICRmcG5hbWUoJHEsICRwYWdlLCAkdywgJHBhZ2ViYXIpOw0KICAgIH0NCg0KICAgICRhcnJheSA9ICR6YnAtPkdldEFydGljbGVMaXN0KA0KICAgICAgICAnJywNCiAgICAgICAgJHcsDQogICAgICAgIGFycmF5KCdsb2dfUG9zdFRpbWUnID0+ICdERVNDJyksDQogICAgICAgIGFycmF5KCgkcGFnZWJhci0+UGFnZU5vdyAtIDEpICogJHBhZ2ViYXItPlBhZ2VDb3VudCwgJHBhZ2ViYXItPlBhZ2VDb3VudCksDQogICAgICAgIGFycmF5KCdwYWdlYmFyJyA9PiAkcGFnZWJhciksDQogICAgICAgIGZhbHNlDQogICAgKTsNCg0KICAgICRyZXN1bHRzID0gYXJyYXkoKTsNCg0KICAgIGZvcmVhY2ggKCRhcnJheSBhcyAkYSkgew0KICAgICAgICAkciA9IG5ldyBQb3N0KCk7DQogICAgICAgICRyLT5Mb2FkSW5mb0J5RGF0YUFycmF5KCRhLT5HZXREYXRhKCkpOw0KICAgICAgICAkYXJ0aWNsZS0+Q29udGVudCAuPSAnPHA+PGEgaHJlZj0iJyAuICRhLT5VcmwgLiAnIj4nIC4gc3RyX3JlcGxhY2UoJHEsICc8c3Ryb25nPicgLiAkcSAuICc8L3N0cm9uZz4nLCAkYS0+VGl0bGUpIC4gJzwvYT48YnIvPic7DQogICAgICAgICRzID0gc3RyaXBfdGFncygkYS0+SW50cm8pIC4gJyAnIC4gc3RyaXBfdGFncygkYS0+Q29udGVudCk7DQogICAgICAgICRpID0gc3RycG9zKCRzLCAkcSwgMCk7DQogICAgICAgIGlmICgkaSAhPT0gZmFsc2UpIHsNCiAgICAgICAgICAgIGlmICgkaSA+IDUwKSB7DQogICAgICAgICAgICAgICAgJHQgPSBTdWJTdHJVVEY4X1N0YXJ0KCRzLCAkaSAtIDUwLCAxMDApOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAkdCA9IFN1YlN0clVURjhfU3RhcnQoJHMsIDAsIDEwMCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICAkYXJ0aWNsZS0+Q29udGVudCAuPSBzdHJfcmVwbGFjZSgkcSwgJzxzdHJvbmc+JyAuICRxIC4gJzwvc3Ryb25nPicsICR0KSAuICc8YnIvPic7DQogICAgICAgICAgICAkci0+SW50cm8gPSBzdHJfcmVwbGFjZSgkcSwgJzxzdHJvbmc+JyAuICRxIC4gJzwvc3Ryb25nPicsICR0KTsNCiAgICAgICAgICAgICRyLT5Db250ZW50ID0gJGEtPkNvbnRlbnQ7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAkcyA9IHN0cmlwX3RhZ3MoJGEtPlRpdGxlKTsNCiAgICAgICAgICAgICRpID0gc3RycG9zKCRzLCAkcSwgMCk7DQogICAgICAgICAgICBpZiAoJGkgPiA1MCkgew0KICAgICAgICAgICAgICAgICR0ID0gU3ViU3RyVVRGOF9TdGFydCgkcywgJGkgLSA1MCwgMTAwKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgJHQgPSBTdWJTdHJVVEY4X1N0YXJ0KCRzLCAwLCAxMDApOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgJGFydGljbGUtPkNvbnRlbnQgLj0gc3RyX3JlcGxhY2UoJHEsICc8c3Ryb25nPicgLiAkcSAuICc8L3N0cm9uZz4nLCAkdCkgLiAnPGJyLz4nOw0KICAgICAgICAgICAgJHItPkludHJvID0gc3RyX3JlcGxhY2UoJHEsICc8c3Ryb25nPicgLiAkcSAuICc8L3N0cm9uZz4nLCAkdCk7DQogICAgICAgICAgICAkci0+Q29udGVudCA9ICRhLT5Db250ZW50Ow0KICAgICAgICB9DQogICAgICAgICRyLT5UaXRsZSA9IHN0cl9yZXBsYWNlKCRxLCAnPHN0cm9uZz4nIC4gJHEgLiAnPC9zdHJvbmc+JywgJHItPlRpdGxlKTsNCiAgICAgICAgJGFydGljbGUtPkNvbnRlbnQgLj0gJzxhIGhyZWY9IicgLiAkYS0+VXJsIC4gJyI+JyAuICRhLT5VcmwgLiAnPC9hPjxici8+PC9wPic7DQogICAgICAgICRyZXN1bHRzW10gPSAkcjsNCiAgICB9DQoNCiAgICAkcjAgPSBuZXcgUG9zdCgpOw0KICAgICRyMC0+SUQgPSAwOw0KICAgICRyMC0+VGl0bGUgPSAkemJwLT5sYW5nWydtc2cnXVsnc2VhcmNoJ10gLiAnICZxdW90OycgLiAkcSAuICcmcXVvdDsnOw0KICAgICRyMC0+VHlwZSA9IFpDX1BPU1RfVFlQRV9BUlRJQ0xFOw0KICAgICRyZXN1bHRzID0gJHJlc3VsdHM7DQoNCiAgICAkemJwLT5oZWFkZXIgLj0gJzxtZXRhIG5hbWU9InJvYm90cyIgY29udGVudD0ibm9pbmRleCxmb2xsb3ciIC8+JyAuICJcclxuIjsNCiAgICAkemJwLT50ZW1wbGF0ZS0+U2V0VGFncygndGl0bGUnLCBzdHJfcmVwbGFjZShhcnJheSgnPHNwYW4+JywgJzwvc3Bhbj4nKSwgJycsICRhcnRpY2xlLT5UaXRsZSkpOw0KICAgICR6YnAtPnRlbXBsYXRlLT5TZXRUYWdzKCdhcnRpY2xlJywgJGFydGljbGUpOw0KICAgICR6YnAtPnRlbXBsYXRlLT5TZXRUYWdzKCdzZWFyY2gnLCAkcSk7DQogICAgJHpicC0+dGVtcGxhdGUtPlNldFRhZ3MoJ3BhZ2UnLCAkcGFnZSk7DQogICAgJHpicC0+dGVtcGxhdGUtPlNldFRhZ3MoJ3BhZ2ViYXInLCAkcGFnZWJhcik7DQogICAgJHpicC0+dGVtcGxhdGUtPlNldFRhZ3MoJ2NvbW1lbnRzJywgYXJyYXkoKSk7DQogICAgJHpicC0+dGVtcGxhdGUtPlNldFRhZ3MoJ2lzc2VhcmNoJywgdHJ1ZSk7DQoNCiAgICAvLzEuNuaWsOWKoOiuvue9ru+8jOWPr+S7peiuqeaQnOe0ouWPmOS4uuWIl+ihqOaooeW8j+i/kOihjA0KICAgICR6YnAtPnRlbXBsYXRlLT5TZXRUYWdzKCd0eXBlJywgJ3NlYXJjaCcpOyAvLzEuNue7n+S4gOaUueS4unNlYXJjaA0KICAgIGlmIChpc3NldCgkemJwLT5vcHRpb25bJ1pDX1NFQVJDSF9UWVBFJ10pICYmICR6YnAtPm9wdGlvblsnWkNfU0VBUkNIX1RZUEUnXSA9PSAnbGlzdCcpIHsNCiAgICAgICAgJHpicC0+dGVtcGxhdGUtPlNldFRhZ3MoJ2FydGljbGVzJywgJHJlc3VsdHMpOw0KICAgICAgICBpZiAoJHpicC0+dGVtcGxhdGUtPmhhc1RlbXBsYXRlKCdzZWFyY2gnKSkgew0KICAgICAgICAgICAgJHpicC0+dGVtcGxhdGUtPlNldFRlbXBsYXRlKCdzZWFyY2gnKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICR6YnAtPnRlbXBsYXRlLT5TZXRUZW1wbGF0ZSgnaW5kZXgnKTsNCiAgICAgICAgfQ0KICAgIH0gZWxzZSB7DQogICAgICAgICR6YnAtPnRlbXBsYXRlLT5TZXRUYWdzKCdhcnRpY2xlcycsICRhcnJheSk7DQogICAgICAgICR6YnAtPnRlbXBsYXRlLT5TZXRUZW1wbGF0ZSgkYXJ0aWNsZS0+VGVtcGxhdGUpOw0KICAgIH0NCg0KICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1ZpZXdTZWFyY2hfVGVtcGxhdGUnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgJGZwcmV0dXJuID0gJGZwbmFtZSgkemJwLT50ZW1wbGF0ZSk7DQogICAgICAgIGlmICgkZnBzaWduYWwgPT0gUExVR0lOX0VYSVRTSUdOQUxfUkVUVVJOKSB7DQogICAgICAgICAgICAkZnBzaWduYWwgPSBQTFVHSU5fRVhJVFNJR05BTF9OT05FOw0KDQogICAgICAgICAgICByZXR1cm4gJGZwcmV0dXJuOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgJHpicC0+dGVtcGxhdGUtPkRpc3BsYXkoKTsNCg0KICAgIHJldHVybiB0cnVlOw0KfQ0KDQovLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KLyoqDQogKiDmoLnmja5SZXdyaXRlX3VybOinhOWImeaYvuekuumhtemdoi4NCiAqDQogKiBAYXBpIEZpbHRlcl9QbHVnaW5fVmlld0F1dG9fQmVnaW4NCiAqIEBhcGkgRmlsdGVyX1BsdWdpbl9WaWV3QXV0b19FbmQNCiAqDQogKiBAcGFyYW0gc3RyaW5nICRpbnB1cmwg6aG16Z2idXJsDQogKg0KICogQHRocm93cyBFeGNlcHRpb24NCiAqDQogKiBAcmV0dXJuIG51bGx8c3RyaW5nDQogKi8NCmZ1bmN0aW9uIFZpZXdBdXRvKCRpbnB1cmwpDQp7DQogICAgZ2xvYmFsICR6YnA7DQoNCiAgICAkdXJsID0gR2V0VmFsdWVJbkFycmF5KGV4cGxvZGUoJz8nLCAkaW5wdXJsKSwgJzAnKTsNCg0KICAgIGlmICgkemJwLT5jb29raWVzcGF0aCA9PT0gc3Vic3RyKCR1cmwsIDAsIHN0cmxlbigkemJwLT5jb29raWVzcGF0aCkpKSB7DQogICAgICAgICR1cmwgPSBzdWJzdHIoJHVybCwgc3RybGVuKCR6YnAtPmNvb2tpZXNwYXRoKSk7DQogICAgfQ0KDQogICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fVmlld0F1dG9fQmVnaW4nXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgJGZwcmV0dXJuID0gJGZwbmFtZSgkaW5wdXJsLCAkdXJsKTsNCiAgICAgICAgaWYgKCRmcHNpZ25hbCA9PSBQTFVHSU5fRVhJVFNJR05BTF9SRVRVUk4pIHsNCiAgICAgICAgICAgICRmcHNpZ25hbCA9IFBMVUdJTl9FWElUU0lHTkFMX05PTkU7DQoNCiAgICAgICAgICAgIHJldHVybiAkZnByZXR1cm47DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBpZiAoSVNfSUlTICYmIGlzc2V0KCRfR0VUWydyZXdyaXRlJ10pKSB7DQogICAgICAgIC8vaWlzK2h0dHBkLmluaeS4i+WmguaenOWtmOWcqOecn+WunuaWh+S7tg0KICAgICAgICAkcmVhbHVybCA9ICR6YnAtPnBhdGggLiB1cmxkZWNvZGUoJHVybCk7DQogICAgICAgIGlmIChpc19yZWFkYWJsZSgkcmVhbHVybCkgJiYgaXNfZmlsZSgkcmVhbHVybCkgJiYgIXByZWdfbWF0Y2goJy9cLnBocCQvJywgJHJlYWx1cmwpKSB7DQogICAgICAgICAgICBkaWUoZmlsZV9nZXRfY29udGVudHMoJHJlYWx1cmwpKTsNCiAgICAgICAgfQ0KICAgICAgICB1bnNldCgkcmVhbHVybCk7DQogICAgfQ0KDQogICAgJHVybCA9IHVybGRlY29kZSgkdXJsKTsNCg0KICAgIGlmICgkdXJsID09ICcnIHx8ICR1cmwgPT0gJy8nIHx8ICR1cmwgPT0gJ2luZGV4LnBocCcpIHsNCiAgICAgICAgVmlld0xpc3QobnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgbnVsbCk7DQoNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGlmICgkemJwLT5vcHRpb25bJ1pDX1NUQVRJQ19NT0RFJ10gPT0gJ1JFV1JJVEUnKSB7DQogICAgICAgICRyID0gVXJsUnVsZTo6T3V0cHV0VXJsUmVnRXgoJHpicC0+b3B0aW9uWydaQ19JTkRFWF9SRUdFWCddLCAnaW5kZXgnKTsNCiAgICAgICAgJG0gPSBhcnJheSgpOw0KICAgICAgICBpZiAocHJlZ19tYXRjaCgkciwgJHVybCwgJG0pID09IDEpIHsNCiAgICAgICAgICAgIFZpZXdMaXN0KCRtWydwYWdlJ10sIG51bGwsIG51bGwsIG51bGwsIG51bGwsIHRydWUpOw0KDQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCg0KICAgICAgICAkciA9IFVybFJ1bGU6Ok91dHB1dFVybFJlZ0V4KCR6YnAtPm9wdGlvblsnWkNfREFURV9SRUdFWCddLCAnZGF0ZScsIGZhbHNlKTsNCiAgICAgICAgJG0gPSBhcnJheSgpOw0KICAgICAgICBpZiAocHJlZ19tYXRjaCgkciwgJHVybCwgJG0pID09IDEpIHsNCiAgICAgICAgICAgIGlzc2V0KCRtWydwYWdlJ10pID8gbnVsbCA6ICRtWydwYWdlJ10gPSAwOw0KICAgICAgICAgICAgJHJlc3VsdCA9IFZpZXdMaXN0KCRtWydwYWdlJ10sIG51bGwsIG51bGwsICRtLCBudWxsLCB0cnVlKTsNCiAgICAgICAgICAgIGlmICgkcmVzdWx0ID09IHRydWUpIHsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAkciA9IFVybFJ1bGU6Ok91dHB1dFVybFJlZ0V4KCR6YnAtPm9wdGlvblsnWkNfREFURV9SRUdFWCddLCAnZGF0ZScsIHRydWUpOw0KICAgICAgICAkbSA9IGFycmF5KCk7DQogICAgICAgIGlmIChwcmVnX21hdGNoKCRyLCAkdXJsLCAkbSkgPT0gMSkgew0KICAgICAgICAgICAgJHJlc3VsdCA9IFZpZXdMaXN0KCRtWydwYWdlJ10sIG51bGwsIG51bGwsICRtLCBudWxsLCB0cnVlKTsNCiAgICAgICAgICAgIGlmICgkcmVzdWx0ID09IHRydWUpIHsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAkciA9IFVybFJ1bGU6Ok91dHB1dFVybFJlZ0V4KCR6YnAtPm9wdGlvblsnWkNfQVVUSE9SX1JFR0VYJ10sICdhdXRoJywgZmFsc2UpOw0KICAgICAgICAkbSA9IGFycmF5KCk7DQogICAgICAgIGlmIChwcmVnX21hdGNoKCRyLCAkdXJsLCAkbSkgPT0gMSkgew0KICAgICAgICAgICAgaXNzZXQoJG1bJ3BhZ2UnXSkgPyBudWxsIDogJG1bJ3BhZ2UnXSA9IDA7DQogICAgICAgICAgICAkcmVzdWx0ID0gVmlld0xpc3QoJG1bJ3BhZ2UnXSwgbnVsbCwgJG0sIG51bGwsIG51bGwsIHRydWUpOw0KICAgICAgICAgICAgaWYgKCRyZXN1bHQgPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgICRyID0gVXJsUnVsZTo6T3V0cHV0VXJsUmVnRXgoJHpicC0+b3B0aW9uWydaQ19BVVRIT1JfUkVHRVgnXSwgJ2F1dGgnLCB0cnVlKTsNCiAgICAgICAgJG0gPSBhcnJheSgpOw0KICAgICAgICBpZiAocHJlZ19tYXRjaCgkciwgJHVybCwgJG0pID09IDEpIHsNCiAgICAgICAgICAgICRyZXN1bHQgPSBWaWV3TGlzdCgkbVsncGFnZSddLCBudWxsLCAkbSwgbnVsbCwgbnVsbCwgdHJ1ZSk7DQogICAgICAgICAgICBpZiAoJHJlc3VsdCA9PSB0cnVlKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgJHIgPSBVcmxSdWxlOjpPdXRwdXRVcmxSZWdFeCgkemJwLT5vcHRpb25bJ1pDX1RBR1NfUkVHRVgnXSwgJ3RhZ3MnLCBmYWxzZSk7DQogICAgICAgICRtID0gYXJyYXkoKTsNCiAgICAgICAgaWYgKHByZWdfbWF0Y2goJHIsICR1cmwsICRtKSA9PSAxKSB7DQogICAgICAgICAgICBpc3NldCgkbVsncGFnZSddKSA/IG51bGwgOiAkbVsncGFnZSddID0gMDsNCiAgICAgICAgICAgICRyZXN1bHQgPSBWaWV3TGlzdCgkbVsncGFnZSddLCBudWxsLCBudWxsLCBudWxsLCAkbSwgdHJ1ZSk7DQogICAgICAgICAgICBpZiAoJHJlc3VsdCA9PSB0cnVlKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgJHIgPSBVcmxSdWxlOjpPdXRwdXRVcmxSZWdFeCgkemJwLT5vcHRpb25bJ1pDX1RBR1NfUkVHRVgnXSwgJ3RhZ3MnLCB0cnVlKTsNCiAgICAgICAgJG0gPSBhcnJheSgpOw0KICAgICAgICBpZiAocHJlZ19tYXRjaCgkciwgJHVybCwgJG0pID09IDEpIHsNCiAgICAgICAgICAgICRyZXN1bHQgPSBWaWV3TGlzdCgkbVsncGFnZSddLCBudWxsLCBudWxsLCBudWxsLCAkbSwgdHJ1ZSk7DQogICAgICAgICAgICBpZiAoJHJlc3VsdCA9PSB0cnVlKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgJHIgPSBVcmxSdWxlOjpPdXRwdXRVcmxSZWdFeCgkemJwLT5vcHRpb25bJ1pDX0NBVEVHT1JZX1JFR0VYJ10sICdjYXRlJywgZmFsc2UpOw0KICAgICAgICAkbSA9IGFycmF5KCk7DQogICAgICAgIGlmIChwcmVnX21hdGNoKCRyLCAkdXJsLCAkbSkgPT0gMSkgew0KICAgICAgICAgICAgaXNzZXQoJG1bJ3BhZ2UnXSkgPyBudWxsIDogJG1bJ3BhZ2UnXSA9IDA7DQogICAgICAgICAgICAkcmVzdWx0ID0gVmlld0xpc3QoJG1bJ3BhZ2UnXSwgJG0sIG51bGwsIG51bGwsIG51bGwsIHRydWUpOw0KICAgICAgICAgICAgaWYgKCRyZXN1bHQgPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgICRyID0gVXJsUnVsZTo6T3V0cHV0VXJsUmVnRXgoJHpicC0+b3B0aW9uWydaQ19DQVRFR09SWV9SRUdFWCddLCAnY2F0ZScsIHRydWUpOw0KICAgICAgICAkbSA9IGFycmF5KCk7DQogICAgICAgIGlmIChwcmVnX21hdGNoKCRyLCAkdXJsLCAkbSkgPT0gMSkgew0KICAgICAgICAgICAgJHJlc3VsdCA9IFZpZXdMaXN0KCRtWydwYWdlJ10sICRtLCBudWxsLCBudWxsLCBudWxsLCB0cnVlKTsNCiAgICAgICAgICAgIGlmICgkcmVzdWx0ID09IHRydWUpIHsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAkciA9IFVybFJ1bGU6Ok91dHB1dFVybFJlZ0V4KCR6YnAtPm9wdGlvblsnWkNfQVJUSUNMRV9SRUdFWCddLCAnYXJ0aWNsZScpOw0KICAgICAgICAkbSA9IGFycmF5KCk7DQogICAgICAgIGlmIChwcmVnX21hdGNoKCRyLCAkdXJsLCAkbSkgPT0gMSkgew0KICAgICAgICAgICAgJHJlc3VsdCA9IFZpZXdQb3N0KCRtLCBudWxsLCB0cnVlKTsNCiAgICAgICAgICAgIGlmICgkcmVzdWx0ID09IGZhbHNlKSB7DQogICAgICAgICAgICAgICAgJHpicC0+U2hvd0Vycm9yKDIsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KDQogICAgICAgICRyID0gVXJsUnVsZTo6T3V0cHV0VXJsUmVnRXgoJHpicC0+b3B0aW9uWydaQ19QQUdFX1JFR0VYJ10sICdwYWdlJyk7DQogICAgICAgICRtID0gYXJyYXkoKTsNCiAgICAgICAgaWYgKHByZWdfbWF0Y2goJHIsICR1cmwsICRtKSA9PSAxKSB7DQogICAgICAgICAgICAkcmVzdWx0ID0gVmlld1Bvc3QoJG0sIG51bGwsIHRydWUpOw0KICAgICAgICAgICAgaWYgKCRyZXN1bHQgPT0gZmFsc2UpIHsNCiAgICAgICAgICAgICAgICAkemJwLT5TaG93RXJyb3IoMiwgX19GSUxFX18sIF9fTElORV9fKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fVmlld0F1dG9fRW5kJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICRmcHJldHVybiA9ICRmcG5hbWUoJHVybCk7DQogICAgICAgIGlmICgkZnBzaWduYWwgPT0gUExVR0lOX0VYSVRTSUdOQUxfUkVUVVJOKSB7DQogICAgICAgICAgICAkZnBzaWduYWwgPSBQTFVHSU5fRVhJVFNJR05BTF9OT05FOw0KDQogICAgICAgICAgICByZXR1cm4gJGZwcmV0dXJuOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgaWYgKGlzc2V0KCR6YnAtPm9wdGlvblsnWkNfQ09NUEFUSUJMRV9BU1BfVVJMJ10pICYmICgkemJwLT5vcHRpb25bJ1pDX0NPTVBBVElCTEVfQVNQX1VSTCddID09IHRydWUpKSB7DQogICAgICAgIGlmIChpc3NldCgkX0dFVFsnaWQnXSkgfHwgaXNzZXQoJF9HRVRbJ2FsaWFzJ10pKSB7DQogICAgICAgICAgICBWaWV3UG9zdChHZXRWYXJzKCdpZCcsICdHRVQnKSwgR2V0VmFycygnYWxpYXMnLCAnR0VUJykpOw0KDQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0gZWxzZWlmIChpc3NldCgkX0dFVFsncGFnZSddKSB8fCBpc3NldCgkX0dFVFsnY2F0ZSddKSB8fCBpc3NldCgkX0dFVFsnYXV0aCddKSB8fCBpc3NldCgkX0dFVFsnZGF0ZSddKSB8fCBpc3NldCgkX0dFVFsndGFncyddKSkgew0KICAgICAgICAgICAgVmlld0xpc3QoR2V0VmFycygncGFnZScsICdHRVQnKSwgR2V0VmFycygnY2F0ZScsICdHRVQnKSwgR2V0VmFycygnYXV0aCcsICdHRVQnKSwgR2V0VmFycygnZGF0ZScsICdHRVQnKSwgR2V0VmFycygndGFncycsICdHRVQnKSk7DQoNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgICR6YnAtPlNob3dFcnJvcigyLCBfX0ZJTEVfXywgX19MSU5FX18pOw0KDQogICAgcmV0dXJuIGZhbHNlOw0KfQ0KDQovKioNCiAqIOaYvuekuuWIl+ihqOmhtemdoi4NCiAqDQogKiBAYXBpIEZpbHRlcl9QbHVnaW5fVmlld0xpc3RfQmVnaW4NCiAqIEBhcGkgRmlsdGVyX1BsdWdpbl9WaWV3TGlzdF9UZW1wbGF0ZQ0KICoNCiAqIEBwYXJhbSBpbnQgICAkcGFnZQ0KICogQHBhcmFtIG1peGVkICRjYXRlDQogKiBAcGFyYW0gbWl4ZWQgJGF1dGgNCiAqIEBwYXJhbSBtaXhlZCAkZGF0ZQ0KICogQHBhcmFtIG1peGVkICR0YWdzICAgICAgdGFnc+WIl+ihqA0KICogQHBhcmFtIGJvb2wgICRpc3Jld3JpdGUg5piv5ZCm5ZCv55SodXJscmV3cml0ZQ0KICoNCiAqIEB0aHJvd3MgRXhjZXB0aW9uDQogKg0KICogQHJldHVybiBzdHJpbmcNCiAqLw0KZnVuY3Rpb24gVmlld0xpc3QoJHBhZ2UsICRjYXRlLCAkYXV0aCwgJGRhdGUsICR0YWdzLCAkaXNyZXdyaXRlID0gZmFsc2UpDQp7DQogICAgZ2xvYmFsICR6YnA7DQoNCiAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9WaWV3TGlzdF9CZWdpbiddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAkZnBhcmdzID0gZnVuY19nZXRfYXJncygpOw0KICAgICAgICAkZnByZXR1cm4gPSBjYWxsX3VzZXJfZnVuY19hcnJheSgkZnBuYW1lLCAkZnBhcmdzKTsNCiAgICAgICAgaWYgKCRmcHNpZ25hbCA9PSBQTFVHSU5fRVhJVFNJR05BTF9SRVRVUk4pIHsNCiAgICAgICAgICAgICRmcHNpZ25hbCA9IFBMVUdJTl9FWElUU0lHTkFMX05PTkU7DQoNCiAgICAgICAgICAgIHJldHVybiAkZnByZXR1cm47DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAkdHlwZSA9ICdpbmRleCc7DQogICAgaWYgKCRjYXRlICE9PSBudWxsKSB7DQogICAgICAgICR0eXBlID0gJ2NhdGVnb3J5JzsNCiAgICB9DQoNCiAgICBpZiAoJGF1dGggIT09IG51bGwpIHsNCiAgICAgICAgJHR5cGUgPSAnYXV0aG9yJzsNCiAgICB9DQoNCiAgICBpZiAoJGRhdGUgIT09IG51bGwpIHsNCiAgICAgICAgJHR5cGUgPSAnZGF0ZSc7DQogICAgfQ0KDQogICAgaWYgKCR0YWdzICE9PSBudWxsKSB7DQogICAgICAgICR0eXBlID0gJ3RhZyc7DQogICAgfQ0KDQogICAgJGNhdGVnb3J5ID0gbnVsbDsNCiAgICAkYXV0aG9yID0gbnVsbDsNCiAgICAkZGF0ZXRpbWUgPSBudWxsOw0KICAgICR0YWcgPSBudWxsOw0KDQogICAgJHcgPSBhcnJheSgpOw0KICAgICR3W10gPSBhcnJheSgnPScsICdsb2dfSXNUb3AnLCAwKTsNCiAgICAkd1tdID0gYXJyYXkoJz0nLCAnbG9nX1N0YXR1cycsIDApOw0KDQogICAgJHBhZ2UgPSAoaW50KSAkcGFnZSA9PSAwID8gMSA6IChpbnQpICRwYWdlOw0KDQogICAgJGFydGljbGVzID0gYXJyYXkoKTsNCiAgICAkYXJ0aWNsZXNfdG9wID0gYXJyYXkoKTsNCg0KICAgIHN3aXRjaCAoJHR5cGUpIHsNCiAgICAvLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiAgICAgICAgY2FzZSAnaW5kZXgnOg0KICAgICAgICAgICAgJHBhZ2ViYXIgPSBuZXcgUGFnZWJhcigkemJwLT5vcHRpb25bJ1pDX0lOREVYX1JFR0VYJ10sIHRydWUsIHRydWUpOw0KICAgICAgICAgICAgJHBhZ2ViYXItPkNvdW50ID0gJHpicC0+Y2FjaGUtPm5vcm1hbF9hcnRpY2xlX251bXM7DQogICAgICAgICAgICAkdGVtcGxhdGUgPSAkemJwLT5vcHRpb25bJ1pDX0lOREVYX0RFRkFVTFRfVEVNUExBVEUnXTsNCiAgICAgICAgICAgIGlmICgkcGFnZSA9PSAxKSB7DQogICAgICAgICAgICAgICAgJHpicC0+dGl0bGUgPSAkemJwLT5zdWJuYW1lOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAkemJwLT50aXRsZSA9IHN0cl9yZXBsYWNlKCclbnVtJScsICRwYWdlLCAkemJwLT5sYW5nWydtc2cnXVsnbnVtYmVyX3BhZ2UnXSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBicmVhazsNCiAgICAvLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiAgICAgICAgY2FzZSAnY2F0ZWdvcnknOg0KICAgICAgICAgICAgJHBhZ2ViYXIgPSBuZXcgUGFnZWJhcigkemJwLT5vcHRpb25bJ1pDX0NBVEVHT1JZX1JFR0VYJ10pOw0KICAgICAgICAgICAgJGNhdGVnb3J5ID0gbmV3IENhdGVnb3J5KCk7DQoNCiAgICAgICAgICAgIGlmICghaXNfYXJyYXkoJGNhdGUpKSB7DQogICAgICAgICAgICAgICAgJGNhdGVJZCA9ICRjYXRlOw0KICAgICAgICAgICAgICAgICRjYXRlID0gYXJyYXkoKTsNCiAgICAgICAgICAgICAgICBpZiAoc3RycG9zKCR6YnAtPm9wdGlvblsnWkNfQ0FURUdPUllfUkVHRVgnXSwgJ3slaWQlfScpICE9PSBmYWxzZSkgew0KICAgICAgICAgICAgICAgICAgICAkY2F0ZVsnaWQnXSA9ICRjYXRlSWQ7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChzdHJwb3MoJHpicC0+b3B0aW9uWydaQ19DQVRFR09SWV9SRUdFWCddLCAneyVhbGlhcyV9JykgIT09IGZhbHNlKSB7DQogICAgICAgICAgICAgICAgICAgICRjYXRlWydhbGlhcyddID0gJGNhdGVJZDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoaXNzZXQoJGNhdGVbJ2lkJ10pKSB7DQogICAgICAgICAgICAgICAgJGNhdGVnb3J5ID0gJHpicC0+R2V0Q2F0ZWdvcnlCeUlEKCRjYXRlWydpZCddKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgJGNhdGVnb3J5ID0gJHpicC0+R2V0Q2F0ZWdvcnlCeUFsaWFzKCRjYXRlWydhbGlhcyddKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKCRjYXRlZ29yeS0+SUQgPT0gJycpIHsNCiAgICAgICAgICAgICAgICBpZiAoJGlzcmV3cml0ZSA9PSB0cnVlKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAkemJwLT5TaG93RXJyb3IoMiwgX19GSUxFX18sIF9fTElORV9fKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICgkcGFnZSA9PSAxKSB7DQogICAgICAgICAgICAgICAgJHpicC0+dGl0bGUgPSAkY2F0ZWdvcnktPk5hbWU7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICR6YnAtPnRpdGxlID0gJGNhdGVnb3J5LT5OYW1lIC4gJyAnIC4gc3RyX3JlcGxhY2UoJyVudW0lJywgJHBhZ2UsICR6YnAtPmxhbmdbJ21zZyddWydudW1iZXJfcGFnZSddKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAkdGVtcGxhdGUgPSAkY2F0ZWdvcnktPlRlbXBsYXRlOw0KDQogICAgICAgICAgICBpZiAoISR6YnAtPm9wdGlvblsnWkNfRElTUExBWV9TVUJDQVRFR09SWVMnXSkgew0KICAgICAgICAgICAgICAgICR3W10gPSBhcnJheSgnPScsICdsb2dfQ2F0ZUlEJywgJGNhdGVnb3J5LT5JRCk7DQogICAgICAgICAgICAgICAgJHBhZ2ViYXItPkNvdW50ID0gJGNhdGVnb3J5LT5Db3VudDsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgJGFyeXN1YmNhdGUgPSBhcnJheSgpOw0KICAgICAgICAgICAgICAgICRhcnlzdWJjYXRlW10gPSBhcnJheSgnbG9nX0NhdGVJRCcsICRjYXRlZ29yeS0+SUQpOw0KICAgICAgICAgICAgICAgIGZvcmVhY2ggKCR6YnAtPmNhdGVnb3JpZXNbJGNhdGVnb3J5LT5JRF0tPkNoaWxkcmVuQ2F0ZWdvcmllcyBhcyAkc3ViY2F0ZSkgew0KICAgICAgICAgICAgICAgICAgICAkYXJ5c3ViY2F0ZVtdID0gYXJyYXkoJ2xvZ19DYXRlSUQnLCAkc3ViY2F0ZS0+SUQpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAkd1tdID0gYXJyYXkoJ2FycmF5JywgJGFyeXN1YmNhdGUpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgJHBhZ2ViYXItPlVybFJ1bGUtPlJ1bGVzWyd7JWlkJX0nXSA9ICRjYXRlZ29yeS0+SUQ7DQogICAgICAgICAgICAgICAgJHBhZ2ViYXItPlVybFJ1bGUtPlJ1bGVzWyd7JWFsaWFzJX0nXSA9ICRjYXRlZ29yeS0+QWxpYXMgPT0gJycgPyByYXd1cmxlbmNvZGUoJGNhdGVnb3J5LT5OYW1lKSA6ICRjYXRlZ29yeS0+QWxpYXM7DQogICAgICAgICAgICBicmVhazsNCiAgICAvLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiAgICAgICAgY2FzZSAnYXV0aG9yJzoNCiAgICAgICAgICAgICRwYWdlYmFyID0gbmV3IFBhZ2ViYXIoJHpicC0+b3B0aW9uWydaQ19BVVRIT1JfUkVHRVgnXSk7DQogICAgICAgICAgICAkYXV0aG9yID0gbmV3IE1lbWJlcigpOw0KDQogICAgICAgICAgICBpZiAoIWlzX2FycmF5KCRhdXRoKSkgew0KICAgICAgICAgICAgICAgICRhdXRoSWQgPSAkYXV0aDsNCiAgICAgICAgICAgICAgICAkYXV0aCA9IGFycmF5KCk7DQogICAgICAgICAgICAgICAgaWYgKHN0cnBvcygkemJwLT5vcHRpb25bJ1pDX0FVVEhPUl9SRUdFWCddLCAneyVpZCV9JykgIT09IGZhbHNlKSB7DQogICAgICAgICAgICAgICAgICAgICRhdXRoWydpZCddID0gJGF1dGhJZDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKHN0cnBvcygkemJwLT5vcHRpb25bJ1pDX0FVVEhPUl9SRUdFWCddLCAneyVhbGlhcyV9JykgIT09IGZhbHNlKSB7DQogICAgICAgICAgICAgICAgICAgICRhdXRoWydhbGlhcyddID0gJGF1dGhJZDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoaXNzZXQoJGF1dGhbJ2lkJ10pKSB7DQogICAgICAgICAgICAgICAgLyoqIEB2YXIgTWVtYmVyICRhdXRob3IgKi8NCiAgICAgICAgICAgICAgICAkYXV0aG9yID0gJHpicC0+R2V0TWVtYmVyQnlJRCgkYXV0aFsnaWQnXSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIC8qKiBAdmFyIE1lbWJlciAkYXV0aG9yICovDQogICAgICAgICAgICAgICAgJGF1dGhvciA9ICR6YnAtPkdldE1lbWJlckJ5TmFtZU9yQWxpYXMoJGF1dGhbJ2FsaWFzJ10pOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoJGF1dGhvci0+SUQgPT0gJycpIHsNCiAgICAgICAgICAgICAgICBpZiAoJGlzcmV3cml0ZSkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgJHpicC0+U2hvd0Vycm9yKDIsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoJHBhZ2UgPT0gMSkgew0KICAgICAgICAgICAgICAgICR6YnAtPnRpdGxlID0gJGF1dGhvci0+U3RhdGljTmFtZTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgJHpicC0+dGl0bGUgPSAkYXV0aG9yLT5TdGF0aWNOYW1lIC4gJyAnIC4gc3RyX3JlcGxhY2UoJyVudW0lJywgJHBhZ2UsICR6YnAtPmxhbmdbJ21zZyddWydudW1iZXJfcGFnZSddKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAkdGVtcGxhdGUgPSAkYXV0aG9yLT5UZW1wbGF0ZTsNCiAgICAgICAgICAgICAgICAkd1tdID0gYXJyYXkoJz0nLCAnbG9nX0F1dGhvcklEJywgJGF1dGhvci0+SUQpOw0KICAgICAgICAgICAgICAgIC8vJHBhZ2ViYXItPkNvdW50ID0gJGF1dGhvci0+QXJ0aWNsZXM7DQogICAgICAgICAgICAgICAgJHBhZ2ViYXItPlVybFJ1bGUtPlJ1bGVzWyd7JWlkJX0nXSA9ICRhdXRob3ItPklEOw0KICAgICAgICAgICAgICAgICRwYWdlYmFyLT5VcmxSdWxlLT5SdWxlc1sneyVhbGlhcyV9J10gPSAkYXV0aG9yLT5BbGlhcyA9PSAnJyA/IHJhd3VybGVuY29kZSgkYXV0aG9yLT5OYW1lKSA6ICRhdXRob3ItPkFsaWFzOw0KICAgICAgICAgICAgYnJlYWs7DQogICAgLy8jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQogICAgICAgIGNhc2UgJ2RhdGUnOg0KICAgICAgICAgICAgJHBhZ2ViYXIgPSBuZXcgUGFnZWJhcigkemJwLT5vcHRpb25bJ1pDX0RBVEVfUkVHRVgnXSk7DQoNCiAgICAgICAgICAgIGlmICghaXNfYXJyYXkoJGRhdGUpKSB7DQogICAgICAgICAgICAgICAgJGRhdGV0aW1lID0gJGRhdGU7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICRkYXRldGltZSA9ICRkYXRlWydkYXRlJ107DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAkZGF0ZXJlZ2V4X3ltZCA9ICcvWzAtOV17MSw0fS1bMC05XXsxLDJ9LVswLTldezEsMn0vaSc7DQogICAgICAgICAgICAgICAgJGRhdGVyZWdleF95bSA9ICcvWzAtOV17MSw0fS1bMC05XXsxLDJ9L2knOw0KDQogICAgICAgICAgICBpZiAocHJlZ19tYXRjaCgkZGF0ZXJlZ2V4X3ltZCwgJGRhdGV0aW1lKSA9PSAwICYmIHByZWdfbWF0Y2goJGRhdGVyZWdleF95bSwgJGRhdGV0aW1lKSA9PSAwKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICRkYXRldGltZV90eHQgPSAkZGF0ZXRpbWU7DQogICAgICAgICAgICAgICAgJGRhdGV0aW1lID0gc3RydG90aW1lKCRkYXRldGltZSk7DQogICAgICAgICAgICBpZiAoJGRhdGV0aW1lID09IGZhbHNlKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAocHJlZ19tYXRjaCgkZGF0ZXJlZ2V4X3ltZCwgJGRhdGV0aW1lX3R4dCkgIT0gMCAmJiBpc3NldCgkemJwLT5sYW5nWydtc2cnXVsneWVhcl9tb250aF9kYXknXSkpIHsNCiAgICAgICAgICAgICAgICAkZGF0ZXRpdGxlID0gc3RyX3JlcGxhY2UoYXJyYXkoJyV5JScsICclbSUnLCAnJWQlJyksIGFycmF5KGRhdGUoJ1knLCAkZGF0ZXRpbWUpLCBkYXRlKCduJywgJGRhdGV0aW1lKSwgZGF0ZSgnaicsICRkYXRldGltZSkpLCAkemJwLT5sYW5nWydtc2cnXVsneWVhcl9tb250aF9kYXknXSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICRkYXRldGl0bGUgPSBzdHJfcmVwbGFjZShhcnJheSgnJXklJywgJyVtJScpLCBhcnJheShkYXRlKCdZJywgJGRhdGV0aW1lKSwgZGF0ZSgnbicsICRkYXRldGltZSkpLCAkemJwLT5sYW5nWydtc2cnXVsneWVhcl9tb250aCddKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKCRwYWdlID09IDEpIHsNCiAgICAgICAgICAgICAgICAkemJwLT50aXRsZSA9ICRkYXRldGl0bGU7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICR6YnAtPnRpdGxlID0gJGRhdGV0aXRsZSAuICcgJyAuIHN0cl9yZXBsYWNlKCclbnVtJScsICRwYWdlLCAkemJwLT5sYW5nWydtc2cnXVsnbnVtYmVyX3BhZ2UnXSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAkemJwLT5tb2R1bGVzYnlmaWxlbmFtZVsnY2FsZW5kYXInXS0+Q29udGVudCA9IE1vZHVsZUJ1aWxkZXI6OkNhbGVuZGFyKGRhdGUoJ1knLCAkZGF0ZXRpbWUpIC4gJy0nIC4gZGF0ZSgnbicsICRkYXRldGltZSkpOw0KDQogICAgICAgICAgICAgICAgJHRlbXBsYXRlID0gJHpicC0+b3B0aW9uWydaQ19JTkRFWF9ERUZBVUxUX1RFTVBMQVRFJ107DQoNCiAgICAgICAgICAgIGlmIChwcmVnX21hdGNoKCRkYXRlcmVnZXhfeW1kLCAkZGF0ZXRpbWVfdHh0KSAhPSAwKSB7DQogICAgICAgICAgICAgICAgJHdbXSA9IGFycmF5KCdCRVRXRUVOJywgJ2xvZ19Qb3N0VGltZScsICRkYXRldGltZSwgc3RydG90aW1lKCcrMSBkYXknLCAkZGF0ZXRpbWUpKTsNCiAgICAgICAgICAgICAgICAkcGFnZWJhci0+VXJsUnVsZS0+UnVsZXNbJ3slZGF0ZSV9J10gPSBkYXRlKCdZLW4taicsICRkYXRldGltZSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICR3W10gPSBhcnJheSgnQkVUV0VFTicsICdsb2dfUG9zdFRpbWUnLCAkZGF0ZXRpbWUsIHN0cnRvdGltZSgnKzEgbW9udGgnLCAkZGF0ZXRpbWUpKTsNCiAgICAgICAgICAgICAgICAkcGFnZWJhci0+VXJsUnVsZS0+UnVsZXNbJ3slZGF0ZSV9J10gPSBkYXRlKCdZLW4nLCAkZGF0ZXRpbWUpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgJGRhdGV0aW1lID0gTWV0YXM6OkNvbnZlcnRBcnJheShnZXRkYXRlKCRkYXRldGltZSkpOw0KICAgICAgICAgICAgYnJlYWs7DQogICAgLy8jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQogICAgICAgIGNhc2UgJ3RhZyc6DQogICAgICAgICAgICAkcGFnZWJhciA9IG5ldyBQYWdlYmFyKCR6YnAtPm9wdGlvblsnWkNfVEFHU19SRUdFWCddKTsNCiAgICAgICAgICAgICR0YWcgPSBuZXcgVGFnKCk7DQoNCiAgICAgICAgICAgIGlmICghaXNfYXJyYXkoJHRhZ3MpKSB7DQogICAgICAgICAgICAgICAgJHRhZ0lkID0gJHRhZ3M7DQogICAgICAgICAgICAgICAgJHRhZ3MgPSBhcnJheSgpOw0KICAgICAgICAgICAgICAgIGlmIChzdHJwb3MoJHpicC0+b3B0aW9uWydaQ19UQUdTX1JFR0VYJ10sICd7JWlkJX0nKSAhPT0gZmFsc2UpIHsNCiAgICAgICAgICAgICAgICAgICAgJHRhZ3NbJ2lkJ10gPSAkdGFnSWQ7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChzdHJwb3MoJHpicC0+b3B0aW9uWydaQ19UQUdTX1JFR0VYJ10sICd7JWFsaWFzJX0nKSAhPT0gZmFsc2UpIHsNCiAgICAgICAgICAgICAgICAgICAgJHRhZ3NbJ2FsaWFzJ10gPSAkdGFnSWQ7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKGlzc2V0KCR0YWdzWydpZCddKSkgew0KICAgICAgICAgICAgICAgICR0YWcgPSAkemJwLT5HZXRUYWdCeUlEKCR0YWdzWydpZCddKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgJHRhZyA9ICR6YnAtPkdldFRhZ0J5QWxpYXNPck5hbWUoJHRhZ3NbJ2FsaWFzJ10pOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoJHRhZy0+SUQgPT0gMCkgew0KICAgICAgICAgICAgICAgIGlmICgkaXNyZXdyaXRlID09IHRydWUpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICR6YnAtPlNob3dFcnJvcigyLCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoJHBhZ2UgPT0gMSkgew0KICAgICAgICAgICAgICAgICR6YnAtPnRpdGxlID0gJHRhZy0+TmFtZTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgJHpicC0+dGl0bGUgPSAkdGFnLT5OYW1lIC4gJyAnIC4gc3RyX3JlcGxhY2UoJyVudW0lJywgJHBhZ2UsICR6YnAtPmxhbmdbJ21zZyddWydudW1iZXJfcGFnZSddKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICR0ZW1wbGF0ZSA9ICR0YWctPlRlbXBsYXRlOw0KICAgICAgICAgICAgICAgICR3W10gPSBhcnJheSgnTElLRScsICdsb2dfVGFnJywgJyV7JyAuICR0YWctPklEIC4gJ30lJyk7DQogICAgICAgICAgICAgICAgJHBhZ2ViYXItPlVybFJ1bGUtPlJ1bGVzWyd7JWlkJX0nXSA9ICR0YWctPklEOw0KICAgICAgICAgICAgICAgICRwYWdlYmFyLT5VcmxSdWxlLT5SdWxlc1sneyVhbGlhcyV9J10gPSAkdGFnLT5BbGlhcyA9PSAnJyA/IHJhd3VybGVuY29kZSgkdGFnLT5OYW1lKSA6ICR0YWctPkFsaWFzOw0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgIGRlZmF1bHQ6DQogICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCdVbmtub3duIHR5cGUnKTsNCiAgICB9DQoNCiAgICAkcGFnZWJhci0+UGFnZUNvdW50ID0gJHpicC0+ZGlzcGxheWNvdW50Ow0KICAgICRwYWdlYmFyLT5QYWdlTm93ID0gJHBhZ2U7DQogICAgJHBhZ2ViYXItPlBhZ2VCYXJDb3VudCA9ICR6YnAtPnBhZ2ViYXJjb3VudDsNCiAgICAkcGFnZWJhci0+VXJsUnVsZS0+UnVsZXNbJ3slcGFnZSV9J10gPSAkcGFnZTsNCg0KICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1ZpZXdMaXN0X0NvcmUnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgJGZwbmFtZSgkdHlwZSwgJHBhZ2UsICRjYXRlZ29yeSwgJGF1dGhvciwgJGRhdGV0aW1lLCAkdGFnLCAkdywgJHBhZ2ViYXIsICR0ZW1wbGF0ZSk7DQogICAgfQ0KDQogICAgaWYgKCR6YnAtPm9wdGlvblsnWkNfTElTVE9OVE9QX1RVUk5PRkYnXSA9PSBmYWxzZSkgew0KICAgICAgICAkYXJ0aWNsZXNfdG9wX25vdG9yZGVyID0gJHpicC0+R2V0VG9wQXJ0aWNsZSgpOw0KICAgICAgICBmb3JlYWNoICgkYXJ0aWNsZXNfdG9wX25vdG9yZGVyIGFzICRhcnRpY2xlc190b3Bfbm90b3JkZXJfcG9zdCkgew0KICAgICAgICAgICAgaWYgKCRhcnRpY2xlc190b3Bfbm90b3JkZXJfcG9zdC0+VG9wVHlwZSA9PSAnZ2xvYmFsJykgew0KICAgICAgICAgICAgICAgICRhcnRpY2xlc190b3BbXSA9ICRhcnRpY2xlc190b3Bfbm90b3JkZXJfcG9zdDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIGlmICgkdHlwZSA9PSAnaW5kZXgnICYmICRwYWdlID09IDEpIHsNCiAgICAgICAgICAgIGZvcmVhY2ggKCRhcnRpY2xlc190b3Bfbm90b3JkZXIgYXMgJGFydGljbGVzX3RvcF9ub3RvcmRlcl9wb3N0KSB7DQogICAgICAgICAgICAgICAgaWYgKCRhcnRpY2xlc190b3Bfbm90b3JkZXJfcG9zdC0+VG9wVHlwZSA9PSAnaW5kZXgnKSB7DQogICAgICAgICAgICAgICAgICAgICRhcnRpY2xlc190b3BbXSA9ICRhcnRpY2xlc190b3Bfbm90b3JkZXJfcG9zdDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoJHR5cGUgPT0gJ2NhdGVnb3J5Jykgew0KICAgICAgICAgICAgZm9yZWFjaCAoJGFydGljbGVzX3RvcF9ub3RvcmRlciBhcyAkYXJ0aWNsZXNfdG9wX25vdG9yZGVyX3Bvc3QpIHsNCiAgICAgICAgICAgICAgICBpZiAoJGFydGljbGVzX3RvcF9ub3RvcmRlcl9wb3N0LT5Ub3BUeXBlID09ICdjYXRlZ29yeScgJiYgJGFydGljbGVzX3RvcF9ub3RvcmRlcl9wb3N0LT5DYXRlSUQgPT0gJGNhdGVnb3J5LT5JRCkgew0KICAgICAgICAgICAgICAgICAgICAkYXJ0aWNsZXNfdG9wW10gPSAkYXJ0aWNsZXNfdG9wX25vdG9yZGVyX3Bvc3Q7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KDQogICAgJHNlbGVjdCA9ICcqJzsNCiAgICAkb3JkZXIgPSBhcnJheSgnbG9nX1Bvc3RUaW1lJyA9PiAnREVTQycpOw0KICAgICRsaW1pdCA9IGFycmF5KCgkcGFnZWJhci0+UGFnZU5vdyAtIDEpICogJHBhZ2ViYXItPlBhZ2VDb3VudCwgJHBhZ2ViYXItPlBhZ2VDb3VudCk7DQogICAgJG9wdGlvbiA9IGFycmF5KCdwYWdlYmFyJyA9PiAkcGFnZWJhcik7DQoNCiAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9MYXJnZURhdGFfQXJ0aWNsZSddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAkZnByZXR1cm4gPSAkZnBuYW1lKCRzZWxlY3QsICR3LCAkb3JkZXIsICRsaW1pdCwgJG9wdGlvbiwgJHR5cGUpOw0KICAgIH0NCg0KICAgICRhcnRpY2xlcyA9ICR6YnAtPkdldEFydGljbGVMaXN0KA0KICAgICAgICAkc2VsZWN0LA0KICAgICAgICAkdywNCiAgICAgICAgJG9yZGVyLA0KICAgICAgICAkbGltaXQsDQogICAgICAgICRvcHRpb24sDQogICAgICAgIHRydWUNCiAgICApOw0KDQogICAgaWYgKGNvdW50KCRhcnRpY2xlcykgPD0gMCAmJiAkcGFnZSA+IDEpIHsNCiAgICAgICAgJHpicC0+U2hvd0Vycm9yKDIsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgfQ0KDQogICAgJHpicC0+dGVtcGxhdGUtPlNldFRhZ3MoJ3RpdGxlJywgJHpicC0+dGl0bGUpOw0KICAgICR6YnAtPnRlbXBsYXRlLT5TZXRUYWdzKCdhcnRpY2xlcycsIGFycmF5X21lcmdlKCRhcnRpY2xlc190b3AsICRhcnRpY2xlcykpOw0KICAgIGlmICgkcGFnZWJhci0+UGFnZUFsbCA9PSAwKSB7DQogICAgICAgICRwYWdlYmFyID0gbnVsbDsNCiAgICB9DQoNCiAgICAkemJwLT50ZW1wbGF0ZS0+U2V0VGFncygncGFnZWJhcicsICRwYWdlYmFyKTsNCiAgICAkemJwLT50ZW1wbGF0ZS0+U2V0VGFncygndHlwZScsICR0eXBlKTsNCiAgICAkemJwLT50ZW1wbGF0ZS0+U2V0VGFncygncGFnZScsICRwYWdlKTsNCg0KICAgICR6YnAtPnRlbXBsYXRlLT5TZXRUYWdzKCdkYXRlJywgJGRhdGV0aW1lKTsNCiAgICAkemJwLT50ZW1wbGF0ZS0+U2V0VGFncygndGFnJywgJHRhZyk7DQogICAgJHpicC0+dGVtcGxhdGUtPlNldFRhZ3MoJ2F1dGhvcicsICRhdXRob3IpOw0KICAgICR6YnAtPnRlbXBsYXRlLT5TZXRUYWdzKCdjYXRlZ29yeScsICRjYXRlZ29yeSk7DQoNCiAgICBpZiAoJHpicC0+dGVtcGxhdGUtPmhhc1RlbXBsYXRlKCR0ZW1wbGF0ZSkpIHsNCiAgICAgICAgJHpicC0+dGVtcGxhdGUtPlNldFRlbXBsYXRlKCR0ZW1wbGF0ZSk7DQogICAgfSBlbHNlIHsNCiAgICAgICAgJHpicC0+dGVtcGxhdGUtPlNldFRlbXBsYXRlKCdpbmRleCcpOw0KICAgIH0NCg0KICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1ZpZXdMaXN0X1RlbXBsYXRlJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICRmcHJldHVybiA9ICRmcG5hbWUoJHpicC0+dGVtcGxhdGUpOw0KICAgICAgICBpZiAoJGZwc2lnbmFsID09IFBMVUdJTl9FWElUU0lHTkFMX1JFVFVSTikgew0KICAgICAgICAgICAgJGZwc2lnbmFsID0gUExVR0lOX0VYSVRTSUdOQUxfTk9ORTsNCg0KICAgICAgICAgICAgcmV0dXJuICRmcHJldHVybjsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgICR6YnAtPnRlbXBsYXRlLT5EaXNwbGF5KCk7DQoNCiAgICByZXR1cm4gdHJ1ZTsNCn0NCg0KLyoqDQogKiDmmL7npLrmlofnq6AuDQogKg0KICogQHBhcmFtIGFycmF5fGludHxzdHJpbmcgJG9iamVjdCAgICAgICAgIOaWh+eroElELyBJRC/liKvlkI3lr7nosaENCiAqIEBwYXJhbSBzdHJpbmcgICAgICAgICAgICR0aGVTZWNvbmRQYXJhbSDvvIjlpoLmnpzmnInnmoTor53vvInmlofnq6DliKvlkI0NCiAqIEBwYXJhbSBib29sICAgICAgICAgICAgICRlbmFibGVSZXdyaXRlICDmmK/lkKblkK/nlKh1cmxyZXdyaXRlDQogKg0KICogQHRocm93cyBFeGNlcHRpb24NCiAqDQogKiBAcmV0dXJuIHN0cmluZw0KICovDQpmdW5jdGlvbiBWaWV3UG9zdCgkb2JqZWN0LCAkdGhlU2Vjb25kUGFyYW0sICRlbmFibGVSZXdyaXRlID0gZmFsc2UpDQp7DQogICAgZ2xvYmFsICR6YnA7DQoNCiAgICBpZiAoaXNfYXJyYXkoJG9iamVjdCkpIHsNCiAgICAgICAgJGlkID0gaXNzZXQoJG9iamVjdFsnaWQnXSkgPyAkb2JqZWN0WydpZCddIDogbnVsbDsNCiAgICAgICAgJGFsaWFzID0gaXNzZXQoJG9iamVjdFsnYWxpYXMnXSkgPyAkb2JqZWN0WydhbGlhcyddIDogbnVsbDsNCiAgICB9IGVsc2Ugew0KICAgICAgICAkaWQgPSAkb2JqZWN0Ow0KICAgICAgICAkYWxpYXMgPSAkdGhlU2Vjb25kUGFyYW07DQogICAgICAgICRvYmplY3QgPSBhcnJheSgnaWQnID0+ICRvYmplY3QpOw0KICAgICAgICAkb2JqZWN0WzBdID0gJGlkOw0KICAgICAgICAkb2JqZWN0WydpZCddID0gJGlkOw0KICAgIH0NCg0KICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1ZpZXdQb3N0X0JlZ2luJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICRmcGFyZ3MgPSBmdW5jX2dldF9hcmdzKCk7DQogICAgICAgICRmcGFyZ3NbMF0gPSAkaWQ7DQogICAgICAgICRmcGFyZ3NbMV0gPSAkYWxpYXM7DQogICAgICAgICRmcHJldHVybiA9IGNhbGxfdXNlcl9mdW5jX2FycmF5KCRmcG5hbWUsICRmcGFyZ3MpOw0KICAgICAgICBpZiAoJGZwc2lnbmFsID09IFBMVUdJTl9FWElUU0lHTkFMX1JFVFVSTikgew0KICAgICAgICAgICAgJGZwc2lnbmFsID0gUExVR0lOX0VYSVRTSUdOQUxfTk9ORTsNCg0KICAgICAgICAgICAgcmV0dXJuICRmcHJldHVybjsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgICRzZWxlY3QgPSAnKic7DQogICAgJHcgPSBhcnJheSgpOw0KICAgICRvcmRlciA9IG51bGw7DQogICAgJGxpbWl0ID0gMTsNCiAgICAkb3B0aW9uID0gbnVsbDsNCg0KICAgIGlmICgkaWQgIT09IG51bGwpIHsNCiAgICAgICAgaWYgKGZ1bmN0aW9uX2V4aXN0cygnY3R5cGVfZGlnaXQnKSAmJiAhY3R5cGVfZGlnaXQoKHN0cmluZykgJGlkKSkgew0KICAgICAgICAgICAgJHpicC0+U2hvd0Vycm9yKDMsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgIH0NCg0KICAgICAgICAkd1tdID0gYXJyYXkoJz0nLCAnbG9nX0lEJywgJGlkKTsNCiAgICB9IGVsc2VpZiAoJGFsaWFzICE9PSBudWxsKSB7DQogICAgICAgIGlmICgkemJwLT5vcHRpb25bJ1pDX1BPU1RfQUxJQVNfVVNFX0lEX05PVF9USVRMRSddID09IGZhbHNlKSB7DQogICAgICAgICAgICAkd1tdID0gYXJyYXkoJ2FycmF5JywgYXJyYXkoYXJyYXkoJ2xvZ19BbGlhcycsICRhbGlhcyksIGFycmF5KCdsb2dfVGl0bGUnLCAkYWxpYXMpKSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAkd1tdID0gYXJyYXkoJ2FycmF5JywgYXJyYXkoYXJyYXkoJ2xvZ19BbGlhcycsICRhbGlhcyksIGFycmF5KCdsb2dfSUQnLCAkYWxpYXMpKSk7DQogICAgICAgIH0NCiAgICB9IGVsc2Ugew0KICAgICAgICAkemJwLT5TaG93RXJyb3IoMiwgX19GSUxFX18sIF9fTElORV9fKTsNCiAgICAgICAgZXhpdDsNCiAgICB9DQoNCiAgICBpZiAoISgkemJwLT5DaGVja1JpZ2h0cygnQXJ0aWNsZUFsbCcpICYmICR6YnAtPkNoZWNrUmlnaHRzKCdQYWdlQWxsJykpKSB7DQogICAgICAgICR3W10gPSBhcnJheSgnPScsICdsb2dfU3RhdHVzJywgMCk7DQogICAgfQ0KDQogICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fVmlld1Bvc3RfQ29yZSddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAkZnBuYW1lKCRzZWxlY3QsICR3LCAkb3JkZXIsICRsaW1pdCwgJG9wdGlvbik7DQogICAgfQ0KDQogICAgJGFydGljbGVzID0gJHpicC0+R2V0UG9zdExpc3QoJHNlbGVjdCwgJHcsICRvcmRlciwgJGxpbWl0LCAkb3B0aW9uKTsNCiAgICBpZiAoY291bnQoJGFydGljbGVzKSA9PSAwKSB7DQogICAgICAgIGlmICgkZW5hYmxlUmV3cml0ZSA9PSB0cnVlKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAkemJwLT5TaG93RXJyb3IoMiwgX19GSUxFX18sIF9fTElORV9fKTsNCiAgICB9DQoNCiAgICAkYXJ0aWNsZSA9ICRhcnRpY2xlc1swXTsNCg0KICAgIGlmICgkZW5hYmxlUmV3cml0ZSAmJiAhKHN0cmlwb3ModXJsZGVjb2RlKCRhcnRpY2xlLT5VcmwpLCAkb2JqZWN0WzBdKSAhPT0gZmFsc2UpKSB7DQogICAgICAgICR6YnAtPlNob3dFcnJvcigyLCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgICAgICBleGl0Ow0KICAgIH0NCg0KICAgIGlmICgkYXJ0aWNsZS0+VHlwZSA9PSAwKSB7DQogICAgICAgICR6YnAtPkxvYWRUYWdzQnlJRFN0cmluZygkYXJ0aWNsZS0+VGFnKTsNCiAgICB9DQoNCiAgICBpZiAoaXNzZXQoJHpicC0+b3B0aW9uWydaQ19WSUVXTlVNU19UVVJOT0ZGJ10pICYmICR6YnAtPm9wdGlvblsnWkNfVklFV05VTVNfVFVSTk9GRiddID09IGZhbHNlKSB7DQogICAgICAgICRhcnRpY2xlLT5WaWV3TnVtcyArPSAxOw0KICAgICAgICAkc3FsID0gJHpicC0+ZGItPnNxbC0+VXBkYXRlKCR6YnAtPnRhYmxlWydQb3N0J10sIGFycmF5KCdsb2dfVmlld051bXMnID0+ICRhcnRpY2xlLT5WaWV3TnVtcyksIGFycmF5KGFycmF5KCc9JywgJ2xvZ19JRCcsICRhcnRpY2xlLT5JRCkpKTsNCiAgICAgICAgJHpicC0+ZGItPlVwZGF0ZSgkc3FsKTsNCiAgICB9DQoNCiAgICAkcGFnZWJhciA9IG5ldyBQYWdlYmFyKCdqYXZhc2NyaXB0OnpicC5jb21tZW50LmdldChcJycgLiAkYXJ0aWNsZS0+SUQgLiAnXCcsXCd7JXBhZ2UlfVwnKTsnLCBmYWxzZSk7DQogICAgJHBhZ2ViYXItPlBhZ2VDb3VudCA9ICR6YnAtPmNvbW1lbnRkaXNwbGF5Y291bnQ7DQogICAgJHBhZ2ViYXItPlBhZ2VOb3cgPSAxOw0KICAgICRwYWdlYmFyLT5QYWdlQmFyQ291bnQgPSAkemJwLT5wYWdlYmFyY291bnQ7DQogICAgLy8kcGFnZWJhci0+Q291bnQgPSAkYXJ0aWNsZS0+Q29tbU51bXM7DQoNCiAgICBpZiAoJHpicC0+b3B0aW9uWydaQ19DT01NRU5UX1RVUk5PRkYnXSkgew0KICAgICAgICAkYXJ0aWNsZS0+SXNMb2NrID0gdHJ1ZTsNCiAgICB9DQoNCiAgICAkY29tbWVudHMgPSBhcnJheSgpOw0KDQogICAgaWYgKCEkYXJ0aWNsZS0+SXNMb2NrICYmICR6YnAtPnNvY2lhbGNvbW1lbnQgPT0gbnVsbCkgew0KICAgICAgICAkY29tbWVudHMgPSAkemJwLT5HZXRDb21tZW50TGlzdCgNCiAgICAgICAgICAgICcqJywNCiAgICAgICAgICAgIGFycmF5KA0KICAgICAgICAgICAgICAgIGFycmF5KCc9JywgJ2NvbW1fTG9nSUQnLCAkYXJ0aWNsZS0+SUQpLA0KICAgICAgICAgICAgICAgIGFycmF5KCc9JywgJ2NvbW1fUm9vdElEJywgMCksDQogICAgICAgICAgICAgICAgYXJyYXkoJz0nLCAnY29tbV9Jc0NoZWNraW5nJywgMCksDQogICAgICAgICAgICApLA0KICAgICAgICAgICAgYXJyYXkoJ2NvbW1fSUQnID0+ICgkemJwLT5vcHRpb25bJ1pDX0NPTU1FTlRfUkVWRVJTRV9PUkRFUiddID8gJ0RFU0MnIDogJ0FTQycpKSwNCiAgICAgICAgICAgIGFycmF5KCgkcGFnZWJhci0+UGFnZU5vdyAtIDEpICogJHBhZ2ViYXItPlBhZ2VDb3VudCwgJHBhZ2ViYXItPlBhZ2VDb3VudCksDQogICAgICAgICAgICBhcnJheSgncGFnZWJhcicgPT4gJHBhZ2ViYXIpDQogICAgICAgICk7DQogICAgICAgICRyb290aWQgPSBhcnJheSgpOw0KICAgICAgICBmb3JlYWNoICgkY29tbWVudHMgYXMgJiRjb21tZW50KSB7DQogICAgICAgICAgICAkcm9vdGlkW10gPSAkY29tbWVudC0+SUQ7DQogICAgICAgIH0NCiAgICAgICAgJGNvbW1lbnRzMiA9ICR6YnAtPkdldENvbW1lbnRMaXN0KA0KICAgICAgICAgICAgJyonLA0KICAgICAgICAgICAgYXJyYXkoDQogICAgICAgICAgICAgICAgYXJyYXkoJz0nLCAnY29tbV9Mb2dJRCcsICRhcnRpY2xlLT5JRCksDQogICAgICAgICAgICAgICAgYXJyYXkoJ0lOJywgJ2NvbW1fUm9vdElEJywgJHJvb3RpZCksDQogICAgICAgICAgICAgICAgYXJyYXkoJz0nLCAnY29tbV9Jc0NoZWNraW5nJywgMCksDQogICAgICAgICAgICApLA0KICAgICAgICAgICAgYXJyYXkoJ2NvbW1fSUQnID0+ICgkemJwLT5vcHRpb25bJ1pDX0NPTU1FTlRfUkVWRVJTRV9PUkRFUiddID8gJ0RFU0MnIDogJ0FTQycpKSwNCiAgICAgICAgICAgIG51bGwsDQogICAgICAgICAgICBudWxsDQogICAgICAgICk7DQogICAgICAgICRmbG9vcmlkID0gKCRwYWdlYmFyLT5QYWdlTm93IC0gMSkgKiAkcGFnZWJhci0+UGFnZUNvdW50Ow0KICAgICAgICBmb3JlYWNoICgkY29tbWVudHMgYXMgJiRjb21tZW50KSB7DQogICAgICAgICAgICAkZmxvb3JpZCArPSAxOw0KICAgICAgICAgICAgJGNvbW1lbnQtPkZsb29ySUQgPSAkZmxvb3JpZDsNCiAgICAgICAgICAgICRjb21tZW50LT5Db250ZW50ID0gRm9ybWF0U3RyaW5nKCRjb21tZW50LT5Db250ZW50LCAnW2VudGVyXScpIC4gJzxsYWJlbCBpZD0iQWpheENvbW1lbnQnIC4gJGNvbW1lbnQtPklEIC4gJyI+PC9sYWJlbD4nOw0KICAgICAgICB9DQogICAgICAgIGZvcmVhY2ggKCRjb21tZW50czIgYXMgJiRjb21tZW50KSB7DQogICAgICAgICAgICAkY29tbWVudC0+Q29udGVudCA9IEZvcm1hdFN0cmluZygkY29tbWVudC0+Q29udGVudCwgJ1tlbnRlcl0nKSAuICc8bGFiZWwgaWQ9IkFqYXhDb21tZW50JyAuICRjb21tZW50LT5JRCAuICciPjwvbGFiZWw+JzsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgICR6YnAtPnRlbXBsYXRlLT5TZXRUYWdzKCd0aXRsZScsICgkYXJ0aWNsZS0+U3RhdHVzID09IDAgPyAnJyA6ICdbJyAuICR6YnAtPmxhbmdbJ3Bvc3Rfc3RhdHVzX25hbWUnXVskYXJ0aWNsZS0+U3RhdHVzXSAuICddJykgLiAkYXJ0aWNsZS0+VGl0bGUpOw0KICAgICR6YnAtPnRlbXBsYXRlLT5TZXRUYWdzKCdhcnRpY2xlJywgJGFydGljbGUpOw0KICAgICR6YnAtPnRlbXBsYXRlLT5TZXRUYWdzKCd0eXBlJywgJGFydGljbGUtPlR5cGVOYW1lKTsNCiAgICAkemJwLT50ZW1wbGF0ZS0+U2V0VGFncygncGFnZScsIDEpOw0KICAgIGlmICgkcGFnZWJhci0+UGFnZUFsbCA9PSAwIHx8ICRwYWdlYmFyLT5QYWdlQWxsID09IDEpIHsNCiAgICAgICAgJHBhZ2ViYXIgPSBudWxsOw0KICAgIH0NCg0KICAgICR6YnAtPnRlbXBsYXRlLT5TZXRUYWdzKCdwYWdlYmFyJywgJHBhZ2ViYXIpOw0KICAgICR6YnAtPnRlbXBsYXRlLT5TZXRUYWdzKCdjb21tZW50cycsICRjb21tZW50cyk7DQoNCiAgICBpZiAoJHpicC0+dGVtcGxhdGUtPmhhc1RlbXBsYXRlKCRhcnRpY2xlLT5UZW1wbGF0ZSkpIHsNCiAgICAgICAgJHpicC0+dGVtcGxhdGUtPlNldFRlbXBsYXRlKCRhcnRpY2xlLT5UZW1wbGF0ZSk7DQogICAgfSBlbHNlIHsNCiAgICAgICAgJHpicC0+dGVtcGxhdGUtPlNldFRlbXBsYXRlKCdzaW5nbGUnKTsNCiAgICB9DQoNCiAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9WaWV3UG9zdF9UZW1wbGF0ZSddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAkZnByZXR1cm4gPSAkZnBuYW1lKCR6YnAtPnRlbXBsYXRlKTsNCiAgICAgICAgaWYgKCRmcHNpZ25hbCA9PSBQTFVHSU5fRVhJVFNJR05BTF9SRVRVUk4pIHsNCiAgICAgICAgICAgICRmcHNpZ25hbCA9IFBMVUdJTl9FWElUU0lHTkFMX05PTkU7DQoNCiAgICAgICAgICAgIHJldHVybiAkZnByZXR1cm47DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAkemJwLT50ZW1wbGF0ZS0+RGlzcGxheSgpOw0KDQogICAgcmV0dXJuIHRydWU7DQp9DQoNCi8qKg0KICog5pi+56S65paH56ug5LiL6K+E6K665YiX6KGoLg0KICoNCiAqIEBwYXJhbSBpbnQgJHBvc3RpZCDmlofnq6BJRA0KICogQHBhcmFtIGludCAkcGFnZSAgIOmhteaVsA0KICoNCiAqIEB0aHJvd3MgRXhjZXB0aW9uDQogKg0KICogQHJldHVybiBib29sDQogKi8NCmZ1bmN0aW9uIFZpZXdDb21tZW50cygkcG9zdGlkLCAkcGFnZSkNCnsNCiAgICBnbG9iYWwgJHpicDsNCg0KICAgICRwb3N0ID0gbmV3IFBvc3QoKTsNCiAgICAkcG9zdC0+TG9hZEluZm9CeUlEKCRwb3N0aWQpOw0KICAgICRwYWdlID0gJHBhZ2UgPT0gMCA/IDEgOiAkcGFnZTsNCiAgICAkdGVtcGxhdGUgPSAnY29tbWVudHMnOw0KDQogICAgJHBhZ2ViYXIgPSBuZXcgUGFnZWJhcignamF2YXNjcmlwdDp6YnAuY29tbWVudC5nZXQoXCcnIC4gJHBvc3QtPklEIC4gJ1wnLFwneyVwYWdlJX1cJyk7Jyk7DQogICAgJHBhZ2ViYXItPlBhZ2VDb3VudCA9ICR6YnAtPmNvbW1lbnRkaXNwbGF5Y291bnQ7DQogICAgJHBhZ2ViYXItPlBhZ2VOb3cgPSAkcGFnZTsNCiAgICAkcGFnZWJhci0+UGFnZUJhckNvdW50ID0gJHpicC0+cGFnZWJhcmNvdW50Ow0KICAgIC8vJHBhZ2ViYXItPkNvdW50ID0gJHBvc3QtPkNvbW1OdW1zOw0KDQogICAgJGNvbW1lbnRzID0gYXJyYXkoKTsNCg0KICAgICRjb21tZW50cyA9ICR6YnAtPkdldENvbW1lbnRMaXN0KA0KICAgICAgICAnKicsDQogICAgICAgIGFycmF5KA0KICAgICAgICAgICAgYXJyYXkoJz0nLCAnY29tbV9Mb2dJRCcsICRwb3N0LT5JRCksDQogICAgICAgICAgICBhcnJheSgnPScsICdjb21tX1Jvb3RJRCcsIDApLA0KICAgICAgICAgICAgYXJyYXkoJz0nLCAnY29tbV9Jc0NoZWNraW5nJywgMCksDQogICAgICAgICksDQogICAgICAgIGFycmF5KCdjb21tX0lEJyA9PiAoJHpicC0+b3B0aW9uWydaQ19DT01NRU5UX1JFVkVSU0VfT1JERVInXSA/ICdERVNDJyA6ICdBU0MnKSksDQogICAgICAgIGFycmF5KCgkcGFnZWJhci0+UGFnZU5vdyAtIDEpICogJHBhZ2ViYXItPlBhZ2VDb3VudCwgJHBhZ2ViYXItPlBhZ2VDb3VudCksDQogICAgICAgIGFycmF5KCdwYWdlYmFyJyA9PiAkcGFnZWJhcikNCiAgICApOw0KICAgICRyb290aWQgPSBhcnJheSgpOw0KICAgIGZvcmVhY2ggKCRjb21tZW50cyBhcyAkY29tbWVudCkgew0KICAgICAgICAkcm9vdGlkW10gPSBhcnJheSgnY29tbV9Sb290SUQnLCAkY29tbWVudC0+SUQpOw0KICAgIH0NCiAgICAkY29tbWVudHMyID0gJHpicC0+R2V0Q29tbWVudExpc3QoDQogICAgICAgICcqJywNCiAgICAgICAgYXJyYXkoDQogICAgICAgICAgICBhcnJheSgnPScsICdjb21tX0xvZ0lEJywgJHBvc3QtPklEKSwNCiAgICAgICAgICAgIGFycmF5KCdhcnJheScsICRyb290aWQpLA0KICAgICAgICAgICAgYXJyYXkoJz0nLCAnY29tbV9Jc0NoZWNraW5nJywgMCksDQogICAgICAgICksDQogICAgICAgIGFycmF5KCdjb21tX0lEJyA9PiAoJHpicC0+b3B0aW9uWydaQ19DT01NRU5UX1JFVkVSU0VfT1JERVInXSA/ICdERVNDJyA6ICdBU0MnKSksDQogICAgICAgIG51bGwsDQogICAgICAgIG51bGwNCiAgICApOw0KDQogICAgJGZsb29yaWQgPSAoJHBhZ2ViYXItPlBhZ2VOb3cgLSAxKSAqICRwYWdlYmFyLT5QYWdlQ291bnQ7DQogICAgZm9yZWFjaCAoJGNvbW1lbnRzIGFzICYkY29tbWVudCkgew0KICAgICAgICAkZmxvb3JpZCArPSAxOw0KICAgICAgICAkY29tbWVudC0+Rmxvb3JJRCA9ICRmbG9vcmlkOw0KICAgICAgICAkY29tbWVudC0+Q29udGVudCA9IEZvcm1hdFN0cmluZygkY29tbWVudC0+Q29udGVudCwgJ1tlbnRlcl0nKSAuICc8bGFiZWwgaWQ9IkFqYXhDb21tZW50JyAuICRjb21tZW50LT5JRCAuICciPjwvbGFiZWw+JzsNCiAgICB9DQogICAgZm9yZWFjaCAoJGNvbW1lbnRzMiBhcyAmJGNvbW1lbnQpIHsNCiAgICAgICAgJGNvbW1lbnQtPkNvbnRlbnQgPSBGb3JtYXRTdHJpbmcoJGNvbW1lbnQtPkNvbnRlbnQsICdbZW50ZXJdJykgLiAnPGxhYmVsIGlkPSJBamF4Q29tbWVudCcgLiAkY29tbWVudC0+SUQgLiAnIj48L2xhYmVsPic7DQogICAgfQ0KDQogICAgJHpicC0+dGVtcGxhdGUtPlNldFRhZ3MoJ3RpdGxlJywgJHpicC0+dGl0bGUpOw0KICAgICR6YnAtPnRlbXBsYXRlLT5TZXRUYWdzKCdhcnRpY2xlJywgJHBvc3QpOw0KICAgICR6YnAtPnRlbXBsYXRlLT5TZXRUYWdzKCd0eXBlJywgJ2NvbW1lbnQnKTsNCiAgICAkemJwLT50ZW1wbGF0ZS0+U2V0VGFncygncGFnZScsICRwYWdlKTsNCiAgICBpZiAoJHBhZ2ViYXItPlBhZ2VBbGwgPT0gMSkgew0KICAgICAgICAkcGFnZWJhciA9IG51bGw7DQogICAgfQ0KDQogICAgJHpicC0+dGVtcGxhdGUtPlNldFRhZ3MoJ3BhZ2ViYXInLCAkcGFnZWJhcik7DQogICAgJHpicC0+dGVtcGxhdGUtPlNldFRhZ3MoJ2NvbW1lbnRzJywgJGNvbW1lbnRzKTsNCg0KICAgICR6YnAtPnRlbXBsYXRlLT5TZXRUZW1wbGF0ZSgkdGVtcGxhdGUpOw0KDQogICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fVmlld0NvbW1lbnRzX1RlbXBsYXRlJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICRmcHJldHVybiA9ICRmcG5hbWUoJHpicC0+dGVtcGxhdGUpOw0KICAgIH0NCg0KICAgICRzID0gJHpicC0+dGVtcGxhdGUtPk91dHB1dCgpOw0KDQogICAgJGEgPSBleHBsb2RlKCc8bGFiZWwgaWQ9IkFqYXhDb21tZW50QmVnaW4iPjwvbGFiZWw+JywgJHMpOw0KICAgICRzID0gJGFbMV07DQogICAgJGEgPSBleHBsb2RlKCc8bGFiZWwgaWQ9IkFqYXhDb21tZW50RW5kIj48L2xhYmVsPicsICRzKTsNCiAgICAkcyA9ICRhWzBdOw0KDQogICAgZWNobyAkczsNCg0KICAgIHJldHVybiB0cnVlOw0KfQ0KDQovKioNCiAqIOaYvuekuuivhOiuui4NCiAqDQogKiBAcGFyYW0gaW50ICRpZCDor4TorrpJRA0KICoNCiAqIEB0aHJvd3MgRXhjZXB0aW9uDQogKg0KICogQHJldHVybiBib29sDQogKi8NCmZ1bmN0aW9uIFZpZXdDb21tZW50KCRpZCkNCnsNCiAgICBnbG9iYWwgJHpicDsNCg0KICAgICR0ZW1wbGF0ZSA9ICdjb21tZW50JzsNCiAgICAvKiogQHZhciBDb21tZW50ICRjb21tZW50ICovDQogICAgJGNvbW1lbnQgPSAkemJwLT5HZXRDb21tZW50QnlJRCgkaWQpOw0KICAgICRwb3N0ID0gbmV3IFBvc3QoKTsNCiAgICAkcG9zdC0+TG9hZEluZm9CeUlEKCRjb21tZW50LT5Mb2dJRCk7DQoNCiAgICAkY29tbWVudC0+Q29udGVudCA9IEZvcm1hdFN0cmluZyhodG1sc3BlY2lhbGNoYXJzKCRjb21tZW50LT5Db250ZW50KSwgJ1tlbnRlcl0nKSAuICc8bGFiZWwgaWQ9IkFqYXhDb21tZW50JyAuICRjb21tZW50LT5JRCAuICciPjwvbGFiZWw+JzsNCg0KICAgICR6YnAtPnRlbXBsYXRlLT5TZXRUYWdzKCd0aXRsZScsICR6YnAtPnRpdGxlKTsNCiAgICAkemJwLT50ZW1wbGF0ZS0+U2V0VGFncygnY29tbWVudCcsICRjb21tZW50KTsNCiAgICAkemJwLT50ZW1wbGF0ZS0+U2V0VGFncygnYXJ0aWNsZScsICRwb3N0KTsNCiAgICAkemJwLT50ZW1wbGF0ZS0+U2V0VGFncygndHlwZScsICdjb21tZW50Jyk7DQogICAgJHpicC0+dGVtcGxhdGUtPlNldFRhZ3MoJ3BhZ2UnLCAxKTsNCiAgICAkemJwLT50ZW1wbGF0ZS0+U2V0VGVtcGxhdGUoJHRlbXBsYXRlKTsNCg0KICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1ZpZXdDb21tZW50X1RlbXBsYXRlJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICRmcHJldHVybiA9ICRmcG5hbWUoJHpicC0+dGVtcGxhdGUpOw0KICAgIH0NCg0KICAgICR6YnAtPnRlbXBsYXRlLT5EaXNwbGF5KCk7DQoNCiAgICByZXR1cm4gdHJ1ZTsNCn0NCg0KLy8jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCi8qKg0KICog5o+Q5Lqk5paH56ug5pWw5o2uLg0KICoNCiAqIEBhcGkgRmlsdGVyX1BsdWdpbl9Qb3N0QXJ0aWNsZV9Db3JlDQogKiBAYXBpIEZpbHRlcl9QbHVnaW5fUG9zdEFydGljbGVfU3VjY2VlZA0KICoNCiAqIEB0aHJvd3MgRXhjZXB0aW9uDQogKg0KICogQHJldHVybiBib29sDQogKi8NCmZ1bmN0aW9uIFBvc3RBcnRpY2xlKCkNCnsNCiAgICBnbG9iYWwgJHpicDsNCiAgICBpZiAoIWlzc2V0KCRfUE9TVFsnSUQnXSkpIHsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCg0KICAgIGlmIChpc3NldCgkX0NPT0tJRVsndGltZXpvbmUnXSkpIHsNCiAgICAgICAgJHR6ID0gR2V0VmFycygndGltZXpvbmUnLCAnQ09PS0lFJyk7DQogICAgICAgIGlmIChpc19udW1lcmljKCR0eikpIHsNCiAgICAgICAgICAgIGRhdGVfZGVmYXVsdF90aW1lem9uZV9zZXQoJ0V0Yy9HTVQnIC4gc3ByaW50ZignJStkJywgLSR0eikpOw0KICAgICAgICB9DQogICAgICAgIHVuc2V0KCR0eik7DQogICAgfQ0KDQogICAgaWYgKGlzc2V0KCRfUE9TVFsnVGFnJ10pKSB7DQogICAgICAgICRfUE9TVFsnVGFnJ10gPSBGb3JtYXRTdHJpbmcoJF9QT1NUWydUYWcnXSwgJ1tub3NjcmlwdF0nKTsNCiAgICAgICAgJF9QT1NUWydUYWcnXSA9IFBvc3RBcnRpY2xlX0NoZWNrVGFnQW5kQ29udmVydElEdG9TdHJpbmcoJF9QT1NUWydUYWcnXSk7DQogICAgfQ0KICAgIGlmIChpc3NldCgkX1BPU1RbJ0NvbnRlbnQnXSkpIHsNCiAgICAgICAgJF9QT1NUWydDb250ZW50J10gPSBzdHJfcmVwbGFjZSgnPGhyIGNsYXNzPSJtb3JlIiAvPicsICc8IS0tbW9yZS0tPicsICRfUE9TVFsnQ29udGVudCddKTsNCiAgICAgICAgJF9QT1NUWydDb250ZW50J10gPSBzdHJfcmVwbGFjZSgnPGhyIGNsYXNzPSJtb3JlIi8+JywgJzwhLS1tb3JlLS0+JywgJF9QT1NUWydDb250ZW50J10pOw0KICAgICAgICBpZiAoc3RycG9zKCRfUE9TVFsnQ29udGVudCddLCAnPCEtLW1vcmUtLT4nKSAhPT0gZmFsc2UpIHsNCiAgICAgICAgICAgIGlmIChpc3NldCgkX1BPU1RbJ0ludHJvJ10pKSB7DQogICAgICAgICAgICAgICAgJF9QT1NUWydJbnRybyddID0gR2V0VmFsdWVJbkFycmF5KGV4cGxvZGUoJzwhLS1tb3JlLS0+JywgJF9QT1NUWydDb250ZW50J10pLCAwKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGlmIChpc3NldCgkX1BPU1RbJ0ludHJvJ10pKSB7DQogICAgICAgICAgICAgICAgaWYgKCRfUE9TVFsnSW50cm8nXSA9PSAnJyB8fCAoc3RyaXBvcygkX1BPU1RbJ0ludHJvJ10sICc8IS0tYXV0b2ludHJvLS0+JykgIT09IGZhbHNlKSkgew0KICAgICAgICAgICAgICAgICAgICAvLyRfUE9TVFsnSW50cm8nXSA9IFN1YlN0clVURjhfSHRtbCgkX1BPU1RbJ0NvbnRlbnQnXSwgKGludCkgc3RycG9zKCRfUE9TVFsnQ29udGVudCddLCAnPicpICsgKGludCkgJHpicC0+b3B0aW9uWydaQ19BUlRJQ0xFX0VYQ0VSUFRfTUFYJ10pOw0KICAgICAgICAgICAgICAgICAgICAvL+aUuee6r0hUTUzmkZjopoENCiAgICAgICAgICAgICAgICAgICAgJF9QT1NUWydJbnRybyddID0gRm9ybWF0U3RyaW5nKCRfUE9TVFsnQ29udGVudCddLCAiW25vaHRtbF0iKTsNCiAgICAgICAgICAgICAgICAgICAgJF9QT1NUWydJbnRybyddID0gU3ViU3RyVVRGOF9IdG1sKCRfUE9TVFsnSW50cm8nXSwgKGludCkgJHpicC0+b3B0aW9uWydaQ19BUlRJQ0xFX0VYQ0VSUFRfTUFYJ10pOw0KICAgICAgICAgICAgICAgICAgICAkX1BPU1RbJ0ludHJvJ10gLj0gJzwhLS1hdXRvaW50cm8tLT4nOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAkX1BPU1RbJ0ludHJvJ10gPSBDbG9zZVRhZ3MoJF9QT1NUWydJbnRybyddKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGlmICghaXNzZXQoJF9QT1NUWydBdXRob3JJRCddKSkgew0KICAgICAgICAkX1BPU1RbJ0F1dGhvcklEJ10gPSAkemJwLT51c2VyLT5JRDsNCiAgICB9IGVsc2Ugew0KICAgICAgICBpZiAoKCRfUE9TVFsnQXV0aG9ySUQnXSAhPSAkemJwLT51c2VyLT5JRCkgJiYgKCEkemJwLT5DaGVja1JpZ2h0cygnQXJ0aWNsZUFsbCcpKSkgew0KICAgICAgICAgICAgJF9QT1NUWydBdXRob3JJRCddID0gJHpicC0+dXNlci0+SUQ7DQogICAgICAgIH0NCiAgICAgICAgaWYgKGVtcHR5KCRfUE9TVFsnQXV0aG9ySUQnXSkpIHsNCiAgICAgICAgICAgICRfUE9TVFsnQXV0aG9ySUQnXSA9ICR6YnAtPnVzZXItPklEOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgaWYgKGlzc2V0KCRfUE9TVFsnQWxpYXMnXSkpIHsNCiAgICAgICAgJF9QT1NUWydBbGlhcyddID0gRm9ybWF0U3RyaW5nKCRfUE9TVFsnQWxpYXMnXSwgJ1tub3NjcmlwdF0nKTsNCiAgICB9DQoNCiAgICBpZiAoaXNzZXQoJF9QT1NUWydQb3N0VGltZSddKSkgew0KICAgICAgICAkX1BPU1RbJ1Bvc3RUaW1lJ10gPSBzdHJ0b3RpbWUoJF9QT1NUWydQb3N0VGltZSddKTsNCiAgICB9DQoNCiAgICBpZiAoISR6YnAtPkNoZWNrUmlnaHRzKCdBcnRpY2xlQWxsJykpIHsNCiAgICAgICAgdW5zZXQoJF9QT1NUWydJc1RvcCddKTsNCiAgICB9DQoNCiAgICAkYXJ0aWNsZSA9IG5ldyBQb3N0KCk7DQogICAgJHByZV9hdXRob3IgPSBudWxsOw0KICAgICRwcmVfdGFnID0gbnVsbDsNCiAgICAkcHJlX2NhdGVnb3J5ID0gbnVsbDsNCiAgICAkcHJlX2lzdG9wID0gbnVsbDsNCiAgICAkcHJlX3N0YXR1cyA9IG51bGw7DQogICAgJG9yaWdfaWQgPSAwOw0KDQogICAgaWYgKEdldFZhcnMoJ0lEJywgJ1BPU1QnKSA9PSAwKSB7DQogICAgICAgIGlmICghJHpicC0+Q2hlY2tSaWdodHMoJ0FydGljbGVQdWInKSkgew0KICAgICAgICAgICAgJF9QT1NUWydTdGF0dXMnXSA9IFpDX1BPU1RfU1RBVFVTX0FVRElUSU5HOw0KICAgICAgICB9DQogICAgfSBlbHNlIHsNCiAgICAgICAgJGFydGljbGUtPkxvYWRJbmZvQnlJRChHZXRWYXJzKCdJRCcsICdQT1NUJykpOw0KICAgICAgICBpZiAoKCRhcnRpY2xlLT5BdXRob3JJRCAhPSAkemJwLT51c2VyLT5JRCkgJiYgKCEkemJwLT5DaGVja1JpZ2h0cygnQXJ0aWNsZUFsbCcpKSkgew0KICAgICAgICAgICAgJHpicC0+U2hvd0Vycm9yKDYsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKCghJHpicC0+Q2hlY2tSaWdodHMoJ0FydGljbGVQdWInKSkgJiYgKCRhcnRpY2xlLT5TdGF0dXMgPT0gWkNfUE9TVF9TVEFUVVNfQVVESVRJTkcpKSB7DQogICAgICAgICAgICAkX1BPU1RbJ1N0YXR1cyddID0gWkNfUE9TVF9TVEFUVVNfQVVESVRJTkc7DQogICAgICAgIH0NCiAgICAgICAgJG9yaWdfaWQgPSAkYXJ0aWNsZS0+SUQ7DQogICAgICAgICRwcmVfYXV0aG9yID0gJGFydGljbGUtPkF1dGhvcklEOw0KICAgICAgICAkcHJlX3RhZyA9ICRhcnRpY2xlLT5UYWc7DQogICAgICAgICRwcmVfY2F0ZWdvcnkgPSAkYXJ0aWNsZS0+Q2F0ZUlEOw0KICAgICAgICAkcHJlX2lzdG9wID0gJGFydGljbGUtPklzVG9wOw0KICAgICAgICAkcHJlX3N0YXR1cyA9ICRhcnRpY2xlLT5TdGF0dXM7DQogICAgfQ0KDQogICAgZm9yZWFjaCAoJHpicC0+ZGF0YWluZm9bJ1Bvc3QnXSBhcyAka2V5ID0+ICR2YWx1ZSkgew0KICAgICAgICBpZiAoJGtleSA9PSAnSUQnIHx8ICRrZXkgPT0gJ01ldGEnKSB7DQogICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoaXNzZXQoJF9QT1NUWyRrZXldKSkgew0KICAgICAgICAgICAgJGFydGljbGUtPiRrZXkgPSBHZXRWYXJzKCRrZXksICdQT1NUJyk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAkYXJ0aWNsZS0+VHlwZSA9IFpDX1BPU1RfVFlQRV9BUlRJQ0xFOw0KDQogICAgRmlsdGVyTWV0YSgkYXJ0aWNsZSk7DQoNCiAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9Qb3N0QXJ0aWNsZV9Db3JlJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICRmcG5hbWUoJGFydGljbGUpOw0KICAgIH0NCg0KICAgIEZpbHRlclBvc3QoJGFydGljbGUpOw0KDQogICAgJGFydGljbGUtPlNhdmUoKTsNCg0KICAgIC8v5pu05paw57uf6K6h5L+h5oGvDQogICAgJHByZV9hcnJheVRhZyA9ICR6YnAtPkxvYWRUYWdzQnlJRFN0cmluZygkcHJlX3RhZyk7DQogICAgJG5vd19hcnJheVRhZyA9ICR6YnAtPkxvYWRUYWdzQnlJRFN0cmluZygkYXJ0aWNsZS0+VGFnKTsNCiAgICAkcHJlX2FycmF5ID0gJG5vd19hcnJheSA9IGFycmF5KCk7DQogICAgZm9yZWFjaCAoJHByZV9hcnJheVRhZyBhcyAkdGFnKSB7DQogICAgICAgICRwcmVfYXJyYXlbXSA9ICR0YWctPklEOw0KICAgIH0NCiAgICBmb3JlYWNoICgkbm93X2FycmF5VGFnIGFzICR0YWcpIHsNCiAgICAgICAgJG5vd19hcnJheVtdID0gJHRhZy0+SUQ7DQogICAgfQ0KICAgICRkZWxfYXJyYXkgPSBhcnJheV9kaWZmKCRwcmVfYXJyYXksICRub3dfYXJyYXkpOw0KICAgICRhZGRfYXJyYXkgPSBhcnJheV9kaWZmKCRub3dfYXJyYXksICRwcmVfYXJyYXkpOw0KICAgICRkZWxfc3RyaW5nID0gJHpicC0+Q29udmVydFRhZ0lEdG9TdHJpbmcoJGRlbF9hcnJheSk7DQogICAgJGFkZF9zdHJpbmcgPSAkemJwLT5Db252ZXJ0VGFnSUR0b1N0cmluZygkYWRkX2FycmF5KTsNCiAgICBpZiAoJGRlbF9zdHJpbmcpIHsNCiAgICAgICAgQ291bnRUYWdBcnJheVN0cmluZygkZGVsX3N0cmluZywgLTEsICRhcnRpY2xlLT5JRCk7DQogICAgfQ0KICAgIGlmICgkYWRkX3N0cmluZykgew0KICAgICAgICBDb3VudFRhZ0FycmF5U3RyaW5nKCRhZGRfc3RyaW5nLCArMSwgJGFydGljbGUtPklEKTsNCiAgICB9DQogICAgaWYgKCRwcmVfYXV0aG9yICE9ICRhcnRpY2xlLT5BdXRob3JJRCkgew0KICAgICAgICBpZiAoJHByZV9hdXRob3IgPiAwKSB7DQogICAgICAgICAgICBDb3VudE1lbWJlckFycmF5KGFycmF5KCRwcmVfYXV0aG9yKSwgYXJyYXkoLTEsIDAsIDAsIDApKTsNCiAgICAgICAgfQ0KDQogICAgICAgIENvdW50TWVtYmVyQXJyYXkoYXJyYXkoJGFydGljbGUtPkF1dGhvcklEKSwgYXJyYXkoKzEsIDAsIDAsIDApKTsNCiAgICB9DQogICAgaWYgKCRwcmVfY2F0ZWdvcnkgIT0gJGFydGljbGUtPkNhdGVJRCkgew0KICAgICAgICBpZiAoJHByZV9jYXRlZ29yeSA+IDApIHsNCiAgICAgICAgICAgIENvdW50Q2F0ZWdvcnlBcnJheShhcnJheSgkcHJlX2NhdGVnb3J5KSwgLTEpOw0KICAgICAgICB9DQoNCiAgICAgICAgQ291bnRDYXRlZ29yeUFycmF5KGFycmF5KCRhcnRpY2xlLT5DYXRlSUQpLCArMSk7DQogICAgfQ0KICAgIGlmICgkemJwLT5vcHRpb25bJ1pDX0xBUkdFX0RBVEEnXSA9PSBmYWxzZSkgew0KICAgICAgICBDb3VudFBvc3RBcnJheShhcnJheSgkYXJ0aWNsZS0+SUQpKTsNCiAgICB9DQogICAgaWYgKCRvcmlnX2lkID09IDAgJiYgJGFydGljbGUtPklzVG9wID09IDAgJiYgJGFydGljbGUtPlN0YXR1cyA9PSBaQ19QT1NUX1NUQVRVU19QVUJMSUMpIHsNCiAgICAgICAgQ291bnROb3JtYWxBcnRpY2xlTnVtcygrMSk7DQogICAgfSBlbHNlaWYgKCRvcmlnX2lkID4gMCkgew0KICAgICAgICBpZiAoKCRwcmVfaXN0b3AgPT0gMCAmJiAkcHJlX3N0YXR1cyA9PSAwKSAmJiAoJGFydGljbGUtPklzVG9wICE9IDAgfHwgJGFydGljbGUtPlN0YXR1cyAhPSAwKSkgew0KICAgICAgICAgICAgQ291bnROb3JtYWxBcnRpY2xlTnVtcygtMSk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKCgkcHJlX2lzdG9wICE9IDAgfHwgJHByZV9zdGF0dXMgIT0gMCkgJiYgKCRhcnRpY2xlLT5Jc1RvcCA9PSAwICYmICRhcnRpY2xlLT5TdGF0dXMgPT0gMCkpIHsNCiAgICAgICAgICAgIENvdW50Tm9ybWFsQXJ0aWNsZU51bXMoKzEpOw0KICAgICAgICB9DQogICAgfQ0KICAgIGlmICgkYXJ0aWNsZS0+SXNUb3AgPT0gdHJ1ZSAmJiAkYXJ0aWNsZS0+U3RhdHVzID09IFpDX1BPU1RfU1RBVFVTX1BVQkxJQykgew0KICAgICAgICBDb3VudFRvcEFydGljbGUoJGFydGljbGUtPlR5cGUsICRhcnRpY2xlLT5JRCwgbnVsbCk7DQogICAgfSBlbHNlIHsNCiAgICAgICAgQ291bnRUb3BBcnRpY2xlKCRhcnRpY2xlLT5UeXBlLCBudWxsLCAkYXJ0aWNsZS0+SUQpOw0KICAgIH0NCg0KICAgICR6YnAtPkFkZEJ1aWxkTW9kdWxlKCdwcmV2aW91cycpOw0KICAgICR6YnAtPkFkZEJ1aWxkTW9kdWxlKCdjYWxlbmRhcicpOw0KICAgICR6YnAtPkFkZEJ1aWxkTW9kdWxlKCdjb21tZW50cycpOw0KICAgICR6YnAtPkFkZEJ1aWxkTW9kdWxlKCdhcmNoaXZlcycpOw0KICAgICR6YnAtPkFkZEJ1aWxkTW9kdWxlKCd0YWdzJyk7DQogICAgJHpicC0+QWRkQnVpbGRNb2R1bGUoJ2F1dGhvcnMnKTsNCg0KICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1Bvc3RBcnRpY2xlX1N1Y2NlZWQnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgJGZwbmFtZSgkYXJ0aWNsZSk7DQogICAgfQ0KDQogICAgcmV0dXJuIHRydWU7DQp9DQoNCi8qKg0KICog5Yig6Zmk5paH56ugLg0KICoNCiAqIEB0aHJvd3MgRXhjZXB0aW9uDQogKg0KICogQHJldHVybiBib29sDQogKi8NCmZ1bmN0aW9uIERlbEFydGljbGUoKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KDQogICAgJGlkID0gKGludCkgR2V0VmFycygnaWQnLCAnR0VUJyk7DQoNCiAgICAkYXJ0aWNsZSA9IG5ldyBQb3N0KCk7DQogICAgJGFydGljbGUtPkxvYWRJbmZvQnlJRCgkaWQpOw0KICAgIGlmICgkYXJ0aWNsZS0+SUQgPiAwKSB7DQogICAgICAgIGlmICghJHpicC0+Q2hlY2tSaWdodHMoJ0FydGljbGVBbGwnKSAmJiAkYXJ0aWNsZS0+QXV0aG9ySUQgIT0gJHpicC0+dXNlci0+SUQpIHsNCiAgICAgICAgICAgICR6YnAtPlNob3dFcnJvcig2LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgICAgICB9DQoNCiAgICAgICAgJHByZV9hdXRob3IgPSAkYXJ0aWNsZS0+QXV0aG9ySUQ7DQogICAgICAgICRwcmVfdGFnID0gJGFydGljbGUtPlRhZzsNCiAgICAgICAgJHByZV9jYXRlZ29yeSA9ICRhcnRpY2xlLT5DYXRlSUQ7DQogICAgICAgICRwcmVfaXN0b3AgPSAkYXJ0aWNsZS0+SXNUb3A7DQogICAgICAgICRwcmVfc3RhdHVzID0gJGFydGljbGUtPlN0YXR1czsNCg0KICAgICAgICAkYXJ0aWNsZS0+RGVsKCk7DQoNCiAgICAgICAgRGVsQXJ0aWNsZV9Db21tZW50cygkYXJ0aWNsZS0+SUQpOw0KDQogICAgICAgIENvdW50VGFnQXJyYXlTdHJpbmcoJHByZV90YWcsIC0xLCAkYXJ0aWNsZS0+SUQpOw0KICAgICAgICBDb3VudE1lbWJlckFycmF5KGFycmF5KCRwcmVfYXV0aG9yKSwgYXJyYXkoLTEsIDAsIDAsIDApKTsNCiAgICAgICAgQ291bnRDYXRlZ29yeUFycmF5KGFycmF5KCRwcmVfY2F0ZWdvcnkpLCAtMSk7DQogICAgICAgIGlmICgoJHByZV9pc3RvcCA9PSAwICYmICRwcmVfc3RhdHVzID09IDApKSB7DQogICAgICAgICAgICBDb3VudE5vcm1hbEFydGljbGVOdW1zKC0xKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoJGFydGljbGUtPklzVG9wID09IHRydWUpIHsNCiAgICAgICAgICAgIENvdW50VG9wQXJ0aWNsZSgkYXJ0aWNsZS0+VHlwZSwgbnVsbCwgJGFydGljbGUtPklEKTsNCiAgICAgICAgfQ0KDQogICAgICAgICR6YnAtPkFkZEJ1aWxkTW9kdWxlKCdwcmV2aW91cycpOw0KICAgICAgICAkemJwLT5BZGRCdWlsZE1vZHVsZSgnY2FsZW5kYXInKTsNCiAgICAgICAgJHpicC0+QWRkQnVpbGRNb2R1bGUoJ2NvbW1lbnRzJyk7DQogICAgICAgICR6YnAtPkFkZEJ1aWxkTW9kdWxlKCdhcmNoaXZlcycpOw0KICAgICAgICAkemJwLT5BZGRCdWlsZE1vZHVsZSgndGFncycpOw0KICAgICAgICAkemJwLT5BZGRCdWlsZE1vZHVsZSgnYXV0aG9ycycpOw0KDQogICAgICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX0RlbEFydGljbGVfU3VjY2VlZCddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAgICAgJGZwbmFtZSgkYXJ0aWNsZSk7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICByZXR1cm4gZmFsc2U7DQp9DQoNCi8qKg0KICog5o+Q5Lqk5paH56ug5pWw5o2u5pe25qOA5p+ldGFn5pWw5o2u77yM5bm25bCG5pawdGFnc+i9rOS4uuagh+WHhuagvOW8j+i/lOWbni4NCiAqDQogKiBAcGFyYW0gc3RyaW5nICR0YWduYW1lc3RyaW5nIOaPkOS6pOeahOaWh+eroHRhZ+aVsOaNru+8jOWPr+S7pTos77yM44CB562J56ym5Y+35YiG6ZqUDQogKg0KICogQHJldHVybiBzdHJpbmcg6L+U5Zue5aaCJ3sxfXsyfXszfXs0fSfnmoTlrZfnrKbkuLINCiAqLw0KZnVuY3Rpb24gUG9zdEFydGljbGVfQ2hlY2tUYWdBbmRDb252ZXJ0SUR0b1N0cmluZygkdGFnbmFtZXN0cmluZykNCnsNCiAgICBnbG9iYWwgJHpicDsNCiAgICAkcyA9ICcnOw0KICAgICR0YWduYW1lc3RyaW5nID0gc3RyX3JlcGxhY2UoJzsnLCAnLCcsICR0YWduYW1lc3RyaW5nKTsNCiAgICAkdGFnbmFtZXN0cmluZyA9IHN0cl9yZXBsYWNlKCfvvIwnLCAnLCcsICR0YWduYW1lc3RyaW5nKTsNCiAgICAkdGFnbmFtZXN0cmluZyA9IHN0cl9yZXBsYWNlKCfjgIEnLCAnLCcsICR0YWduYW1lc3RyaW5nKTsNCiAgICAkdGFnbmFtZXN0cmluZyA9IHN0cmlwX3RhZ3MoJHRhZ25hbWVzdHJpbmcpOw0KICAgICR0YWduYW1lc3RyaW5nID0gdHJpbSgkdGFnbmFtZXN0cmluZyk7DQogICAgaWYgKCR0YWduYW1lc3RyaW5nID09ICcnKSB7DQogICAgICAgIHJldHVybiAnJzsNCiAgICB9DQoNCiAgICBpZiAoJHRhZ25hbWVzdHJpbmcgPT0gJywnKSB7DQogICAgICAgIHJldHVybiAnJzsNCiAgICB9DQoNCiAgICAkYSA9IGV4cGxvZGUoJywnLCAkdGFnbmFtZXN0cmluZyk7DQogICAgJGIgPSBhcnJheSgpOw0KICAgIGZvcmVhY2ggKCRhIGFzICR2YWx1ZSkgew0KICAgICAgICAkdiA9IHRyaW0oJHZhbHVlKTsNCiAgICAgICAgaWYgKCR2KSB7DQogICAgICAgICAgICAkYltdID0gJHY7DQogICAgICAgIH0NCiAgICB9DQogICAgJGIgPSBhcnJheV91bmlxdWUoJGIpOw0KICAgICRiID0gYXJyYXlfc2xpY2UoJGIsIDAsIDIwKTsNCiAgICAkYyA9IGFycmF5KCk7DQoNCiAgICAkdCA9ICR6YnAtPkxvYWRUYWdzQnlOYW1lU3RyaW5nKCR0YWduYW1lc3RyaW5nKTsNCiAgICBmb3JlYWNoICgkdCBhcyAka2V5ID0+ICR2YWx1ZSkgew0KICAgICAgICAkY1tdID0gJGtleTsNCiAgICB9DQogICAgJGQgPSBhcnJheV9kaWZmKCRiLCAkYyk7DQogICAgaWYgKCR6YnAtPkNoZWNrUmlnaHRzKCdUYWdOZXcnKSkgew0KICAgICAgICBmb3JlYWNoICgkZCBhcyAka2V5KSB7DQogICAgICAgICAgICAkdGFnID0gbmV3IFRhZygpOw0KICAgICAgICAgICAgJHRhZy0+TmFtZSA9ICRrZXk7DQoNCiAgICAgICAgICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1Bvc3RUYWdfQ29yZSddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAgICAgICAgICRmcG5hbWUoJHRhZyk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIEZpbHRlclRhZygkdGFnKTsNCiAgICAgICAgICAgICR0YWctPlNhdmUoKTsNCiAgICAgICAgICAgICR6YnAtPnRhZ3NbJHRhZy0+SURdID0gJHRhZzsNCiAgICAgICAgICAgICR6YnAtPnRhZ3NieW5hbWVbJHRhZy0+TmFtZV0gPSAmJHpicC0+dGFnc1skdGFnLT5JRF07DQoNCiAgICAgICAgICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1Bvc3RUYWdfU3VjY2VlZCddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAgICAgICAgICRmcG5hbWUoJHRhZyk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBmb3JlYWNoICgkYiBhcyAka2V5KSB7DQogICAgICAgIGlmICghaXNzZXQoJHpicC0+dGFnc2J5bmFtZVska2V5XSkpIHsNCiAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICB9DQoNCiAgICAgICAgJHMgLj0gJ3snIC4gJHpicC0+dGFnc2J5bmFtZVska2V5XS0+SUQgLiAnfSc7DQogICAgfQ0KDQogICAgcmV0dXJuICRzOw0KfQ0KDQovKioNCiAqIOWIoOmZpOaWh+eroOS4i+aJgOacieivhOiuui4NCiAqDQogKiBAcGFyYW0gaW50ICRpZCDmlofnq6BJRA0KICovDQpmdW5jdGlvbiBEZWxBcnRpY2xlX0NvbW1lbnRzKCRpZCkNCnsNCiAgICBnbG9iYWwgJHpicDsNCg0KICAgICRzcWwgPSAkemJwLT5kYi0+c3FsLT5EZWxldGUoJHpicC0+dGFibGVbJ0NvbW1lbnQnXSwgYXJyYXkoYXJyYXkoJz0nLCAnY29tbV9Mb2dJRCcsICRpZCkpKTsNCiAgICAkemJwLT5kYi0+RGVsZXRlKCRzcWwpOw0KfQ0KDQovLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KLyoqDQogKiDmj5DkuqTpobXpnaLmlbDmja4uDQogKg0KICogQHRocm93cyBFeGNlcHRpb24NCiAqDQogKiBAcmV0dXJuIGJvb2wNCiAqLw0KZnVuY3Rpb24gUG9zdFBhZ2UoKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KICAgIGlmICghaXNzZXQoJF9QT1NUWydJRCddKSkgew0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KDQogICAgaWYgKGlzc2V0KCRfUE9TVFsnUG9zdFRpbWUnXSkpIHsNCiAgICAgICAgJF9QT1NUWydQb3N0VGltZSddID0gc3RydG90aW1lKCRfUE9TVFsnUG9zdFRpbWUnXSk7DQogICAgfQ0KDQogICAgaWYgKCFpc3NldCgkX1BPU1RbJ0F1dGhvcklEJ10pKSB7DQogICAgICAgICRfUE9TVFsnQXV0aG9ySUQnXSA9ICR6YnAtPnVzZXItPklEOw0KICAgIH0gZWxzZSB7DQogICAgICAgIGlmICgoJF9QT1NUWydBdXRob3JJRCddICE9ICR6YnAtPnVzZXItPklEKSAmJiAoISR6YnAtPkNoZWNrUmlnaHRzKCdQYWdlQWxsJykpKSB7DQogICAgICAgICAgICAkX1BPU1RbJ0F1dGhvcklEJ10gPSAkemJwLT51c2VyLT5JRDsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGlmIChpc3NldCgkX1BPU1RbJ0FsaWFzJ10pKSB7DQogICAgICAgICRfUE9TVFsnQWxpYXMnXSA9IEZvcm1hdFN0cmluZygkX1BPU1RbJ0FsaWFzJ10sICdbbm9zY3JpcHRdJyk7DQogICAgfQ0KDQogICAgJGFydGljbGUgPSBuZXcgUG9zdCgpOw0KICAgICRwcmVfYXV0aG9yID0gbnVsbDsNCiAgICAkb3JpZ19pZCA9IDA7DQogICAgaWYgKEdldFZhcnMoJ0lEJywgJ1BPU1QnKSA9PSAwKSB7DQogICAgfSBlbHNlIHsNCiAgICAgICAgJGFydGljbGUtPkxvYWRJbmZvQnlJRChHZXRWYXJzKCdJRCcsICdQT1NUJykpOw0KICAgICAgICBpZiAoKCRhcnRpY2xlLT5BdXRob3JJRCAhPSAkemJwLT51c2VyLT5JRCkgJiYgKCEkemJwLT5DaGVja1JpZ2h0cygnUGFnZUFsbCcpKSkgew0KICAgICAgICAgICAgJHpicC0+U2hvd0Vycm9yKDYsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgIH0NCiAgICAgICAgJHByZV9hdXRob3IgPSAkYXJ0aWNsZS0+QXV0aG9ySUQ7DQogICAgICAgICRvcmlnX2lkID0gJGFydGljbGUtPklEOw0KICAgIH0NCg0KICAgIGZvcmVhY2ggKCR6YnAtPmRhdGFpbmZvWydQb3N0J10gYXMgJGtleSA9PiAkdmFsdWUpIHsNCiAgICAgICAgaWYgKCRrZXkgPT0gJ0lEJyB8fCAka2V5ID09ICdNZXRhJykgew0KICAgICAgICAgICAgY29udGludWU7DQogICAgICAgIH0NCiAgICAgICAgaWYgKGlzc2V0KCRfUE9TVFska2V5XSkpIHsNCiAgICAgICAgICAgICRhcnRpY2xlLT4ka2V5ID0gR2V0VmFycygka2V5LCAnUE9TVCcpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgJGFydGljbGUtPlR5cGUgPSBaQ19QT1NUX1RZUEVfUEFHRTsNCg0KICAgIEZpbHRlck1ldGEoJGFydGljbGUpOw0KDQogICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fUG9zdFBhZ2VfQ29yZSddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAkZnBuYW1lKCRhcnRpY2xlKTsNCiAgICB9DQoNCiAgICBGaWx0ZXJQb3N0KCRhcnRpY2xlKTsNCg0KICAgICRhcnRpY2xlLT5TYXZlKCk7DQoNCiAgICBpZiAoJHByZV9hdXRob3IgIT0gJGFydGljbGUtPkF1dGhvcklEKSB7DQogICAgICAgIGlmICgkcHJlX2F1dGhvciA+IDApIHsNCiAgICAgICAgICAgIENvdW50TWVtYmVyQXJyYXkoYXJyYXkoJHByZV9hdXRob3IpLCBhcnJheSgwLCAtMSwgMCwgMCkpOw0KICAgICAgICB9DQoNCiAgICAgICAgQ291bnRNZW1iZXJBcnJheShhcnJheSgkYXJ0aWNsZS0+QXV0aG9ySUQpLCBhcnJheSgwLCArMSwgMCwgMCkpOw0KICAgIH0NCiAgICBpZiAoJHpicC0+b3B0aW9uWydaQ19MQVJHRV9EQVRBJ10gPT0gZmFsc2UpIHsNCiAgICAgICAgQ291bnRQb3N0QXJyYXkoYXJyYXkoJGFydGljbGUtPklEKSk7DQogICAgfQ0KDQogICAgJHpicC0+QWRkQnVpbGRNb2R1bGUoJ2NvbW1lbnRzJyk7DQoNCiAgICBpZiAoR2V0VmFycygnQWRkTmF2YmFyJywgJ1BPU1QnKSA9PSAwKSB7DQogICAgICAgICR6YnAtPkRlbEl0ZW1Ub05hdmJhcigncGFnZScsICRhcnRpY2xlLT5JRCk7DQogICAgfQ0KDQogICAgaWYgKEdldFZhcnMoJ0FkZE5hdmJhcicsICdQT1NUJykgPT0gMSkgew0KICAgICAgICAkemJwLT5BZGRJdGVtVG9OYXZiYXIoJ3BhZ2UnLCAkYXJ0aWNsZS0+SUQsICRhcnRpY2xlLT5UaXRsZSwgJGFydGljbGUtPlVybCk7DQogICAgfQ0KDQogICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fUG9zdFBhZ2VfU3VjY2VlZCddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAkZnBuYW1lKCRhcnRpY2xlKTsNCiAgICB9DQoNCiAgICByZXR1cm4gdHJ1ZTsNCn0NCg0KLyoqDQogKiDliKDpmaTpobXpnaIuDQogKg0KICogQHRocm93cyBFeGNlcHRpb24NCiAqDQogKiBAcmV0dXJuIGJvb2wNCiAqLw0KZnVuY3Rpb24gRGVsUGFnZSgpDQp7DQogICAgZ2xvYmFsICR6YnA7DQoNCiAgICAkaWQgPSAoaW50KSBHZXRWYXJzKCdpZCcsICdHRVQnKTsNCg0KICAgICRhcnRpY2xlID0gbmV3IFBvc3QoKTsNCiAgICAkYXJ0aWNsZS0+TG9hZEluZm9CeUlEKCRpZCk7DQogICAgaWYgKCRhcnRpY2xlLT5JRCA+IDApIHsNCiAgICAgICAgaWYgKCEkemJwLT5DaGVja1JpZ2h0cygnUGFnZUFsbCcpICYmICRhcnRpY2xlLT5BdXRob3JJRCAhPSAkemJwLT51c2VyLT5JRCkgew0KICAgICAgICAgICAgJHpicC0+U2hvd0Vycm9yKDYsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgIH0NCg0KICAgICAgICAkcHJlX2F1dGhvciA9ICRhcnRpY2xlLT5BdXRob3JJRDsNCg0KICAgICAgICAkYXJ0aWNsZS0+RGVsKCk7DQoNCiAgICAgICAgRGVsQXJ0aWNsZV9Db21tZW50cygkYXJ0aWNsZS0+SUQpOw0KDQogICAgICAgIENvdW50TWVtYmVyQXJyYXkoYXJyYXkoJHByZV9hdXRob3IpLCBhcnJheSgwLCAtMSwgMCwgMCkpOw0KDQogICAgICAgICR6YnAtPkFkZEJ1aWxkTW9kdWxlKCdjb21tZW50cycpOw0KDQogICAgICAgICR6YnAtPkRlbEl0ZW1Ub05hdmJhcigncGFnZScsICRhcnRpY2xlLT5JRCk7DQoNCiAgICAgICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fRGVsUGFnZV9TdWNjZWVkJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICAgICAkZnBuYW1lKCRhcnRpY2xlKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHJldHVybiB0cnVlOw0KfQ0KDQovLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KLyoqDQogKiDmj5DkuqTor4TorrouDQogKg0KICogQHRocm93cyBFeGNlcHRpb24NCiAqDQogKiBAcmV0dXJuIGJvb2wNCiAqLw0KZnVuY3Rpb24gUG9zdENvbW1lbnQoKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KDQogICAgJGlzQWpheCA9IEdldFZhcnMoJ2lzYWpheCcsICdQT1NUJyk7DQogICAgJHJldHVybkpzb24gPSBHZXRWYXJzKCdmb3JtYXQnLCAnUE9TVCcpID09ICdqc29uJzsNCiAgICAkcmV0dXJuQ29tbWVudFdoaXRlTGlzdCA9IGFycmF5KA0KICAgICAgICAnSUQnICAgICAgID0+IG51bGwsDQogICAgICAgICdDb250ZW50JyAgPT4gbnVsbCwNCiAgICAgICAgJ0xvZ0lkJyAgICA9PiBudWxsLA0KICAgICAgICAnTmFtZScgICAgID0+IG51bGwsDQogICAgICAgICdQYXJlbnRJRCcgPT4gbnVsbCwNCiAgICAgICAgJ1Bvc3RUaW1lJyA9PiBudWxsLA0KICAgICAgICAnSG9tZVBhZ2UnID0+IG51bGwsDQogICAgICAgICdFbWFpbCcgICAgPT4gbnVsbCwNCiAgICAgICAgJ0F1dGhvcklEJyA9PiBudWxsLA0KICAgICk7DQoNCiAgICAkX1BPU1RbJ0xvZ0lEJ10gPSAkX0dFVFsncG9zdGlkJ107DQoNCiAgICBpZiAoJHpicC0+VmFsaWRDbXRLZXkoJF9HRVRbJ3Bvc3RpZCddLCAkX0dFVFsna2V5J10pID09IGZhbHNlKSB7DQogICAgICAgIGlmIChpc3NldCgkemJwLT5vcHRpb25bJ1pDX0NPTU1FTlRfVkFMSURDTVRLRVlfRU5BQkxFJ10pICYmICR6YnAtPm9wdGlvblsnWkNfQ09NTUVOVF9WQUxJRENNVEtFWV9FTkFCTEUnXSkgew0KICAgICAgICAgICAgJHpicC0+U2hvd0Vycm9yKDQzLCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgaWYgKCR6YnAtPm9wdGlvblsnWkNfQ09NTUVOVF9WRVJJRllfRU5BQkxFJ10pIHsNCiAgICAgICAgaWYgKCEkemJwLT5DaGVja1JpZ2h0cygnTm9WYWxpZENvZGUnKSkgew0KICAgICAgICAgICAgaWYgKCR6YnAtPkNoZWNrVmFsaWRDb2RlKCRfUE9TVFsndmVyaWZ5J10sICdjbXQnKSA9PSBmYWxzZSkgew0KICAgICAgICAgICAgICAgICR6YnAtPlNob3dFcnJvcigzOCwgX19GSUxFX18sIF9fTElORV9fKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8v5Yik5pat5piv5LiN5piv5pyJ5ZCM5ZCN77yI5Yir5ZCN77yJ55qE55So5oi3DQogICAgJG0gPSAkemJwLT5HZXRNZW1iZXJCeU5hbWVPckFsaWFzKCRfUE9TVFsnbmFtZSddKTsNCiAgICBpZiAoJG0tPklEID4gMCkgew0KICAgICAgICBpZiAoJG0tPklEICE9ICR6YnAtPnVzZXItPklEKSB7DQogICAgICAgICAgICAkemJwLT5TaG93RXJyb3IoMzEsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAkcmVwbHlpZCA9IChpbnQpIEdldFZhcnMoJ3JlcGx5aWQnLCAnUE9TVCcpOw0KDQogICAgaWYgKCRyZXBseWlkID09IDApIHsNCiAgICAgICAgJF9QT1NUWydSb290SUQnXSA9IDA7DQogICAgICAgICRfUE9TVFsnUGFyZW50SUQnXSA9IDA7DQogICAgfSBlbHNlIHsNCiAgICAgICAgJF9QT1NUWydQYXJlbnRJRCddID0gJHJlcGx5aWQ7DQogICAgICAgICRjID0gJHpicC0+R2V0Q29tbWVudEJ5SUQoJHJlcGx5aWQpOw0KICAgICAgICBpZiAoJGMtPkxldmVsID09IDMpIHsNCiAgICAgICAgICAgICR6YnAtPlNob3dFcnJvcig1MiwgX19GSUxFX18sIF9fTElORV9fKTsNCiAgICAgICAgfQ0KICAgICAgICAkX1BPU1RbJ1Jvb3RJRCddID0gQ29tbWVudDo6R2V0Um9vdElEKCRjLT5JRCk7DQogICAgfQ0KDQogICAgJF9QT1NUWydBdXRob3JJRCddID0gJHpicC0+dXNlci0+SUQ7DQogICAgJF9QT1NUWydOYW1lJ10gPSBHZXRWYXJzKCduYW1lJywgJ1BPU1QnKTsNCiAgICBpZiAoJHpicC0+dXNlci0+SUQgPiAwKSB7DQogICAgICAgICRfUE9TVFsnTmFtZSddID0gJHpicC0+dXNlci0+TmFtZTsNCiAgICB9DQoNCiAgICAkX1BPU1RbJ0VtYWlsJ10gPSBHZXRWYXJzKCdlbWFpbCcsICdQT1NUJyk7DQogICAgJF9QT1NUWydIb21lUGFnZSddID0gR2V0VmFycygnaG9tZXBhZ2UnLCAnUE9TVCcpOw0KICAgICRfUE9TVFsnQ29udGVudCddID0gR2V0VmFycygnY29udGVudCcsICdQT1NUJyk7DQogICAgJF9QT1NUWydQb3N0VGltZSddID0gdGltZSgpOw0KICAgICRfUE9TVFsnSVAnXSA9IEdldEd1ZXN0SVAoKTsNCiAgICAkX1BPU1RbJ0FnZW50J10gPSBHZXRHdWVzdEFnZW50KCk7DQoNCiAgICAkY210ID0gbmV3IENvbW1lbnQoKTsNCg0KICAgIGZvcmVhY2ggKCR6YnAtPmRhdGFpbmZvWydDb21tZW50J10gYXMgJGtleSA9PiAkdmFsdWUpIHsNCiAgICAgICAgaWYgKCRrZXkgPT0gJ0lEJyB8fCAka2V5ID09ICdNZXRhJykgew0KICAgICAgICAgICAgY29udGludWU7DQogICAgICAgIH0NCiAgICAgICAgaWYgKCRrZXkgPT0gJ0lzQ2hlY2tpbmcnKSB7DQogICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmIChpc3NldCgkX1BPU1RbJGtleV0pKSB7DQogICAgICAgICAgICAkY210LT4ka2V5ID0gR2V0VmFycygka2V5LCAnUE9TVCcpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgaWYgKCR6YnAtPm9wdGlvblsnWkNfQ09NTUVOVF9BVURJVCddICYmICEkemJwLT5DaGVja1JpZ2h0cygncm9vdCcpKSB7DQogICAgICAgICRjbXQtPklzQ2hlY2tpbmcgPSB0cnVlOw0KICAgIH0NCg0KICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1Bvc3RDb21tZW50X0NvcmUnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgJGZwbmFtZSgkY210KTsNCiAgICB9DQoNCiAgICBGaWx0ZXJDb21tZW50KCRjbXQpOw0KDQogICAgaWYgKCRjbXQtPklzVGhyb3cpIHsNCiAgICAgICAgJHpicC0+U2hvd0Vycm9yKDE0LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KDQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQoNCiAgICAkY210LT5TYXZlKCk7DQogICAgaWYgKCRjbXQtPklzQ2hlY2tpbmcpIHsNCiAgICAgICAgQ291bnRDb21tZW50TnVtcygwLCArMSk7DQogICAgICAgICR6YnAtPlNob3dFcnJvcig1MywgX19GSUxFX18sIF9fTElORV9fKTsNCg0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KDQogICAgQ291bnRQb3N0QXJyYXkoYXJyYXkoJGNtdC0+TG9nSUQpLCArMSk7DQogICAgQ291bnRDb21tZW50TnVtcygrMSwgMCk7DQogICAgaWYgKCR6YnAtPnVzZXItPklEID4gMCkgew0KICAgICAgICBDb3VudE1lbWJlcigkemJwLT51c2VyLCBhcnJheSgwLCAwLCAxLCAwKSk7DQogICAgICAgICR6YnAtPnVzZXItPlNhdmUoKTsNCiAgICB9DQoNCiAgICAkemJwLT5BZGRCdWlsZE1vZHVsZSgnY29tbWVudHMnKTsNCg0KICAgICR6YnAtPmNvbW1lbnRzWyRjbXQtPklEXSA9ICRjbXQ7DQoNCiAgICBpZiAoJGlzQWpheCkgew0KICAgICAgICBWaWV3Q29tbWVudCgkY210LT5JRCk7DQogICAgfSBlbHNlaWYgKCRyZXR1cm5Kc29uKSB7DQogICAgICAgIG9iX2NsZWFuKCk7DQogICAgICAgIFZpZXdDb21tZW50KCRjbXQtPklEKTsNCiAgICAgICAgJGNvbW1lbnRIdG1sID0gb2JfZ2V0X2NsZWFuKCk7DQogICAgICAgIEpzb25SZXR1cm4oYXJyYXlfbWVyZ2VfcmVjdXJzaXZlKGFycmF5KA0KICAgICAgICAgICAgImh0bWwiID0+ICRjb21tZW50SHRtbCwNCiAgICAgICAgKSwgYXJyYXlfaW50ZXJzZWN0X2tleSgkY210LT5HZXREYXRhKCksICRyZXR1cm5Db21tZW50V2hpdGVMaXN0KSkpOw0KICAgIH0NCg0KICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1Bvc3RDb21tZW50X1N1Y2NlZWQnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgJGZwbmFtZSgkY210KTsNCiAgICB9DQoNCiAgICByZXR1cm4gdHJ1ZTsNCn0NCg0KLyoqDQogKiDliKDpmaTor4TorrouDQogKg0KICogQHJldHVybiBib29sDQogKi8NCmZ1bmN0aW9uIERlbENvbW1lbnQoKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KDQogICAgJGlkID0gKGludCkgR2V0VmFycygnaWQnLCAnR0VUJyk7DQogICAgJGNtdCA9ICR6YnAtPkdldENvbW1lbnRCeUlEKCRpZCk7DQogICAgaWYgKCRjbXQtPklEID4gMCkgew0KICAgICAgICAkY29tbWVudHMgPSAkemJwLT5HZXRDb21tZW50TGlzdCgnKicsIGFycmF5KGFycmF5KCc9JywgJ2NvbW1fTG9nSUQnLCAkY210LT5Mb2dJRCkpLCBudWxsLCBudWxsLCBudWxsKTsNCg0KICAgICAgICBEZWxDb21tZW50X0NoaWxkcmVuKCRjbXQtPklEKTsNCg0KICAgICAgICBpZiAoJGNtdC0+SXNDaGVja2luZyA9PSBmYWxzZSkgew0KICAgICAgICAgICAgQ291bnRDb21tZW50TnVtcygtMSwgMCk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBDb3VudENvbW1lbnROdW1zKC0xLCAtMSk7DQogICAgICAgIH0NCiAgICAgICAgJGNtdC0+RGVsKCk7DQoNCiAgICAgICAgaWYgKCRjbXQtPklzQ2hlY2tpbmcgPT0gZmFsc2UpIHsNCiAgICAgICAgICAgIENvdW50UG9zdEFycmF5KGFycmF5KCRjbXQtPkxvZ0lEKSwgLTEpOw0KICAgICAgICAgICAgaWYgKCRjbXQtPkF1dGhvcklEID4gMCkgew0KICAgICAgICAgICAgICAgIENvdW50TWVtYmVyKCRjbXQtPkF1dGhvciwgYXJyYXkoMCwgMCwgLTEsIDApKTsNCiAgICAgICAgICAgICAgICAkY210LT5BdXRob3ItPlNhdmUoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgICR6YnAtPkFkZEJ1aWxkTW9kdWxlKCdjb21tZW50cycpOw0KDQogICAgICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX0RlbENvbW1lbnRfU3VjY2VlZCddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAgICAgJGZwbmFtZSgkY210KTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHJldHVybiB0cnVlOw0KfQ0KDQovKioNCiAqIOWIoOmZpOivhOiuuuS4i+eahOWtkOivhOiuui4NCiAqDQogKiBAcGFyYW0gaW50ICRpZCDniLbor4TorrpJRA0KICovDQpmdW5jdGlvbiBEZWxDb21tZW50X0NoaWxkcmVuKCRpZCkNCnsNCiAgICBnbG9iYWwgJHpicDsNCg0KICAgICRjbXQgPSAkemJwLT5HZXRDb21tZW50QnlJRCgkaWQpOw0KDQogICAgZm9yZWFjaCAoJGNtdC0+Q29tbWVudHMgYXMgJGNvbW1lbnQpIHsNCiAgICAgICAgaWYgKGNvdW50KCRjb21tZW50LT5Db21tZW50cykgPiAwKSB7DQogICAgICAgICAgICBEZWxDb21tZW50X0NoaWxkcmVuKCRjb21tZW50LT5JRCk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKCRjb21tZW50LT5Jc0NoZWNraW5nID09IGZhbHNlKSB7DQogICAgICAgICAgICBDb3VudENvbW1lbnROdW1zKC0xLCAwKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIENvdW50Q29tbWVudE51bXMoLTEsIC0xKTsNCiAgICAgICAgfQ0KICAgICAgICAkY29tbWVudC0+RGVsKCk7DQogICAgfQ0KfQ0KDQovKioNCiAqIOWPquWOhumBjeW5tuS/neeVmeivhOiuumlk6L+bYXJyYXks5LiN6L+b6KGM5Yig6ZmkLg0KICoNCiAqIEBwYXJhbSBpbnQgICAgICAgJGlkICAgIOeItuivhOiuuklEDQogKiBAcGFyYW0gQ29tbWVudFtdICRhcnJheSDlsIblrZDor4TorrpJROWtmOWFpeaWsOaVsOe7hA0KICovDQpmdW5jdGlvbiBHZXRTdWJDb21tZW50cygkaWQsICYkYXJyYXkpDQp7DQogICAgZ2xvYmFsICR6YnA7DQoNCiAgICAvKiogQHZhciBDb21tZW50ICRjbXQgKi8NCiAgICAkY210ID0gJHpicC0+R2V0Q29tbWVudEJ5SUQoJGlkKTsNCg0KICAgIGZvcmVhY2ggKCRjbXQtPkNvbW1lbnRzIGFzICRjb21tZW50KSB7DQogICAgICAgICRhcnJheVtdID0gJGNvbW1lbnQtPklEOw0KICAgICAgICBpZiAoY291bnQoJGNvbW1lbnQtPkNvbW1lbnRzKSA+IDApIHsNCiAgICAgICAgICAgIEdldFN1YkNvbW1lbnRzKCRjb21tZW50LT5JRCwgJGFycmF5KTsNCiAgICAgICAgfQ0KICAgIH0NCn0NCg0KLyoqDQogKuajgOafpeivhOiuuuaVsOaNruW5tuS/neWtmOOAgeabtOaWsOiuoeaVsOOAgeabtOaWsOKAnOacgOaWsOivhOiuuuKAneaooeWdly4NCiAqLw0KZnVuY3Rpb24gQ2hlY2tDb21tZW50KCkNCnsNCiAgICBnbG9iYWwgJHpicDsNCg0KICAgICRpZCA9IChpbnQpIEdldFZhcnMoJ2lkJywgJ0dFVCcpOw0KICAgICRpc2NoZWNraW5nID0gKGJvb2wpIEdldFZhcnMoJ2lzY2hlY2tpbmcnLCAnR0VUJyk7DQoNCiAgICAkY210ID0gJHpicC0+R2V0Q29tbWVudEJ5SUQoJGlkKTsNCiAgICAkb3JpZ19jaGVjayA9IChib29sKSAkY210LT5Jc0NoZWNraW5nOw0KICAgICRjbXQtPklzQ2hlY2tpbmcgPSAkaXNjaGVja2luZzsNCg0KICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX0NoZWNrQ29tbWVudF9Db3JlJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICRmcG5hbWUoJGNtdCk7DQogICAgfQ0KDQogICAgJGNtdC0+U2F2ZSgpOw0KDQogICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fQ2hlY2tDb21tZW50X1N1Y2NlZWQnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgJGZwbmFtZSgkY210KTsNCiAgICB9DQoNCiAgICBpZiAoKCRvcmlnX2NoZWNrKSAmJiAoISRpc2NoZWNraW5nKSkgew0KICAgICAgICBDb3VudFBvc3RBcnJheShhcnJheSgkY210LT5Mb2dJRCksICsxKTsNCiAgICAgICAgQ291bnRDb21tZW50TnVtcygwLCAtMSk7DQogICAgICAgIGlmICgkY210LT5BdXRob3JJRCA+IDApIHsNCiAgICAgICAgICAgIENvdW50TWVtYmVyKCRjbXQtPkF1dGhvciwgYXJyYXkoMCwgMCwgKzEsIDApKTsNCiAgICAgICAgICAgICRjbXQtPkF1dGhvci0+U2F2ZSgpOw0KICAgICAgICB9DQogICAgfSBlbHNlaWYgKCghJG9yaWdfY2hlY2spICYmICgkaXNjaGVja2luZykpIHsNCiAgICAgICAgQ291bnRQb3N0QXJyYXkoYXJyYXkoJGNtdC0+TG9nSUQpLCAtMSk7DQogICAgICAgIENvdW50Q29tbWVudE51bXMoMCwgKzEpOw0KICAgICAgICBpZiAoJGNtdC0+QXV0aG9ySUQgPiAwKSB7DQogICAgICAgICAgICBDb3VudE1lbWJlcigkY210LT5BdXRob3IsIGFycmF5KDAsIDAsIC0xLCAwKSk7DQogICAgICAgICAgICAkY210LT5BdXRob3ItPlNhdmUoKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgICR6YnAtPkFkZEJ1aWxkTW9kdWxlKCdjb21tZW50cycpOw0KfQ0KDQovKioNCiAqIOivhOiuuuaJuemHj+WkhOeQhu+8iOWIoOmZpOOAgemAmui/h+WuoeaguOOAgeWKoOWFpeWuoeaguO+8iS4NCiAqLw0KZnVuY3Rpb24gQmF0Y2hDb21tZW50KCkNCnsNCiAgICBnbG9iYWwgJHpicDsNCiAgICBpZiAoaXNzZXQoJF9QT1NUWydhbGxfZGVsJ10pKSB7DQogICAgICAgICR0eXBlID0gJ2FsbF9kZWwnOw0KICAgIH0gZWxzZWlmIChpc3NldCgkX1BPU1RbJ2FsbF9wYXNzJ10pKSB7DQogICAgICAgICR0eXBlID0gJ2FsbF9wYXNzJzsNCiAgICB9IGVsc2VpZiAoaXNzZXQoJF9QT1NUWydhbGxfYXVkaXQnXSkpIHsNCiAgICAgICAgJHR5cGUgPSAnYWxsX2F1ZGl0JzsNCiAgICB9IGVsc2Ugew0KICAgICAgICByZXR1cm47DQogICAgfQ0KICAgIGlmICghaXNzZXQoJF9QT1NUWydpZCddKSkgew0KICAgICAgICByZXR1cm47DQogICAgfQ0KICAgICRhcnJheSA9ICRfUE9TVFsnaWQnXTsNCiAgICBpZiAoaXNfYXJyYXkoJGFycmF5KSkgew0KICAgICAgICAkYXJyYXkgPSBhcnJheV91bmlxdWUoJGFycmF5KTsNCiAgICB9IGVsc2Ugew0KICAgICAgICAkYXJyYXkgPSBhcnJheSgkYXJyYXkpOw0KICAgIH0NCg0KICAgIC8vIFNlYXJjaCBDaGlsZCBDb21tZW50cw0KICAgIC8qKiBAdmFyIENvbW1lbnRbXSAkY2hpbGRBcnJheSAqLw0KICAgICRjaGlsZEFycmF5ID0gYXJyYXkoKTsNCiAgICBmb3JlYWNoICgkYXJyYXkgYXMgJGkgPT4gJGlkKSB7DQogICAgICAgICRjbXQgPSAkemJwLT5HZXRDb21tZW50QnlJRCgkaWQpOw0KICAgICAgICBpZiAoJGNtdC0+SUQgPT0gMCkgew0KICAgICAgICAgICAgY29udGludWU7DQogICAgICAgIH0NCiAgICAgICAgJGNoaWxkQXJyYXlbXSA9ICRjbXQ7DQogICAgICAgIEdldFN1YkNvbW1lbnRzKCRjbXQtPklELCAkY2hpbGRBcnJheSk7DQogICAgfQ0KDQogICAgLy8gVW5pcXVlIGNoaWxkIGFycmF5DQogICAgJGNoaWxkQXJyYXkgPSBhcnJheV91bmlxdWUoJGNoaWxkQXJyYXkpOw0KDQogICAgaWYgKCR0eXBlID09ICdhbGxfZGVsJykgew0KICAgICAgICBmb3JlYWNoICgkY2hpbGRBcnJheSBhcyAkaSA9PiAkY210KSB7DQogICAgICAgICAgICAkY210LT5EZWwoKTsNCiAgICAgICAgICAgIGlmICghJGNtdC0+SXNDaGVja2luZykgew0KICAgICAgICAgICAgICAgIENvdW50UG9zdEFycmF5KGFycmF5KCRjbXQtPkxvZ0lEKSwgLTEpOw0KICAgICAgICAgICAgICAgIENvdW50Q29tbWVudE51bXMoLTEsIDApOw0KICAgICAgICAgICAgICAgIGlmICgkY210LT5BdXRob3JJRCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgQ291bnRNZW1iZXIoJGNtdC0+QXV0aG9yLCBhcnJheSgwLCAwLCAtMSwgMCkpOw0KICAgICAgICAgICAgICAgICAgICAkY210LT5BdXRob3ItPlNhdmUoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIENvdW50Q29tbWVudE51bXMoLTEsIC0xKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0gZWxzZWlmICgkdHlwZSA9PSAnYWxsX3Bhc3MnKSB7DQogICAgICAgIGZvcmVhY2ggKCRjaGlsZEFycmF5IGFzICRpID0+ICRjbXQpIHsNCiAgICAgICAgICAgIGlmICghJGNtdC0+SXNDaGVja2luZykgew0KICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAkY210LT5Jc0NoZWNraW5nID0gZmFsc2U7DQogICAgICAgICAgICAkY210LT5TYXZlKCk7DQogICAgICAgICAgICBDb3VudFBvc3RBcnJheShhcnJheSgkY210LT5Mb2dJRCksICsxKTsNCiAgICAgICAgICAgIENvdW50Q29tbWVudE51bXMoMCwgLTEpOw0KICAgICAgICAgICAgaWYgKCRjbXQtPkF1dGhvcklEID4gMCkgew0KICAgICAgICAgICAgICAgIENvdW50TWVtYmVyKCRjbXQtPkF1dGhvciwgYXJyYXkoMCwgMCwgMSwgMCkpOw0KICAgICAgICAgICAgICAgICRjbXQtPkF1dGhvci0+U2F2ZSgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfSBlbHNlaWYgKCR0eXBlID09ICdhbGxfYXVkaXQnKSB7DQogICAgICAgIGZvcmVhY2ggKCRjaGlsZEFycmF5IGFzICRpID0+ICRjbXQpIHsNCiAgICAgICAgICAgIGlmICgkY210LT5Jc0NoZWNraW5nKSB7DQogICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICRjbXQtPklzQ2hlY2tpbmcgPSB0cnVlOw0KICAgICAgICAgICAgJGNtdC0+U2F2ZSgpOw0KICAgICAgICAgICAgQ291bnRQb3N0QXJyYXkoYXJyYXkoJGNtdC0+TG9nSUQpLCAtMSk7DQogICAgICAgICAgICBDb3VudENvbW1lbnROdW1zKDAsICsxKTsNCiAgICAgICAgICAgIGlmICgkY210LT5BdXRob3JJRCA+IDApIHsNCiAgICAgICAgICAgICAgICBDb3VudE1lbWJlcigkY210LT5BdXRob3IsIGFycmF5KDAsIDAsIC0xLCAwKSk7DQogICAgICAgICAgICAgICAgJGNtdC0+QXV0aG9yLT5TYXZlKCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAkemJwLT5BZGRCdWlsZE1vZHVsZSgnY29tbWVudHMnKTsNCn0NCi8vIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQovKioNCiAqIOaPkOS6pOWIhuexu+aVsOaNri4NCiAqDQogKiBAcmV0dXJuIGJvb2wNCiAqLw0KZnVuY3Rpb24gUG9zdENhdGVnb3J5KCkNCnsNCiAgICBnbG9iYWwgJHpicDsNCiAgICBpZiAoIWlzc2V0KCRfUE9TVFsnSUQnXSkpIHsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCg0KICAgIGlmIChpc3NldCgkX1BPU1RbJ0FsaWFzJ10pKSB7DQogICAgICAgICRfUE9TVFsnQWxpYXMnXSA9IEZvcm1hdFN0cmluZygkX1BPU1RbJ0FsaWFzJ10sICdbbm9zY3JpcHRdJyk7DQogICAgfQ0KDQogICAgJHBhcmVudGlkID0gKGludCkgR2V0VmFycygnUGFyZW50SUQnLCAnUE9TVCcpOw0KICAgIGlmICgkcGFyZW50aWQgPiAwKSB7DQogICAgICAgIGlmICgkemJwLT5jYXRlZ29yaWVzWyRwYXJlbnRpZF0tPkxldmVsID4gMikgew0KICAgICAgICAgICAgJF9QT1NUWydQYXJlbnRJRCddID0gJzAnOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgJGNhdGUgPSBuZXcgQ2F0ZWdvcnkoKTsNCiAgICBpZiAoR2V0VmFycygnSUQnLCAnUE9TVCcpID09IDApIHsNCiAgICB9IGVsc2Ugew0KICAgICAgICAkY2F0ZS0+TG9hZEluZm9CeUlEKEdldFZhcnMoJ0lEJywgJ1BPU1QnKSk7DQogICAgfQ0KDQogICAgZm9yZWFjaCAoJHpicC0+ZGF0YWluZm9bJ0NhdGVnb3J5J10gYXMgJGtleSA9PiAkdmFsdWUpIHsNCiAgICAgICAgaWYgKCRrZXkgPT0gJ0lEJyB8fCAka2V5ID09ICdNZXRhJykgew0KICAgICAgICAgICAgY29udGludWU7DQogICAgICAgIH0NCiAgICAgICAgaWYgKGlzc2V0KCRfUE9TVFska2V5XSkpIHsNCiAgICAgICAgICAgICRjYXRlLT4ka2V5ID0gR2V0VmFycygka2V5LCAnUE9TVCcpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgRmlsdGVyTWV0YSgkY2F0ZSk7DQoNCiAgICAvL+WIt+aWsFJvb3RJRA0KICAgICRjYXRlLT5MZXZlbDsNCg0KICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1Bvc3RDYXRlZ29yeV9Db3JlJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICRmcG5hbWUoJGNhdGUpOw0KICAgIH0NCg0KICAgIEZpbHRlckNhdGVnb3J5KCRjYXRlKTsNCg0KICAgIC8vIOatpOWkhOeUqOS9nOWIt+aWsOWIhuexu+WGheaWh+eroOaVsOaNruS9v+eUqO+8jOS4jeS9nOabtOaUuQ0KICAgIGlmICgkY2F0ZS0+SUQgPiAwKSB7DQogICAgICAgIENvdW50Q2F0ZWdvcnkoJGNhdGUpOw0KICAgIH0NCg0KICAgICRjYXRlLT5TYXZlKCk7DQoNCiAgICAkemJwLT5Mb2FkQ2F0ZWdvcmllcygpOw0KICAgICR6YnAtPkFkZEJ1aWxkTW9kdWxlKCdjYXRhbG9nJyk7DQoNCiAgICBpZiAoR2V0VmFycygnQWRkTmF2YmFyJywgJ1BPU1QnKSA9PSAwKSB7DQogICAgICAgICR6YnAtPkRlbEl0ZW1Ub05hdmJhcignY2F0ZWdvcnknLCAkY2F0ZS0+SUQpOw0KICAgIH0NCg0KICAgIGlmIChHZXRWYXJzKCdBZGROYXZiYXInLCAnUE9TVCcpID09IDEpIHsNCiAgICAgICAgJHpicC0+QWRkSXRlbVRvTmF2YmFyKCdjYXRlZ29yeScsICRjYXRlLT5JRCwgJGNhdGUtPk5hbWUsICRjYXRlLT5VcmwpOw0KICAgIH0NCg0KICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1Bvc3RDYXRlZ29yeV9TdWNjZWVkJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICRmcG5hbWUoJGNhdGUpOw0KICAgIH0NCg0KICAgIHJldHVybiB0cnVlOw0KfQ0KDQovKioNCiAqIOWIoOmZpOWIhuexuy4NCiAqDQogKiBAdGhyb3dzIEV4Y2VwdGlvbg0KICoNCiAqIEByZXR1cm4gYm9vbA0KICovDQpmdW5jdGlvbiBEZWxDYXRlZ29yeSgpDQp7DQogICAgZ2xvYmFsICR6YnA7DQoNCiAgICAkaWQgPSAoaW50KSBHZXRWYXJzKCdpZCcsICdHRVQnKTsNCiAgICAkY2F0ZSA9ICR6YnAtPkdldENhdGVnb3J5QnlJRCgkaWQpOw0KICAgIGlmICgkY2F0ZS0+SUQgPiAwKSB7DQogICAgICAgIGlmIChjb3VudCgkY2F0ZS0+U3ViQ2F0ZWdvcmllcykgPiAwKSB7DQogICAgICAgICAgICAkemJwLT5TaG93RXJyb3IoNDksIF9fRklMRV9fLCBfX0xJTkVfXyk7DQoNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIERlbENhdGVnb3J5X0FydGljbGVzKCRjYXRlLT5JRCk7DQogICAgICAgICRjYXRlLT5EZWwoKTsNCg0KICAgICAgICAkemJwLT5Mb2FkQ2F0ZWdvcmllcygpOw0KICAgICAgICAkemJwLT5BZGRCdWlsZE1vZHVsZSgnY2F0YWxvZycpOw0KICAgICAgICAkemJwLT5EZWxJdGVtVG9OYXZiYXIoJ2NhdGVnb3J5JywgJGNhdGUtPklEKTsNCg0KICAgICAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9EZWxDYXRlZ29yeV9TdWNjZWVkJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICAgICAkZnBuYW1lKCRjYXRlKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHJldHVybiB0cnVlOw0KfQ0KDQovKioNCiAqIOWIoOmZpOWIhuexu+S4i+aJgOacieaWh+eroC4NCiAqDQogKiBAcGFyYW0gaW50ICRpZCDliIbnsbtJRA0KICovDQpmdW5jdGlvbiBEZWxDYXRlZ29yeV9BcnRpY2xlcygkaWQpDQp7DQogICAgZ2xvYmFsICR6YnA7DQoNCiAgICAkc3FsID0gJHpicC0+ZGItPnNxbC0+VXBkYXRlKCR6YnAtPnRhYmxlWydQb3N0J10sIGFycmF5KCdsb2dfQ2F0ZUlEJyA9PiAwKSwgYXJyYXkoYXJyYXkoJz0nLCAnbG9nX0NhdGVJRCcsICRpZCkpKTsNCiAgICAkemJwLT5kYi0+VXBkYXRlKCRzcWwpOw0KfQ0KDQovLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KLyoqDQogKiDmj5DkuqTmoIfnrb7mlbDmja4uDQogKg0KICogQHJldHVybiBib29sDQogKi8NCmZ1bmN0aW9uIFBvc3RUYWcoKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KICAgIGlmICghaXNzZXQoJF9QT1NUWydJRCddKSkgew0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KDQogICAgaWYgKGlzc2V0KCRfUE9TVFsnQWxpYXMnXSkpIHsNCiAgICAgICAgJF9QT1NUWydBbGlhcyddID0gRm9ybWF0U3RyaW5nKCRfUE9TVFsnQWxpYXMnXSwgJ1tub3NjcmlwdF0nKTsNCiAgICB9DQoNCiAgICAkdGFnID0gbmV3IFRhZygpOw0KICAgIGlmIChHZXRWYXJzKCdJRCcsICdQT1NUJykgPT0gMCkgew0KICAgIH0gZWxzZSB7DQogICAgICAgICR0YWctPkxvYWRJbmZvQnlJRChHZXRWYXJzKCdJRCcsICdQT1NUJykpOw0KICAgIH0NCg0KICAgIGZvcmVhY2ggKCR6YnAtPmRhdGFpbmZvWydUYWcnXSBhcyAka2V5ID0+ICR2YWx1ZSkgew0KICAgICAgICBpZiAoJGtleSA9PSAnSUQnIHx8ICRrZXkgPT0gJ01ldGEnKSB7DQogICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoaXNzZXQoJF9QT1NUWyRrZXldKSkgew0KICAgICAgICAgICAgJHRhZy0+JGtleSA9IEdldFZhcnMoJGtleSwgJ1BPU1QnKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIEZpbHRlck1ldGEoJHRhZyk7DQoNCiAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9Qb3N0VGFnX0NvcmUnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgJGZwbmFtZSgkdGFnKTsNCiAgICB9DQoNCiAgICBGaWx0ZXJUYWcoJHRhZyk7DQoNCiAgICBpZiAoJHpicC0+b3B0aW9uWydaQ19MQVJHRV9EQVRBJ10gPT0gZmFsc2UpIHsNCiAgICAgICAgQ291bnRUYWcoJHRhZyk7DQogICAgfQ0KDQogICAgJHRhZy0+U2F2ZSgpOw0KDQogICAgaWYgKEdldFZhcnMoJ0FkZE5hdmJhcicsICdQT1NUJykgPT0gMCkgew0KICAgICAgICAkemJwLT5EZWxJdGVtVG9OYXZiYXIoJ3RhZycsICR0YWctPklEKTsNCiAgICB9DQoNCiAgICBpZiAoR2V0VmFycygnQWRkTmF2YmFyJywgJ1BPU1QnKSA9PSAxKSB7DQogICAgICAgICR6YnAtPkFkZEl0ZW1Ub05hdmJhcigndGFnJywgJHRhZy0+SUQsICR0YWctPk5hbWUsICR0YWctPlVybCk7DQogICAgfQ0KDQogICAgJHpicC0+QWRkQnVpbGRNb2R1bGUoJ3RhZ3MnKTsNCg0KICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1Bvc3RUYWdfU3VjY2VlZCddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAkZnBuYW1lKCR0YWcpOw0KICAgIH0NCg0KICAgIHJldHVybiB0cnVlOw0KfQ0KDQovKioNCiAqIOWIoOmZpOagh+etvi4NCiAqDQogKiBAcmV0dXJuIGJvb2wNCiAqLw0KZnVuY3Rpb24gRGVsVGFnKCkNCnsNCiAgICBnbG9iYWwgJHpicDsNCg0KICAgICR0YWdpZCA9IChpbnQpIEdldFZhcnMoJ2lkJywgJ0dFVCcpOw0KICAgICR0YWcgPSAkemJwLT5HZXRUYWdCeUlEKCR0YWdpZCk7DQogICAgaWYgKCR0YWctPklEID4gMCkgew0KICAgICAgICAkdGFnLT5EZWwoKTsNCiAgICAgICAgJHpicC0+RGVsSXRlbVRvTmF2YmFyKCd0YWcnLCAkdGFnLT5JRCk7DQogICAgICAgICR6YnAtPkFkZEJ1aWxkTW9kdWxlKCd0YWdzJyk7DQogICAgICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX0RlbFRhZ19TdWNjZWVkJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICAgICAkZnBuYW1lKCR0YWcpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcmV0dXJuIHRydWU7DQp9DQoNCi8vIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQovKioNCiAqIOaPkOS6pOeUqOaIt+aVsOaNri4NCiAqDQogKiBAdGhyb3dzIEV4Y2VwdGlvbg0KICoNCiAqIEByZXR1cm4gYm9vbA0KICovDQpmdW5jdGlvbiBQb3N0TWVtYmVyKCkNCnsNCiAgICBnbG9iYWwgJHpicDsNCiAgICAkbWVtID0gbmV3IE1lbWJlcigpOw0KDQogICAgJGRhdGEgPSBhcnJheSgpOw0KDQogICAgaWYgKCFpc3NldCgkX1BPU1RbJ0lEJ10pKSB7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQoNCiAgICAvL+ajgOa1i+WvhueggQ0KICAgIGlmICh0cmltKCRfUE9TVFsiUGFzc3dvcmQiXSkgPT0gJycgfHwgdHJpbSgkX1BPU1RbIlBhc3N3b3JkUmUiXSkgPT0gJycgfHwgJF9QT1NUWyJQYXNzd29yZCJdICE9ICRfUE9TVFsiUGFzc3dvcmRSZSJdKSB7DQogICAgICAgIHVuc2V0KCRfUE9TVFsiUGFzc3dvcmQiXSk7DQogICAgICAgIHVuc2V0KCRfUE9TVFsiUGFzc3dvcmRSZSJdKTsNCiAgICB9DQoNCiAgICAkZGF0YVsnSUQnXSA9ICRfUE9TVFsnSUQnXTsNCiAgICAkZWRpdGFibGVGaWVsZCA9IGFycmF5KCdQYXNzd29yZCcsICdFbWFpbCcsICdIb21lUGFnZScsICdBbGlhcycsICdJbnRybycsICdUZW1wbGF0ZScpOw0KICAgIC8vIOWmguaenOaYr+euoeeQhuWRmO+8jOWImeWGjeWFgeiuuOaUueWKqOWIq+eahOWtl+autQ0KICAgIGlmICgkemJwLT5DaGVja1JpZ2h0cygnTWVtYmVyQWxsJykpIHsNCiAgICAgICAgYXJyYXlfcHVzaCgkZWRpdGFibGVGaWVsZCwgJ0xldmVsJywgJ1N0YXR1cycsICdOYW1lJywgJ0lQJyk7DQogICAgfSBlbHNlIHsNCiAgICAgICAgJGRhdGFbJ0lEJ10gPSAkemJwLT51c2VyLT5JRDsNCiAgICB9DQogICAgLy8g5aSN5Yi25LiA5Liq5paw5pWw57uEDQogICAgZm9yZWFjaCAoJGVkaXRhYmxlRmllbGQgYXMgJHZhbHVlKSB7DQogICAgICAgIGlmIChpc3NldCgkX1BPU1RbJHZhbHVlXSkpIHsNCiAgICAgICAgICAgICRkYXRhWyR2YWx1ZV0gPSBHZXRWYXJzKCR2YWx1ZSwgJ1BPU1QnKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGlmIChpc3NldCgkZGF0YVsnTmFtZSddKSkgew0KICAgICAgICAvLyDmo4DmtYvlkIzlkI0NCiAgICAgICAgJG0gPSAkemJwLT5HZXRNZW1iZXJCeU5hbWUoJGRhdGFbJ05hbWUnXSk7DQogICAgICAgIGlmICgkbS0+SUQgPiAwICYmICRtLT5JRCAhPSAkZGF0YVsnSUQnXSkgew0KICAgICAgICAgICAgJHpicC0+U2hvd0Vycm9yKDYyLCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgaWYgKGlzc2V0KCRkYXRhWydBbGlhcyddKSkgew0KICAgICAgICAkZGF0YVsnQWxpYXMnXSA9IEZvcm1hdFN0cmluZygkZGF0YVsnQWxpYXMnXSwgJ1tub3NjcmlwdF0nKTsNCiAgICB9DQoNCiAgICBpZiAoJGRhdGFbJ0lEJ10gPT0gMCkgew0KICAgICAgICBpZiAoIWlzc2V0KCRkYXRhWydQYXNzd29yZCddKSB8fCAkZGF0YVsnUGFzc3dvcmQnXSA9PSAnJykgew0KICAgICAgICAgICAgJHpicC0+U2hvd0Vycm9yKDczLCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgICAgICB9DQogICAgICAgICRkYXRhWydJUCddID0gR2V0R3Vlc3RJUCgpOw0KICAgICAgICBpZiAoJG1lbS0+R3VpZCA9PSAnJykgew0KICAgICAgICAgICAgJG1lbS0+R3VpZCA9IEdldEd1aWQoKTsNCiAgICAgICAgfQ0KICAgIH0gZWxzZSB7DQogICAgICAgICRtZW0tPkxvYWRJbmZvQnlJRCgkZGF0YVsnSUQnXSk7DQogICAgfQ0KDQogICAgZm9yZWFjaCAoJHpicC0+ZGF0YWluZm9bJ01lbWJlciddIGFzICRrZXkgPT4gJHZhbHVlKSB7DQogICAgICAgIGlmICgka2V5ID09ICdJRCcgfHwgJGtleSA9PSAnTWV0YScpIHsNCiAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICB9DQogICAgICAgIGlmIChpc3NldCgkZGF0YVska2V5XSkpIHsNCiAgICAgICAgICAgICRtZW0tPiRrZXkgPSAkZGF0YVska2V5XTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8vIOeEtuWQju+8jOivu+WFpeWvhueggQ0KICAgIC8vIOWvhueggemcgOimgeWNleeLrOWkhOeQhu+8jOWboOS4uuaLv+S4jeWIsOeUqOaIt0d1aWQNCiAgICBpZiAoaXNzZXQoJGRhdGFbJ1Bhc3N3b3JkJ10pKSB7DQogICAgICAgIGlmICgkZGF0YVsnUGFzc3dvcmQnXSAhPSAnJykgew0KICAgICAgICAgICAgaWYgKHN0cmxlbigkZGF0YVsnUGFzc3dvcmQnXSkgPCAkemJwLT5vcHRpb25bJ1pDX1BBU1NXT1JEX01JTiddIHx8IHN0cmxlbigkZGF0YVsnUGFzc3dvcmQnXSkgPiAkemJwLT5vcHRpb25bJ1pDX1BBU1NXT1JEX01BWCddKSB7DQogICAgICAgICAgICAgICAgJHpicC0+U2hvd0Vycm9yKDU0LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFDaGVja1JlZ0V4cCgkZGF0YVsnUGFzc3dvcmQnXSwgJ1twYXNzd29yZF0nKSkgew0KICAgICAgICAgICAgICAgICR6YnAtPlNob3dFcnJvcig1NCwgX19GSUxFX18sIF9fTElORV9fKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgICRtZW0tPlBhc3N3b3JkID0gTWVtYmVyOjpHZXRQYXNzV29yZEJ5R3VpZCgkZGF0YVsnUGFzc3dvcmQnXSwgJG1lbS0+R3VpZCk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBGaWx0ZXJNZXRhKCRtZW0pOw0KDQogICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fUG9zdE1lbWJlcl9Db3JlJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICRmcG5hbWUoJG1lbSk7DQogICAgfQ0KDQogICAgRmlsdGVyTWVtYmVyKCRtZW0pOw0KDQogICAgQ291bnRNZW1iZXIoJG1lbSwgYXJyYXkobnVsbCwgbnVsbCwgbnVsbCwgbnVsbCkpOw0KDQogICAgLy8g5p+l6K+i5ZCM5ZCNDQogICAgaWYgKGlzc2V0KCRkYXRhWydOYW1lJ10pKSB7DQogICAgICAgIGlmICgkZGF0YVsnSUQnXSA9PSAwKSB7DQogICAgICAgICAgICBpZiAoJHpicC0+Q2hlY2tNZW1iZXJOYW1lRXhpc3QoJGRhdGFbJ05hbWUnXSkpIHsNCiAgICAgICAgICAgICAgICAkemJwLT5TaG93RXJyb3IoNjIsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAkbWVtLT5TYXZlKCk7DQoNCiAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9Qb3N0TWVtYmVyX1N1Y2NlZWQnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgJGZwbmFtZSgkbWVtKTsNCiAgICB9DQoNCiAgICAkemJwLT5BZGRCdWlsZE1vZHVsZSgnYXV0aG9ycycpOw0KDQogICAgaWYgKGlzc2V0KCRkYXRhWydQYXNzd29yZCddKSkgew0KICAgICAgICBpZiAoJG1lbS0+SUQgPT0gJHpicC0+dXNlci0+SUQpIHsNCiAgICAgICAgICAgIGlmICghZGVmaW5lZCgnSU5fQUpBWF9QUk9DRVNTSU5HJykgfHwgY29uc3RhbnQoJ0lOX0FKQVhfUFJPQ0VTU0lORycpICE9IHRydWUpIHsNCiAgICAgICAgICAgICAgICBSZWRpcmVjdCgkemJwLT5ob3N0IC4gJ3piX3N5c3RlbS9jbWQucGhwP2FjdD1sb2dpbicpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KDQogICAgcmV0dXJuIHRydWU7DQp9DQoNCi8qKg0KICog5Yig6Zmk55So5oi3Lg0KICoNCiAqIEByZXR1cm4gYm9vbA0KICovDQpmdW5jdGlvbiBEZWxNZW1iZXIoKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KDQogICAgJGlkID0gKGludCkgR2V0VmFycygnaWQnLCAnR0VUJyk7DQogICAgJG1lbSA9ICR6YnAtPkdldE1lbWJlckJ5SUQoJGlkKTsNCiAgICBpZiAoJG1lbS0+SUQgPiAwICYmICRtZW0tPklEICE9ICR6YnAtPnVzZXItPklEKSB7DQogICAgICAgIGlmICgkbWVtLT5Jc0dvZCAhPT0gdHJ1ZSkgew0KICAgICAgICAgICAgRGVsTWVtYmVyX0FsbERhdGEoJGlkKTsNCiAgICAgICAgICAgICRtZW0tPkRlbCgpOw0KICAgICAgICAgICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fRGVsTWVtYmVyX1N1Y2NlZWQnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgICAgICAgICAkZnBuYW1lKCRtZW0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfSBlbHNlIHsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCg0KICAgIHJldHVybiB0cnVlOw0KfQ0KDQovKioNCiAqIOWIoOmZpOeUqOaIt+S4i+aJgOacieaVsOaNru+8iOWMheaLrOaWh+eroOOAgeivhOiuuuOAgemZhOS7tu+8iS4NCiAqDQogKiBAcGFyYW0gaW50ICRpZCDnlKjmiLdJRA0KICovDQpmdW5jdGlvbiBEZWxNZW1iZXJfQWxsRGF0YSgkaWQpDQp7DQogICAgZ2xvYmFsICR6YnA7DQoNCiAgICAkdyA9IGFycmF5KCk7DQogICAgJHdbXSA9IGFycmF5KCc9JywgJ2xvZ19BdXRob3JJRCcsICRpZCk7DQoNCiAgICAvKiogQHZhciBQb3N0W10gJGFydGljbGVzICovDQogICAgJGFydGljbGVzID0gJHpicC0+R2V0UG9zdExpc3QoJyonLCAkdyk7DQogICAgZm9yZWFjaCAoJGFydGljbGVzIGFzICRhKSB7DQogICAgICAgICRhLT5EZWwoKTsNCiAgICB9DQoNCiAgICAkdyA9IGFycmF5KCk7DQogICAgJHdbXSA9IGFycmF5KCc9JywgJ2NvbW1fQXV0aG9ySUQnLCAkaWQpOw0KICAgIC8qKiBAdmFyIENvbW1lbnRbXSAkY29tbWVudHMgKi8NCiAgICAkY29tbWVudHMgPSAkemJwLT5HZXRDb21tZW50TGlzdCgnKicsICR3KTsNCiAgICBmb3JlYWNoICgkY29tbWVudHMgYXMgJGMpIHsNCiAgICAgICAgJGMtPkF1dGhvcklEID0gMDsNCiAgICAgICAgJGMtPlNhdmUoKTsNCiAgICB9DQoNCiAgICAkdyA9IGFycmF5KCk7DQogICAgJHdbXSA9IGFycmF5KCc9JywgJ3VsX0F1dGhvcklEJywgJGlkKTsNCiAgICAvKiogQHZhciBVcGxvYWRbXSAkdXBsb2FkcyAqLw0KICAgICR1cGxvYWRzID0gJHpicC0+R2V0VXBsb2FkTGlzdCgnKicsICR3KTsNCiAgICBmb3JlYWNoICgkdXBsb2FkcyBhcyAkdSkgew0KICAgICAgICAkdS0+RGVsKCk7DQogICAgICAgICR1LT5EZWxGaWxlKCk7DQogICAgfQ0KfQ0KDQovLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KLyoqDQogKiDmj5DkuqTmqKHlnZfmlbDmja4uDQogKg0KICogQHJldHVybiBib29sDQogKi8NCmZ1bmN0aW9uIFBvc3RNb2R1bGUoKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KDQogICAgaWYgKGlzc2V0KCRfUE9TVFsnY2F0YWxvZ19zdHlsZSddKSkgew0KICAgICAgICAkemJwLT5vcHRpb25bJ1pDX01PRFVMRV9DQVRBTE9HX1NUWUxFJ10gPSAkX1BPU1RbJ2NhdGFsb2dfc3R5bGUnXTsNCiAgICAgICAgJHpicC0+U2F2ZU9wdGlvbigpOw0KICAgIH0NCg0KICAgIGlmICgkX1BPU1RbJ0ZpbGVOYW1lJ10gPT0gJ2FyY2hpdmVzJykgew0KICAgICAgICBpZiAoaXNzZXQoJF9QT1NUWydhcmNoaXZlc19zdHlsZSddKSkgew0KICAgICAgICAgICAgJHpicC0+b3B0aW9uWydaQ19NT0RVTEVfQVJDSElWRVNfU1RZTEUnXSA9IDE7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAkemJwLT5vcHRpb25bJ1pDX01PRFVMRV9BUkNISVZFU19TVFlMRSddID0gMDsNCiAgICAgICAgfQ0KICAgICAgICAkemJwLT5TYXZlT3B0aW9uKCk7DQogICAgfQ0KDQogICAgaWYgKCFpc3NldCgkX1BPU1RbJ0lEJ10pKSB7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQoNCiAgICBpZiAoIUdldFZhcnMoJ0ZpbGVOYW1lJywgJ1BPU1QnKSkgew0KICAgICAgICAkX1BPU1RbJ0ZpbGVOYW1lJ10gPSAnbW9kJyAuIHJhbmQoMTAwMCwgMjAwMCk7DQogICAgfSBlbHNlIHsNCiAgICAgICAgJF9QT1NUWydGaWxlTmFtZSddID0gc3RydG9sb3dlcigkX1BPU1RbJ0ZpbGVOYW1lJ10pOw0KICAgIH0NCiAgICBpZiAoIUdldFZhcnMoJ0h0bWxJRCcsICdQT1NUJykpIHsNCiAgICAgICAgJF9QT1NUWydIdG1sSUQnXSA9ICRfUE9TVFsnRmlsZU5hbWUnXTsNCiAgICB9DQogICAgaWYgKGlzc2V0KCRfUE9TVFsnTWF4TGknXSkpIHsNCiAgICAgICAgJF9QT1NUWydNYXhMaSddID0gKGludCkgJF9QT1NUWydNYXhMaSddOw0KICAgIH0NCiAgICBpZiAoaXNzZXQoJF9QT1NUWydJc0hpZGVUaXRsZSddKSkgew0KICAgICAgICAkX1BPU1RbJ0lzSGlkZVRpdGxlJ10gPSAoaW50KSAkX1BPU1RbJ0lzSGlkZVRpdGxlJ107DQogICAgfQ0KICAgIGlmICghaXNzZXQoJF9QT1NUWydUeXBlJ10pKSB7DQogICAgICAgICRfUE9TVFsnVHlwZSddID0gJ2Rpdic7DQogICAgfQ0KICAgIGlmIChpc3NldCgkX1BPU1RbJ0NvbnRlbnQnXSkpIHsNCiAgICAgICAgaWYgKCRfUE9TVFsnVHlwZSddICE9ICdkaXYnKSB7DQogICAgICAgICAgICAkX1BPU1RbJ0NvbnRlbnQnXSA9IHN0cl9yZXBsYWNlKGFycmF5KCJcciIsICJcbiIpLCBhcnJheSgnJywgJycpLCAkX1BPU1RbJ0NvbnRlbnQnXSk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvKiogQHZhciBNb2R1bGUgJG1vZCAqLw0KICAgICRtb2QgPSAkemJwLT5HZXRNb2R1bGVCeUlEKEdldFZhcnMoJ0lEJywgJ1BPU1QnKSk7DQoNCiAgICBmb3JlYWNoICgkemJwLT5kYXRhaW5mb1snTW9kdWxlJ10gYXMgJGtleSA9PiAkdmFsdWUpIHsNCiAgICAgICAgaWYgKCRrZXkgPT0gJ0lEJyB8fCAka2V5ID09ICdNZXRhJykgew0KICAgICAgICAgICAgY29udGludWU7DQogICAgICAgIH0NCiAgICAgICAgaWYgKGlzc2V0KCRfUE9TVFska2V5XSkpIHsNCiAgICAgICAgICAgICRtb2QtPiRrZXkgPSBHZXRWYXJzKCRrZXksICdQT1NUJyk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBpZiAoaXNzZXQoJF9QT1NUWydOb1JlZnJlc2gnXSkpIHsNCiAgICAgICAgJG1vZC0+Tm9SZWZyZXNoID0gKGJvb2wpICRfUE9TVFsnTm9SZWZyZXNoJ107DQogICAgfQ0KDQogICAgRmlsdGVyTWV0YSgkbW9kKTsNCg0KICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1Bvc3RNb2R1bGVfQ29yZSddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAkZnBuYW1lKCRtb2QpOw0KICAgIH0NCg0KICAgIEZpbHRlck1vZHVsZSgkbW9kKTsNCg0KICAgICRtb2QtPlNhdmUoKTsNCg0KICAgIGlmICgoaW50KSBHZXRWYXJzKCdJRCcsICdQT1NUJykgPiAwKSB7DQogICAgICAgICR6YnAtPkFkZEJ1aWxkTW9kdWxlKCRtb2QtPkZpbGVOYW1lKTsNCiAgICB9DQoNCiAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9Qb3N0TW9kdWxlX1N1Y2NlZWQnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgJGZwbmFtZSgkbW9kKTsNCiAgICB9DQoNCiAgICByZXR1cm4gdHJ1ZTsNCn0NCg0KLyoqDQogKiDliKDpmaTmqKHlnZcuDQogKg0KICogQHJldHVybiBib29sDQogKi8NCmZ1bmN0aW9uIERlbE1vZHVsZSgpDQp7DQogICAgZ2xvYmFsICR6YnA7DQoNCiAgICBpZiAoR2V0VmFycygnc291cmNlJywgJ0dFVCcpID09ICd0aGVtZScpIHsNCiAgICAgICAgJGZuID0gR2V0VmFycygnZmlsZW5hbWUnLCAnR0VUJyk7DQogICAgICAgIGlmICgkZm4pIHsNCiAgICAgICAgICAgICRtb2QgPSAkemJwLT5HZXRNb2R1bGVCeUZpbGVOYW1lKCRmbik7DQogICAgICAgICAgICBpZiAoJG1vZC0+RmlsZU5hbWUgPT0gJGZuKSB7DQogICAgICAgICAgICAgICAgJG1vZC0+RGVsKCk7DQogICAgICAgICAgICAgICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fRGVsTW9kdWxlX1N1Y2NlZWQnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgICAgICAgICAgICAgJGZwbmFtZSgkbW9kKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHVuc2V0KCRtb2QpOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCg0KICAgICRpZCA9IChpbnQpIEdldFZhcnMoJ2lkJywgJ0dFVCcpOw0KICAgICRtb2QgPSAkemJwLT5HZXRNb2R1bGVCeUlEKCRpZCk7DQogICAgaWYgKCRtb2QtPlNvdXJjZSAhPSAnc3lzdGVtJykgew0KICAgICAgICAkbW9kLT5EZWwoKTsNCiAgICAgICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fRGVsTW9kdWxlX1N1Y2NlZWQnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgICAgICRmcG5hbWUoJG1vZCk7DQogICAgICAgIH0NCiAgICB9IGVsc2Ugew0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KICAgIHVuc2V0KCRtb2QpOw0KDQogICAgcmV0dXJuIHRydWU7DQp9DQoNCi8vIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQovKioNCiAqIOmZhOS7tuS4iuS8oC4NCiAqDQogKiBAdGhyb3dzIEV4Y2VwdGlvbg0KICovDQpmdW5jdGlvbiBQb3N0VXBsb2FkKCkNCnsNCiAgICBnbG9iYWwgJHpicDsNCg0KICAgIGZvcmVhY2ggKCRfRklMRVMgYXMgJGtleSA9PiAkdmFsdWUpIHsNCiAgICAgICAgaWYgKCRfRklMRVNbJGtleV1bJ2Vycm9yJ10gPT0gMCkgew0KICAgICAgICAgICAgaWYgKGlzX3VwbG9hZGVkX2ZpbGUoJF9GSUxFU1ska2V5XVsndG1wX25hbWUnXSkpIHsNCiAgICAgICAgICAgICAgICAkdXBsb2FkID0gbmV3IFVwbG9hZCgpOw0KICAgICAgICAgICAgICAgICR1cGxvYWQtPk5hbWUgPSAkX0ZJTEVTWyRrZXldWyduYW1lJ107DQogICAgICAgICAgICAgICAgaWYgKEdldFZhcnMoJ2F1dG9fcmVuYW1lJywgJ1BPU1QnKSA9PSAnb24nIHx8IEdldFZhcnMoJ2F1dG9fcmVuYW1lJywgJ1BPU1QnKSA9PSB0cnVlKSB7DQogICAgICAgICAgICAgICAgICAgICR0ZW1wX2FyciA9IGV4cGxvZGUoIi4iLCAkdXBsb2FkLT5OYW1lKTsNCiAgICAgICAgICAgICAgICAgICAgJGZpbGVfZXh0ID0gc3RydG9sb3dlcih0cmltKGFycmF5X3BvcCgkdGVtcF9hcnIpKSk7DQogICAgICAgICAgICAgICAgICAgICR1cGxvYWQtPk5hbWUgPSBkYXRlKCJZbWRIaXMiKSAuIHRpbWUoKSAuIHJhbmQoMTAwMDAsIDk5OTk5KSAuICcuJyAuICRmaWxlX2V4dDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgJHVwbG9hZC0+U291cmNlTmFtZSA9ICRfRklMRVNbJGtleV1bJ25hbWUnXTsNCiAgICAgICAgICAgICAgICAkdXBsb2FkLT5NaW1lVHlwZSA9ICRfRklMRVNbJGtleV1bJ3R5cGUnXTsNCiAgICAgICAgICAgICAgICAkdXBsb2FkLT5TaXplID0gJF9GSUxFU1ska2V5XVsnc2l6ZSddOw0KICAgICAgICAgICAgICAgICR1cGxvYWQtPkF1dGhvcklEID0gJHpicC0+dXNlci0+SUQ7DQoNCiAgICAgICAgICAgICAgICAvL+ajgOafpeWQjOaciOmHjeWQjQ0KICAgICAgICAgICAgICAgICRkMSA9IGRhdGUoJ1ktbS0wMScsIHRpbWUoKSk7DQogICAgICAgICAgICAgICAgJGQyID0gZGF0ZSgnWS1tLWQnLCBzdHJ0b3RpbWUoZGF0ZSgnWS1tLTAxJywgdGltZSgpKSAuICcgKzEgbW9udGggLTEgZGF5JykpOw0KICAgICAgICAgICAgICAgICRkMSA9IHN0cnRvdGltZSgkZDEpOw0KICAgICAgICAgICAgICAgICRkMiA9IHN0cnRvdGltZSgkZDIpOw0KICAgICAgICAgICAgICAgICR3ID0gYXJyYXkoKTsNCiAgICAgICAgICAgICAgICAkd1tdID0gYXJyYXkoJz0nLCAndWxfTmFtZScsICR1cGxvYWQtPk5hbWUpOw0KICAgICAgICAgICAgICAgICR3W10gPSBhcnJheSgnPj0nLCAndWxfUG9zdFRpbWUnLCAkZDEpOw0KICAgICAgICAgICAgICAgICR3W10gPSBhcnJheSgnPD0nLCAndWxfUG9zdFRpbWUnLCAkZDIpOw0KICAgICAgICAgICAgICAgICR1cGxvYWRzID0gJHpicC0+R2V0VXBsb2FkTGlzdCgnKicsICR3KTsNCiAgICAgICAgICAgICAgICBpZiAoY291bnQoJHVwbG9hZHMpID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAkemJwLT5TaG93RXJyb3IoMjgsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKCEkdXBsb2FkLT5DaGVja0V4dE5hbWUoKSkgew0KICAgICAgICAgICAgICAgICAgICAkemJwLT5TaG93RXJyb3IoMjYsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKCEkdXBsb2FkLT5DaGVja1NpemUoKSkgew0KICAgICAgICAgICAgICAgICAgICAkemJwLT5TaG93RXJyb3IoMjcsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgJHVwbG9hZC0+U2F2ZUZpbGUoJF9GSUxFU1ska2V5XVsndG1wX25hbWUnXSk7DQogICAgICAgICAgICAgICAgJHVwbG9hZC0+U2F2ZSgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KICAgIGlmIChpc3NldCgkdXBsb2FkKSkgew0KICAgICAgICBDb3VudE1lbWJlckFycmF5KGFycmF5KCR1cGxvYWQtPkF1dGhvcklEKSwgYXJyYXkoMCwgMCwgMCwgKzEpKTsNCiAgICB9DQp9DQoNCi8qKg0KICog5Yig6Zmk6ZmE5Lu2Lg0KICoNCiAqIEByZXR1cm4gYm9vbA0KICovDQpmdW5jdGlvbiBEZWxVcGxvYWQoKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KDQogICAgJGlkID0gKGludCkgR2V0VmFycygnaWQnLCAnR0VUJyk7DQogICAgJHUgPSAkemJwLT5HZXRVcGxvYWRCeUlEKCRpZCk7DQogICAgaWYgKCR6YnAtPkNoZWNrUmlnaHRzKCdVcGxvYWRBbGwnKSB8fCAoISR6YnAtPkNoZWNrUmlnaHRzKCdVcGxvYWRBbGwnKSAmJiAkdS0+QXV0aG9ySUQgPT0gJHpicC0+dXNlci0+SUQpKSB7DQogICAgICAgICR1LT5EZWwoKTsNCiAgICAgICAgQ291bnRNZW1iZXJBcnJheShhcnJheSgkdS0+QXV0aG9ySUQpLCBhcnJheSgwLCAwLCAwLCAtMSkpOw0KICAgICAgICAkdS0+RGVsRmlsZSgpOw0KICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQoNCiAgICByZXR1cm4gdHJ1ZTsNCn0NCg0KLy8jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCi8qKg0KICog5ZCv55So5o+S5Lu2Lg0KICoNCiAqIEBwYXJhbSBzdHJpbmcgJG5hbWUg5o+S5Lu2SUQNCiAqDQogKiBAdGhyb3dzIEV4Y2VwdGlvbg0KICoNCiAqIEByZXR1cm4gc3RyaW5nIOi/lOWbnuaPkuS7tklEDQogKi8NCmZ1bmN0aW9uIEVuYWJsZVBsdWdpbigkbmFtZSkNCnsNCiAgICBnbG9iYWwgJHpicDsNCg0KICAgICRhcHAgPSAkemJwLT5Mb2FkQXBwKCdwbHVnaW4nLCAkbmFtZSk7DQogICAgJGFwcC0+Q2hlY2tDb21wYXRpYmlsaXR5KCk7DQoNCiAgICAkemJwLT5vcHRpb25bJ1pDX1VTSU5HX1BMVUdJTl9MSVNUJ10gPSBBZGROYW1lSW5TdHJpbmcoJHpicC0+b3B0aW9uWydaQ19VU0lOR19QTFVHSU5fTElTVCddLCAkbmFtZSk7DQoNCiAgICAkYXJyYXkgPSBleHBsb2RlKCd8JywgJHpicC0+b3B0aW9uWydaQ19VU0lOR19QTFVHSU5fTElTVCddKTsNCiAgICAkYXJyYXloYXMgPSBhcnJheSgpOw0KICAgIGZvcmVhY2ggKCRhcnJheSBhcyAkcCkgew0KICAgICAgICBpZiAoaXNfcmVhZGFibGUoJHpicC0+dXNlcnNkaXIgLiAncGx1Z2luLycgLiAkcCAuICcvcGx1Z2luLnhtbCcpKSB7DQogICAgICAgICAgICAkYXJyYXloYXNbXSA9ICRwOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgJHpicC0+b3B0aW9uWydaQ19VU0lOR19QTFVHSU5fTElTVCddID0gdHJpbShpbXBsb2RlKCd8JywgJGFycmF5aGFzKSwgJ3wnKTsNCg0KICAgICR6YnAtPlNhdmVPcHRpb24oKTsNCg0KICAgIHJldHVybiAkbmFtZTsNCn0NCg0KLyoqDQogKiDnpoHnlKjmj5Lku7YuDQogKg0KICogQHBhcmFtIHN0cmluZyAkbmFtZSDmj5Lku7ZJRA0KICoNCiAqIEByZXR1cm4gQXBwfGJvb2wNCiAqLw0KZnVuY3Rpb24gRGlzYWJsZVBsdWdpbigkbmFtZSkNCnsNCiAgICBnbG9iYWwgJHpicDsNCg0KICAgICRhcHBzID0gJHpicC0+TG9hZFBsdWdpbnMoKTsNCiAgICAkYXBwc1tdID0gJHpicC0+TG9hZEFwcCgndGhlbWUnLCAkemJwLT50aGVtZSk7DQogICAgZm9yZWFjaCAoJGFwcHMgYXMgJGFwcCkgew0KICAgICAgICBpZiAoISR6YnAtPkNoZWNrQXBwKCRhcHAtPmlkKSkgew0KICAgICAgICAgICAgY29udGludWU7DQogICAgICAgIH0NCiAgICAgICAgJGRlcGVuZExpc3QgPSBleHBsb2RlKCd8JywgJGFwcC0+YWR2YW5jZWRfZGVwZW5kZW5jeSk7DQogICAgICAgIGZvcmVhY2ggKCRkZXBlbmRMaXN0IGFzICRkZXBlbmQpIHsNCiAgICAgICAgICAgIGlmICgkZGVwZW5kID09ICRuYW1lKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICRhcHA7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBVbmluc3RhbGxQbHVnaW4oJG5hbWUpOw0KICAgICR6YnAtPm9wdGlvblsnWkNfVVNJTkdfUExVR0lOX0xJU1QnXSA9IERlbE5hbWVJblN0cmluZygkemJwLT5vcHRpb25bJ1pDX1VTSU5HX1BMVUdJTl9MSVNUJ10sICRuYW1lKTsNCg0KICAgICRhcnJheSA9IGV4cGxvZGUoJ3wnLCAkemJwLT5vcHRpb25bJ1pDX1VTSU5HX1BMVUdJTl9MSVNUJ10pOw0KICAgICRhcnJheWhhcyA9IGFycmF5KCk7DQogICAgZm9yZWFjaCAoJGFycmF5IGFzICRwKSB7DQogICAgICAgIGlmIChpc19yZWFkYWJsZSgkemJwLT51c2Vyc2RpciAuICdwbHVnaW4vJyAuICRwIC4gJy9wbHVnaW4ueG1sJykpIHsNCiAgICAgICAgICAgICRhcnJheWhhc1tdID0gJHA7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAkemJwLT5vcHRpb25bJ1pDX1VTSU5HX1BMVUdJTl9MSVNUJ10gPSB0cmltKGltcGxvZGUoJ3wnLCAkYXJyYXloYXMpLCAnfCcpOw0KDQogICAgJHpicC0+U2F2ZU9wdGlvbigpOw0KDQogICAgcmV0dXJuIHRydWU7DQp9DQoNCi8qKg0KICog6K6+572u5b2T5YmN5Li76aKY5qC35byPLg0KICoNCiAqIEBwYXJhbSBzdHJpbmcgJHRoZW1lIOS4u+mimElEDQogKiBAcGFyYW0gc3RyaW5nICRzdHlsZSDmoLflvI/lkI0NCiAqDQogKiBAdGhyb3dzIEV4Y2VwdGlvbg0KICoNCiAqIEByZXR1cm4gc3RyaW5nIOi/lOWbnuS4u+mimElEDQogKi8NCmZ1bmN0aW9uIFNldFRoZW1lKCR0aGVtZSwgJHN0eWxlKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KDQogICAgJGFwcCA9ICR6YnAtPkxvYWRBcHAoJ3RoZW1lJywgJHRoZW1lKTsNCiAgICAkYXBwLT5DaGVja0NvbXBhdGliaWxpdHkoKTsNCg0KICAgICRvbGRUaGVtZSA9ICR6YnAtPm9wdGlvblsnWkNfQkxPR19USEVNRSddOw0KICAgICRvbGQgPSAkemJwLT5Mb2FkQXBwKCd0aGVtZScsICRvbGRUaGVtZSk7DQogICAgaWYgKCR0aGVtZSAhPSAkb2xkVGhlbWUgJiYgJG9sZC0+aXNsb2FkZWQgPT0gdHJ1ZSkgew0KICAgICAgICAkb2xkLT5TYXZlU2lkZUJhcnMoKTsNCiAgICB9DQoNCiAgICAkemJwLT5vcHRpb25bJ1pDX0JMT0dfVEhFTUUnXSA9ICR0aGVtZTsNCiAgICAkemJwLT5vcHRpb25bJ1pDX0JMT0dfQ1NTJ10gPSAkc3R5bGU7DQogICAgaWYgKCR0aGVtZSAhPSAkb2xkVGhlbWUpIHsNCiAgICAgICAgJGFwcC0+TG9hZFNpZGVCYXJzKCk7DQogICAgfSBlbHNlIHsNCiAgICAgICAgJGFwcC0+U2F2ZVNpZGVCYXJzKCk7DQogICAgfQ0KDQogICAgJHpicC0+U2F2ZU9wdGlvbigpOw0KDQogICAgaWYgKCRvbGRUaGVtZSAhPSAkdGhlbWUpIHsNCiAgICAgICAgVW5pbnN0YWxsUGx1Z2luKCRvbGRUaGVtZSk7DQogICAgfQ0KDQogICAgcmV0dXJuICR0aGVtZTsNCn0NCg0KLyoqDQogKiDorr7nva7kvqfmoI8uDQogKi8NCmZ1bmN0aW9uIFNldFNpZGViYXIoKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KICAgIC8vIEBUT0RPOiDlsIbmraTlpITnmoQ55bi46YeP5YyWDQogICAgZm9yICgkaSA9IDE7ICRpIDw9IDk7ICRpKyspIHsNCiAgICAgICAgJG9wdGlvbk5hbWUgPSAkaSA9PT0gMSA/ICdaQ19TSURFQkFSX09SREVSJyA6ICJaQ19TSURFQkFSJHtpfV9PUkRFUiI7DQogICAgICAgICRmb3JtTmFtZSA9ICRpID09PSAxID8gJ3NpZGViYXInIDogInNpZGViYXIke2l9IjsNCiAgICAgICAgJHpicC0+b3B0aW9uWyRvcHRpb25OYW1lXSA9IHRyaW0oR2V0VmFycygkZm9ybU5hbWUsICdQT1NUJyksICd8Jyk7DQogICAgfQ0KICAgICR6YnAtPlNhdmVPcHRpb24oKTsNCn0NCg0KLyoqDQogKiDkv53lrZjnvZHnq5norr7nva7pgInpobkuDQogKg0KICogQHRocm93cyBFeGNlcHRpb24NCiAqLw0KZnVuY3Rpb24gU2F2ZVNldHRpbmcoKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KDQogICAgJG9sZFpDX1BFUk1BTkVOVF9ET01BSU5fRU5BQkxFID0gJHpicC0+b3B0aW9uWydaQ19QRVJNQU5FTlRfRE9NQUlOX0VOQUJMRSddOw0KICAgICRvbGRIb3N0ID0gJHpicC0+b3B0aW9uWydaQ19CTE9HX0hPU1QnXTsNCg0KICAgIGZvcmVhY2ggKCRfUE9TVCBhcyAka2V5ID0+ICR2YWx1ZSkgew0KICAgICAgICBpZiAoc3Vic3RyKCRrZXksIDAsIDIpICE9PSAnWkMnKSB7DQogICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmICgka2V5ID09ICdaQ19QRVJNQU5FTlRfRE9NQUlOX0VOQUJMRScgfHwNCiAgICAgICAgICAgICRrZXkgPT0gJ1pDX0NPTU1FTlRfVFVSTk9GRicgfHwNCiAgICAgICAgICAgICRrZXkgPT0gJ1pDX0NPTU1FTlRfUkVWRVJTRV9PUkRFUicgfHwNCiAgICAgICAgICAgICRrZXkgPT0gJ1pDX0NPTU1FTlRfQVVESVQnIHx8DQogICAgICAgICAgICAka2V5ID09ICdaQ19ESVNQTEFZX1NVQkNBVEVHT1JZUycgfHwNCiAgICAgICAgICAgICRrZXkgPT0gJ1pDX0daSVBfRU5BQkxFJyB8fA0KICAgICAgICAgICAgJGtleSA9PSAnWkNfU1lOVEFYSElHSExJR0hURVJfRU5BQkxFJyB8fA0KICAgICAgICAgICAgJGtleSA9PSAnWkNfQ09NTUVOVF9WRVJJRllfRU5BQkxFJyB8fA0KICAgICAgICAgICAgJGtleSA9PSAnWkNfQ0xPU0VfU0lURScgfHwNCiAgICAgICAgICAgICRrZXkgPT0gJ1pDX1BFUk1BTkVOVF9ET01BSU5fV0lUSF9BRE1JTicgfHwNCiAgICAgICAgICAgICRrZXkgPT0gJ1pDX0FERElUSU9OQUxfU0VDVVJJVFknDQogICAgICAgICkgew0KICAgICAgICAgICAgJHpicC0+b3B0aW9uWyRrZXldID0gKGJvb2wpICR2YWx1ZTsNCiAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICB9DQogICAgICAgIGlmICgka2V5ID09ICdaQ19SU1MyX0NPVU5UJyB8fA0KICAgICAgICAgICAgJGtleSA9PSAnWkNfVVBMT0FEX0ZJTEVTSVpFJyB8fA0KICAgICAgICAgICAgJGtleSA9PSAnWkNfRElTUExBWV9DT1VOVCcgfHwNCiAgICAgICAgICAgICRrZXkgPT0gJ1pDX1NFQVJDSF9DT1VOVCcgfHwNCiAgICAgICAgICAgICRrZXkgPT0gJ1pDX1BBR0VCQVJfQ09VTlQnIHx8DQogICAgICAgICAgICAka2V5ID09ICdaQ19DT01NRU5UU19ESVNQTEFZX0NPVU5UJyB8fA0KICAgICAgICAgICAgJGtleSA9PSAnWkNfTUFOQUdFX0NPVU5UJw0KICAgICAgICApIHsNCiAgICAgICAgICAgICR6YnAtPm9wdGlvblska2V5XSA9IChpbnQpICR2YWx1ZTsNCiAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICB9DQogICAgICAgIGlmICgka2V5ID09ICdaQ19VUExPQURfRklMRVRZUEUnKSB7DQogICAgICAgICAgICAkdmFsdWUgPSBzdHJ0b2xvd2VyKCR2YWx1ZSk7DQoJCQkkdmFsdWUgPSBzdHJfcmVwbGFjZShhcnJheSgnICcsJ+OAgCcpLCAnJywgJHZhbHVlKTsNCiAgICAgICAgICAgICR2YWx1ZSA9IERlbE5hbWVJblN0cmluZygkdmFsdWUsICdwaHAnKTsNCiAgICAgICAgICAgICR2YWx1ZSA9IERlbE5hbWVJblN0cmluZygkdmFsdWUsICdhc3AnKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoJGtleSA9PSAnWkNfREVCVUdfTU9ERScpIHsNCiAgICAgICAgICAgIGlmICgoYm9vbCkgJHZhbHVlKSB7DQogICAgICAgICAgICAgICAgJHpicC0+b3B0aW9uWydaQ19ERUJVR19NT0RFJ10gPSB0cnVlOw0KICAgICAgICAgICAgICAgICR6YnAtPm9wdGlvblsnWkNfREVCVUdfTU9ERV9TVFJJQ1QnXSA9IHRydWU7DQogICAgICAgICAgICAgICAgJHpicC0+b3B0aW9uWydaQ19ERUJVR19MT0dfRVJST1InXSA9IHRydWU7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICR6YnAtPm9wdGlvblsnWkNfREVCVUdfTU9ERSddID0gZmFsc2U7DQogICAgICAgICAgICAgICAgJHpicC0+b3B0aW9uWydaQ19ERUJVR19NT0RFX1NUUklDVCddID0gZmFsc2U7DQogICAgICAgICAgICAgICAgJHpicC0+b3B0aW9uWydaQ19ERUJVR19MT0dfRVJST1InXSA9IGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgICR6YnAtPm9wdGlvblska2V5XSA9IHRyaW0oc3RyX3JlcGxhY2UoYXJyYXkoIlxyIiwgIlxuIiksIGFycmF5KCIiLCAiIiksICR2YWx1ZSkpOw0KICAgIH0NCiAgICAkemJwLT5vcHRpb25bJ1pDX0RFQlVHX01PREUnXSA9IChib29sKSAkemJwLT5vcHRpb25bJ1pDX0RFQlVHX01PREUnXTsNCiAgICAkemJwLT5vcHRpb25bJ1pDX0JMT0dfSE9TVCddID0gdHJpbSgkemJwLT5vcHRpb25bJ1pDX0JMT0dfSE9TVCddKTsNCiAgICAkemJwLT5vcHRpb25bJ1pDX0JMT0dfSE9TVCddID0gdHJpbSgkemJwLT5vcHRpb25bJ1pDX0JMT0dfSE9TVCddLCAnLycpIC4gJy8nOw0KICAgIGlmICgkemJwLT5vcHRpb25bJ1pDX0JMT0dfSE9TVCddID09ICcvJykgew0KICAgICAgICAkemJwLT5vcHRpb25bJ1pDX0JMT0dfSE9TVCddID0gJHpicC0+aG9zdDsNCiAgICB9DQogICAgJHVzZVBDID0gZmFsc2U7DQogICAgZm9yICgkaSA9IDA7ICRpIDwgc3RybGVuKCR6YnAtPm9wdGlvblsnWkNfQkxPR19IT1NUJ10pIC0gMTsgJGkrKykgew0KICAgICAgICAkbCA9IHN1YnN0cigkemJwLT5vcHRpb25bJ1pDX0JMT0dfSE9TVCddLCAkaSwgMSk7DQogICAgICAgIGlmIChvcmQoJGwpID49IDE5Mikgew0KICAgICAgICAgICAgJHVzZVBDID0gdHJ1ZTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBpZiAoJHVzZVBDICYmIGZ1bmN0aW9uX2V4aXN0cygnbWJfc3RydG9sb3dlcicpKSB7DQogICAgICAgICRQdW55Y29kZSA9IG5ldyBQdW55Y29kZSgpOw0KICAgICAgICAkemJwLT5vcHRpb25bJ1pDX0JMT0dfSE9TVCddID0gJFB1bnljb2RlLT5lbmNvZGUoJHpicC0+b3B0aW9uWydaQ19CTE9HX0hPU1QnXSk7DQogICAgfQ0KICAgICRsYW5nID0gcmVxdWlyZSAkemJwLT51c2Vyc2RpciAuICdsYW5ndWFnZS8nIC4gJHpicC0+b3B0aW9uWydaQ19CTE9HX0xBTkdVQUdFUEFDSyddIC4gJy5waHAnOw0KICAgICR6YnAtPm9wdGlvblsnWkNfQkxPR19MQU5HVUFHRSddID0gJGxhbmdbJ2xhbmcnXTsNCiAgICAkemJwLT5vcHRpb25bJ1pDX0JMT0dfUFJPRFVDVCddID0gJ1otQmxvZ1BIUCc7DQogICAgJHpicC0+U2F2ZU9wdGlvbigpOw0KDQogICAgaWYgKCR6YnAtPm9wdGlvblsnWkNfUEVSTUFORU5UX0RPTUFJTl9FTkFCTEUnXSA9PSAxKSB7DQogICAgICAgIGlmICgkb2xkSG9zdCAhPSAkemJwLT5vcHRpb25bJ1pDX0JMT0dfSE9TVCddKSB7DQogICAgICAgICAgICBpZiAoIWRlZmluZWQoJ0lOX0FKQVhfUFJPQ0VTU0lORycpIHx8IGNvbnN0YW50KCdJTl9BSkFYX1BST0NFU1NJTkcnKSAhPSB0cnVlKSB7DQogICAgICAgICAgICAgICAgUmVkaXJlY3QoJHpicC0+b3B0aW9uWydaQ19CTE9HX0hPU1QnXSAuICd6Yl9zeXN0ZW0vY21kLnBocD9hY3Q9bG9naW4nKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCn0NCg0KLy8jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCi8qKg0KICog6L+H5ruk5omp5bGV5pWw5o2uLg0KICoNCiAqIEBwYXJhbSAkb2JqZWN0DQogKi8NCmZ1bmN0aW9uIEZpbHRlck1ldGEoJiRvYmplY3QpDQp7DQoNCiAgICAvLyR0eXBlPXN0cnRvbG93ZXIoZ2V0X2NsYXNzKCRvYmplY3QpKTsNCg0KICAgIGZvcmVhY2ggKCRfUE9TVCBhcyAka2V5ID0+ICR2YWx1ZSkgew0KICAgICAgICBpZiAoc3Vic3RyKCRrZXksIDAsIDUpID09ICdtZXRhXycpIHsNCiAgICAgICAgICAgICRuYW1lID0gc3Vic3RyKCRrZXksIDUgLSBzdHJsZW4oJGtleSkpOw0KICAgICAgICAgICAgJG9iamVjdC0+TWV0YXMtPiRuYW1lID0gJHZhbHVlOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgZm9yZWFjaCAoJG9iamVjdC0+TWV0YXMtPkdldERhdGEoKSBhcyAka2V5ID0+ICR2YWx1ZSkgew0KICAgICAgICBpZiAoJHZhbHVlID09ICcnKSB7DQogICAgICAgICAgICAkb2JqZWN0LT5NZXRhcy0+RGVsKCRrZXkpOw0KICAgICAgICB9DQogICAgfQ0KfQ0KDQovKioNCiAqIOi/h+a7pOivhOiuuuaVsOaNri4NCiAqDQogKiBAcGFyYW0gJGNvbW1lbnQNCiAqDQogKiBAdGhyb3dzIEV4Y2VwdGlvbg0KICovDQpmdW5jdGlvbiBGaWx0ZXJDb21tZW50KCYkY29tbWVudCkNCnsNCiAgICBnbG9iYWwgJHpicDsNCg0KICAgIGlmICghQ2hlY2tSZWdFeHAoJGNvbW1lbnQtPk5hbWUsICdbdXNlcm5hbWVdJykpIHsNCiAgICAgICAgJHpicC0+U2hvd0Vycm9yKDE1LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgIH0NCiAgICBpZiAoJGNvbW1lbnQtPkVtYWlsICYmICghQ2hlY2tSZWdFeHAoJGNvbW1lbnQtPkVtYWlsLCAnW2VtYWlsXScpKSkgew0KICAgICAgICAkemJwLT5TaG93RXJyb3IoMjksIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgfQ0KICAgIGlmICgkY29tbWVudC0+SG9tZVBhZ2UgJiYgKCFDaGVja1JlZ0V4cCgkY29tbWVudC0+SG9tZVBhZ2UsICdbaG9tZXBhZ2VdJykpKSB7DQogICAgICAgICR6YnAtPlNob3dFcnJvcigzMCwgX19GSUxFX18sIF9fTElORV9fKTsNCiAgICB9DQoNCiAgICAkY29tbWVudC0+TmFtZSA9IFN1YlN0clVURjhfU3RhcnQoJGNvbW1lbnQtPk5hbWUsIDAsICR6YnAtPm9wdGlvblsnWkNfVVNFUk5BTUVfTUFYJ10pOw0KICAgICRjb21tZW50LT5FbWFpbCA9IFN1YlN0clVURjhfU3RhcnQoJGNvbW1lbnQtPkVtYWlsLCAwLCAkemJwLT5vcHRpb25bJ1pDX0VNQUlMX01BWCddKTsNCiAgICAkY29tbWVudC0+SG9tZVBhZ2UgPSBTdWJTdHJVVEY4X1N0YXJ0KCRjb21tZW50LT5Ib21lUGFnZSwgMCwgJHpicC0+b3B0aW9uWydaQ19IT01FUEFHRV9NQVgnXSk7DQoNCiAgICAkY29tbWVudC0+Q29udGVudCA9IEZvcm1hdFN0cmluZygkY29tbWVudC0+Q29udGVudCwgJ1tub2h0bWxdJyk7DQoNCiAgICAkY29tbWVudC0+Q29udGVudCA9IFN1YlN0clVURjhfU3RhcnQoJGNvbW1lbnQtPkNvbnRlbnQsIDAsIDEwMDApOw0KICAgICRjb21tZW50LT5Db250ZW50ID0gdHJpbSgkY29tbWVudC0+Q29udGVudCk7DQogICAgaWYgKHN0cmxlbigkY29tbWVudC0+Q29udGVudCkgPT0gMCkgew0KICAgICAgICAkemJwLT5TaG93RXJyb3IoNDYsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgfQ0KfQ0KDQovKioNCiAqIOi/h+a7pOaWh+eroOaVsOaNri4NCiAqDQogKiBAcGFyYW0gJGFydGljbGUNCiAqLw0KZnVuY3Rpb24gRmlsdGVyUG9zdCgmJGFydGljbGUpDQp7DQogICAgZ2xvYmFsICR6YnA7DQoNCiAgICAkYXJ0aWNsZS0+VGl0bGUgPSBzdHJpcF90YWdzKCRhcnRpY2xlLT5UaXRsZSk7DQogICAgJGFydGljbGUtPlRpdGxlID0gaHRtbHNwZWNpYWxjaGFycygkYXJ0aWNsZS0+VGl0bGUpOw0KICAgICRhcnRpY2xlLT5BbGlhcyA9IEZvcm1hdFN0cmluZygkYXJ0aWNsZS0+QWxpYXMsICdbbm9ybWFsbmFtZV0nKTsNCiAgICAkYXJ0aWNsZS0+QWxpYXMgPSBzdHJfcmVwbGFjZSgnICcsICcnLCAkYXJ0aWNsZS0+QWxpYXMpOw0KDQogICAgaWYgKCRhcnRpY2xlLT5UeXBlID09IFpDX1BPU1RfVFlQRV9BUlRJQ0xFKSB7DQogICAgICAgIGlmICghJHpicC0+Q2hlY2tSaWdodHMoJ0FydGljbGVBbGwnKSkgew0KICAgICAgICAgICAgJGFydGljbGUtPkNvbnRlbnQgPSBGb3JtYXRTdHJpbmcoJGFydGljbGUtPkNvbnRlbnQsICdbbm9zY3JpcHRdJyk7DQogICAgICAgICAgICAkYXJ0aWNsZS0+SW50cm8gPSBGb3JtYXRTdHJpbmcoJGFydGljbGUtPkludHJvLCAnW25vc2NyaXB0XScpOw0KICAgICAgICB9DQogICAgfSBlbHNlaWYgKCRhcnRpY2xlLT5UeXBlID09IFpDX1BPU1RfVFlQRV9QQUdFKSB7DQogICAgICAgIGlmICghJHpicC0+Q2hlY2tSaWdodHMoJ1BhZ2VBbGwnKSkgew0KICAgICAgICAgICAgJGFydGljbGUtPkNvbnRlbnQgPSBGb3JtYXRTdHJpbmcoJGFydGljbGUtPkNvbnRlbnQsICdbbm9zY3JpcHRdJyk7DQogICAgICAgICAgICAkYXJ0aWNsZS0+SW50cm8gPSBGb3JtYXRTdHJpbmcoJGFydGljbGUtPkludHJvLCAnW25vc2NyaXB0XScpOw0KICAgICAgICB9DQogICAgfSBlbHNlIHsNCiAgICAgICAgaWYgKCEkemJwLT5DaGVja1JpZ2h0cygnQXJ0aWNsZUFsbCcpKSB7DQogICAgICAgICAgICAkYXJ0aWNsZS0+Q29udGVudCA9IEZvcm1hdFN0cmluZygkYXJ0aWNsZS0+Q29udGVudCwgJ1tub3NjcmlwdF0nKTsNCiAgICAgICAgICAgICRhcnRpY2xlLT5JbnRybyA9IEZvcm1hdFN0cmluZygkYXJ0aWNsZS0+SW50cm8sICdbbm9zY3JpcHRdJyk7DQogICAgICAgIH0NCiAgICB9DQp9DQoNCi8qKg0KICog6L+H5ruk55So5oi35pWw5o2uLg0KICoNCiAqIEBwYXJhbSAkbWVtYmVyDQogKg0KICogQHRocm93cyBFeGNlcHRpb24NCiAqLw0KZnVuY3Rpb24gRmlsdGVyTWVtYmVyKCYkbWVtYmVyKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KICAgICRtZW1iZXItPkludHJvID0gRm9ybWF0U3RyaW5nKCRtZW1iZXItPkludHJvLCAnW25vc2NyaXB0XScpOw0KICAgICRtZW1iZXItPkFsaWFzID0gRm9ybWF0U3RyaW5nKCRtZW1iZXItPkFsaWFzLCAnW25vcm1hbG5hbWVdJyk7DQogICAgJG1lbWJlci0+QWxpYXMgPSBzdHJfcmVwbGFjZSgnLycsICcnLCAkbWVtYmVyLT5BbGlhcyk7DQogICAgJG1lbWJlci0+QWxpYXMgPSBzdHJfcmVwbGFjZSgnLicsICcnLCAkbWVtYmVyLT5BbGlhcyk7DQogICAgJG1lbWJlci0+QWxpYXMgPSBzdHJfcmVwbGFjZSgnICcsICcnLCAkbWVtYmVyLT5BbGlhcyk7DQogICAgJG1lbWJlci0+QWxpYXMgPSBzdHJfcmVwbGFjZSgnXycsICcnLCAkbWVtYmVyLT5BbGlhcyk7DQogICAgJG1lbWJlci0+QWxpYXMgPSBTdWJTdHJVVEY4X1N0YXJ0KCRtZW1iZXItPkFsaWFzLCAwLCAoaW50KSAkemJwLT5kYXRhaW5mb1snTWVtYmVyJ11bJ0FsaWFzJ11bMl0pOw0KICAgIGlmIChzdHJsZW4oJG1lbWJlci0+TmFtZSkgPCAkemJwLT5vcHRpb25bJ1pDX1VTRVJOQU1FX01JTiddIHx8IHN0cmxlbigkbWVtYmVyLT5OYW1lKSA+ICR6YnAtPm9wdGlvblsnWkNfVVNFUk5BTUVfTUFYJ10pIHsNCiAgICAgICAgJHpicC0+U2hvd0Vycm9yKDc3LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgIH0NCg0KICAgIGlmICghQ2hlY2tSZWdFeHAoJG1lbWJlci0+TmFtZSwgJ1t1c2VybmFtZV0nKSkgew0KICAgICAgICAkemJwLT5TaG93RXJyb3IoNzcsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgfQ0KDQogICAgaWYgKCRtZW1iZXItPkFsaWFzICE9PSAnJyAmJiAhQ2hlY2tSZWdFeHAoJG1lbWJlci0+QWxpYXMsICdbbmlja25hbWVdJykpIHsNCiAgICAgICAgJHpicC0+U2hvd0Vycm9yKDkwLCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgIH0NCg0KICAgIGlmICghQ2hlY2tSZWdFeHAoJG1lbWJlci0+RW1haWwsICdbZW1haWxdJykpIHsNCiAgICAgICAgJG1lbWJlci0+RW1haWwgPSAnbnVsbEBudWxsLmNvbSc7DQogICAgfQ0KICAgICRtZW1iZXItPkVtYWlsID0gc3RydG9sb3dlcigkbWVtYmVyLT5FbWFpbCk7DQoNCiAgICBpZiAoc3Vic3RyKCRtZW1iZXItPkhvbWVQYWdlLCAwLCA0KSAhPSAnaHR0cCcpIHsNCiAgICAgICAgJG1lbWJlci0+SG9tZVBhZ2UgPSAnaHR0cDovLycgLiAkbWVtYmVyLT5Ib21lUGFnZTsNCiAgICB9DQoNCiAgICBpZiAoIUNoZWNrUmVnRXhwKCRtZW1iZXItPkhvbWVQYWdlLCAnW2hvbWVwYWdlXScpKSB7DQogICAgICAgICRtZW1iZXItPkhvbWVQYWdlID0gJyc7DQogICAgfQ0KDQogICAgaWYgKHN0cmxlbigkbWVtYmVyLT5FbWFpbCkgPiAkemJwLT5vcHRpb25bJ1pDX0VNQUlMX01BWCddKSB7DQogICAgICAgICR6YnAtPlNob3dFcnJvcigyOSwgX19GSUxFX18sIF9fTElORV9fKTsNCiAgICB9DQoNCiAgICBpZiAoc3RybGVuKCRtZW1iZXItPkhvbWVQYWdlKSA+ICR6YnAtPm9wdGlvblsnWkNfSE9NRVBBR0VfTUFYJ10pIHsNCiAgICAgICAgJHpicC0+U2hvd0Vycm9yKDMwLCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgIH0NCn0NCg0KLyoqDQogKiDov4fmu6TmqKHlnZfmlbDmja4uDQogKg0KICogQHBhcmFtICRtb2R1bGUNCiAqLw0KZnVuY3Rpb24gRmlsdGVyTW9kdWxlKCYkbW9kdWxlKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KICAgICRtb2R1bGUtPkZpbGVOYW1lID0gRm9ybWF0U3RyaW5nKCRtb2R1bGUtPkZpbGVOYW1lLCAnW2ZpbGVuYW1lXScpOw0KICAgICRtb2R1bGUtPkh0bWxJRCA9IEZvcm1hdFN0cmluZygkbW9kdWxlLT5IdG1sSUQsICdbbm9ybWFsbmFtZV0nKTsNCn0NCg0KLyoqDQogKiDov4fmu6TliIbnsbvmlbDmja4uDQogKg0KICogQHBhcmFtICRjYXRlZ29yeQ0KICovDQpmdW5jdGlvbiBGaWx0ZXJDYXRlZ29yeSgmJGNhdGVnb3J5KQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KICAgICRjYXRlZ29yeS0+TmFtZSA9IHN0cmlwX3RhZ3MoJGNhdGVnb3J5LT5OYW1lKTsNCiAgICAkY2F0ZWdvcnktPkFsaWFzID0gRm9ybWF0U3RyaW5nKCRjYXRlZ29yeS0+QWxpYXMsICdbbm9ybWFsbmFtZV0nKTsNCiAgICAvLyRjYXRlZ29yeS0+QWxpYXM9c3RyX3JlcGxhY2UoJy8nLCcnLCRjYXRlZ29yeS0+QWxpYXMpOw0KICAgICRjYXRlZ29yeS0+QWxpYXMgPSBzdHJfcmVwbGFjZSgnLicsICcnLCAkY2F0ZWdvcnktPkFsaWFzKTsNCiAgICAkY2F0ZWdvcnktPkFsaWFzID0gc3RyX3JlcGxhY2UoJyAnLCAnJywgJGNhdGVnb3J5LT5BbGlhcyk7DQogICAgJGNhdGVnb3J5LT5BbGlhcyA9IHN0cl9yZXBsYWNlKCdfJywgJycsICRjYXRlZ29yeS0+QWxpYXMpOw0KfQ0KDQovKioNCiAqIOi/h+a7pHRhZ+aVsOaNri4NCiAqDQogKiBAcGFyYW0gJHRhZw0KICovDQpmdW5jdGlvbiBGaWx0ZXJUYWcoJiR0YWcpDQp7DQogICAgZ2xvYmFsICR6YnA7DQogICAgJHRhZy0+TmFtZSA9IHN0cmlwX3RhZ3MoJHRhZy0+TmFtZSk7DQogICAgJHRhZy0+QWxpYXMgPSBGb3JtYXRTdHJpbmcoJHRhZy0+QWxpYXMsICdbbm9ybWFsbmFtZV0nKTsNCn0NCg0KLy8jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCi8v57uf6K6h5Ye95pWwDQovKioNCiAq57uf6K6h572u6aG25paH56ug5pWw57uELg0KICoNCiAqIEBwYXJhbSBpbnQgICR0eXBlDQogKiBAcGFyYW0gbnVsbCAkYWRkcGx1cw0KICogQHBhcmFtIG51bGwgJGRlbHBsdXMNCiAqLw0KZnVuY3Rpb24gQ291bnRUb3BBcnRpY2xlKCR0eXBlID0gMCwgJGFkZHBsdXMgPSBudWxsLCAkZGVscGx1cyA9IG51bGwpDQp7DQogICAgZ2xvYmFsICR6YnA7DQogICAgJHZhcm5hbWUgPSAndG9wX3Bvc3RfYXJyYXlfJyAuICR0eXBlOw0KICAgICRhcnJheSA9IHVuc2VyaWFsaXplKCR6YnAtPmNhY2hlLT4kdmFybmFtZSk7DQogICAgaWYgKCFpc19hcnJheSgkYXJyYXkpKSB7DQogICAgICAgICRhcnJheSA9IGFycmF5KCk7DQogICAgfQ0KDQogICAgaWYgKCRhZGRwbHVzID09PSBudWxsICYmICRkZWxwbHVzID09PSBudWxsKSB7DQogICAgICAgICRzID0gJHpicC0+ZGItPnNxbC0+U2VsZWN0KCR6YnAtPnRhYmxlWydQb3N0J10sICdsb2dfSUQnLCBhcnJheShhcnJheSgnPScsICdsb2dfVHlwZScsICR0eXBlKSwgYXJyYXkoJz4nLCAnbG9nX0lzVG9wJywgMCksIGFycmF5KCc9JywgJ2xvZ19TdGF0dXMnLCAwKSksIG51bGwsIG51bGwsIG51bGwpOw0KICAgICAgICAkYSA9ICR6YnAtPmRiLT5RdWVyeSgkcyk7DQogICAgICAgIGZvcmVhY2ggKCRhIGFzICRpZCkgew0KICAgICAgICAgICAgJGFycmF5WyhpbnQpIGN1cnJlbnQoJGlkKV0gPSAoaW50KSBjdXJyZW50KCRpZCk7DQogICAgICAgIH0NCiAgICB9IGVsc2VpZiAoJGFkZHBsdXMgIT09IG51bGwgJiYgJGRlbHBsdXMgPT09IG51bGwpIHsNCiAgICAgICAgJGFkZHBsdXMgPSAoaW50KSAkYWRkcGx1czsNCiAgICAgICAgJGFycmF5WyRhZGRwbHVzXSA9ICRhZGRwbHVzOw0KICAgIH0gZWxzZWlmICgkYWRkcGx1cyA9PT0gbnVsbCAmJiAkZGVscGx1cyAhPT0gbnVsbCkgew0KICAgICAgICAkZGVscGx1cyA9IChpbnQpICRkZWxwbHVzOw0KICAgICAgICB1bnNldCgkYXJyYXlbJGRlbHBsdXNdKTsNCiAgICB9DQoNCiAgICAkemJwLT5jYWNoZS0+JHZhcm5hbWUgPSBzZXJpYWxpemUoJGFycmF5KTsNCn0NCg0KLyoqDQogKue7n+iuoeivhOiuuuaVsC4NCiAqDQogKiBAcGFyYW0gaW50ICRhbGxwbHVzIOaOp+WItuaYr+WQpuimgei/m+ihjOWFqOihqOaJq+aPjyDmgLvor4TorroNCiAqIEBwYXJhbSBpbnQgJGNoa3BsdXMg5o6n5Yi25piv5ZCm6KaB6L+b6KGM5YWo6KGo5omr5o+PIOacquWuoeaguOivhOiuug0KICovDQpmdW5jdGlvbiBDb3VudENvbW1lbnROdW1zKCRhbGxwbHVzID0gbnVsbCwgJGNoa3BsdXMgPSBudWxsKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KDQogICAgaWYgKCRhbGxwbHVzID09PSBudWxsKSB7DQogICAgICAgICR6YnAtPmNhY2hlLT5hbGxfY29tbWVudF9udW1zID0gKGludCkgR2V0VmFsdWVJbkFycmF5QnlDdXJyZW50KCR6YnAtPmRiLT5RdWVyeSgnU0VMRUNUIENPVU5UKCopIEFTIG51bSBGUk9NICcgLiAkR0xPQkFMU1sndGFibGUnXVsnQ29tbWVudCddKSwgJ251bScpOw0KICAgIH0gZWxzZSB7DQogICAgICAgICR6YnAtPmNhY2hlLT5hbGxfY29tbWVudF9udW1zICs9ICRhbGxwbHVzOw0KICAgIH0NCiAgICBpZiAoJGNoa3BsdXMgPT09IG51bGwpIHsNCiAgICAgICAgJHpicC0+Y2FjaGUtPmNoZWNrX2NvbW1lbnRfbnVtcyA9IChpbnQpIEdldFZhbHVlSW5BcnJheUJ5Q3VycmVudCgkemJwLT5kYi0+UXVlcnkoJ1NFTEVDVCBDT1VOVCgqKSBBUyBudW0gRlJPTSAnIC4gJEdMT0JBTFNbJ3RhYmxlJ11bJ0NvbW1lbnQnXSAuICcgV0hFUkUgY29tbV9Jc2NoZWNraW5nPVwnMVwnJyksICdudW0nKTsNCiAgICB9IGVsc2Ugew0KICAgICAgICAkemJwLT5jYWNoZS0+Y2hlY2tfY29tbWVudF9udW1zICs9ICRjaGtwbHVzOw0KICAgIH0NCiAgICAkemJwLT5jYWNoZS0+bm9ybWFsX2NvbW1lbnRfbnVtcyA9IChpbnQpICgkemJwLT5jYWNoZS0+YWxsX2NvbW1lbnRfbnVtcyAtICR6YnAtPmNhY2hlLT5jaGVja19jb21tZW50X251bXMpOw0KfQ0KDQovKioNCiAq57uf6K6h5YWs5byA5paH56ug5pWwLg0KICoNCiAqIEBwYXJhbSBpbnQgJHBsdXMg5o6n5Yi25piv5ZCm6KaB6L+b6KGM5YWo6KGo5omr5o+PDQogKi8NCmZ1bmN0aW9uIENvdW50Tm9ybWFsQXJ0aWNsZU51bXMoJHBsdXMgPSBudWxsKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KDQogICAgaWYgKCRwbHVzID09PSBudWxsKSB7DQogICAgICAgICRzID0gJHpicC0+ZGItPnNxbC0+Q291bnQoJHpicC0+dGFibGVbJ1Bvc3QnXSwgYXJyYXkoYXJyYXkoJ0NPVU5UJywgJyonLCAnbnVtJykpLCBhcnJheShhcnJheSgnPScsICdsb2dfVHlwZScsIDApLCBhcnJheSgnPScsICdsb2dfSXNUb3AnLCAwKSwgYXJyYXkoJz0nLCAnbG9nX1N0YXR1cycsIDApKSk7DQogICAgICAgICRudW0gPSBHZXRWYWx1ZUluQXJyYXlCeUN1cnJlbnQoJHpicC0+ZGItPlF1ZXJ5KCRzKSwgJ251bScpOw0KDQogICAgICAgICR6YnAtPmNhY2hlLT5ub3JtYWxfYXJ0aWNsZV9udW1zID0gJG51bTsNCiAgICB9IGVsc2Ugew0KICAgICAgICAkemJwLT5jYWNoZS0+bm9ybWFsX2FydGljbGVfbnVtcyArPSAkcGx1czsNCiAgICB9DQp9DQoNCi8qKg0KICog57uf6K6h5paH56ug5LiL6K+E6K665pWwLg0KICoNCiAqIEBwYXJhbSBwb3N0ICRhcnRpY2xlDQogKiBAcGFyYW0gaW50ICAkcGx1cyAgICDmjqfliLbmmK/lkKbopoHov5vooYzlhajooajmiavmj48NCiAqLw0KZnVuY3Rpb24gQ291bnRQb3N0KCYkYXJ0aWNsZSwgJHBsdXMgPSBudWxsKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KDQogICAgaWYgKCRwbHVzID09PSBudWxsKSB7DQogICAgICAgICRpZCA9ICRhcnRpY2xlLT5JRDsNCg0KICAgICAgICAkcyA9ICR6YnAtPmRiLT5zcWwtPkNvdW50KCR6YnAtPnRhYmxlWydDb21tZW50J10sIGFycmF5KGFycmF5KCdDT1VOVCcsICcqJywgJ251bScpKSwgYXJyYXkoYXJyYXkoJz0nLCAnY29tbV9Mb2dJRCcsICRpZCksIGFycmF5KCc9JywgJ2NvbW1fSXNDaGVja2luZycsIDApKSk7DQogICAgICAgICRudW0gPSBHZXRWYWx1ZUluQXJyYXlCeUN1cnJlbnQoJHpicC0+ZGItPlF1ZXJ5KCRzKSwgJ251bScpOw0KDQogICAgICAgICRhcnRpY2xlLT5Db21tTnVtcyA9ICRudW07DQogICAgfSBlbHNlIHsNCiAgICAgICAgJGFydGljbGUtPkNvbW1OdW1zICs9ICRwbHVzOw0KICAgIH0NCn0NCg0KLyoqDQogKiDmibnph4/nu5/orqHmjIflrprmlofnq6DkuIvor4TorrrmlbDlubbkv53lrZguDQogKg0KICogQHBhcmFtIGFycmF5ICRhcnJheSDorrDlvZXmlofnq6BJROeahOaVsOe7hA0KICogQHBhcmFtIGludCAgICRwbHVzICDmjqfliLbmmK/lkKbopoHov5vooYzlhajooajmiavmj48NCiAqLw0KZnVuY3Rpb24gQ291bnRQb3N0QXJyYXkoJGFycmF5LCAkcGx1cyA9IG51bGwpDQp7DQogICAgZ2xvYmFsICR6YnA7DQogICAgJGFycmF5ID0gYXJyYXlfdW5pcXVlKCRhcnJheSk7DQogICAgZm9yZWFjaCAoJGFycmF5IGFzICR2YWx1ZSkgew0KICAgICAgICBpZiAoJHZhbHVlID09IDApIHsNCiAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICB9DQoNCiAgICAgICAgJGFydGljbGUgPSAkemJwLT5HZXRQb3N0QnlJRCgkdmFsdWUpOw0KICAgICAgICBpZiAoJGFydGljbGUtPklEID4gMCkgew0KICAgICAgICAgICAgQ291bnRQb3N0KCRhcnRpY2xlLCAkcGx1cyk7DQogICAgICAgICAgICAkYXJ0aWNsZS0+U2F2ZSgpOw0KICAgICAgICB9DQogICAgfQ0KfQ0KDQovKioNCiAqIOe7n+iuoeWIhuexu+S4i+aWh+eroOaVsC4NCiAqDQogKiBAcGFyYW0gQ2F0ZWdvcnkgJiRjYXRlZ29yeQ0KICogQHBhcmFtIGludCAgICAgICRwbHVzICAgICAg5o6n5Yi25piv5ZCm6KaB6L+b6KGM5YWo6KGo5omr5o+PDQogKi8NCmZ1bmN0aW9uIENvdW50Q2F0ZWdvcnkoJiRjYXRlZ29yeSwgJHBsdXMgPSBudWxsKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KDQogICAgaWYgKCRwbHVzID09PSBudWxsKSB7DQogICAgICAgICRpZCA9ICRjYXRlZ29yeS0+SUQ7DQoNCiAgICAgICAgJHMgPSAkemJwLT5kYi0+c3FsLT5Db3VudCgkemJwLT50YWJsZVsnUG9zdCddLCBhcnJheShhcnJheSgnQ09VTlQnLCAnKicsICdudW0nKSksIGFycmF5KGFycmF5KCc9JywgJ2xvZ19UeXBlJywgMCksIGFycmF5KCc9JywgJ2xvZ19Jc1RvcCcsIDApLCBhcnJheSgnPScsICdsb2dfU3RhdHVzJywgMCksIGFycmF5KCc9JywgJ2xvZ19DYXRlSUQnLCAkaWQpKSk7DQogICAgICAgICRudW0gPSBHZXRWYWx1ZUluQXJyYXlCeUN1cnJlbnQoJHpicC0+ZGItPlF1ZXJ5KCRzKSwgJ251bScpOw0KDQogICAgICAgICRjYXRlZ29yeS0+Q291bnQgPSAkbnVtOw0KICAgIH0gZWxzZSB7DQogICAgICAgICRjYXRlZ29yeS0+Q291bnQgKz0gJHBsdXM7DQogICAgfQ0KfQ0KDQovKioNCiAqIOaJuemHj+e7n+iuoeaMh+WumuWIhuexu+S4i+aWh+eroOaVsOW5tuS/neWtmC4NCiAqDQogKiBAcGFyYW0gYXJyYXkgJGFycmF5IOiusOW9leWIhuexu0lE55qE5pWw57uEDQogKiBAcGFyYW0gaW50ICAgJHBsdXMgIOaOp+WItuaYr+WQpuimgei/m+ihjOWFqOihqOaJq+aPjw0KICovDQpmdW5jdGlvbiBDb3VudENhdGVnb3J5QXJyYXkoJGFycmF5LCAkcGx1cyA9IG51bGwpDQp7DQogICAgZ2xvYmFsICR6YnA7DQogICAgJGFycmF5ID0gYXJyYXlfdW5pcXVlKCRhcnJheSk7DQogICAgZm9yZWFjaCAoJGFycmF5IGFzICR2YWx1ZSkgew0KICAgICAgICBpZiAoJHZhbHVlID09IDApIHsNCiAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICB9DQoNCiAgICAgICAgQ291bnRDYXRlZ29yeSgkemJwLT5jYXRlZ29yaWVzWyR2YWx1ZV0sICRwbHVzKTsNCiAgICAgICAgJHpicC0+Y2F0ZWdvcmllc1skdmFsdWVdLT5TYXZlKCk7DQogICAgfQ0KfQ0KDQovKioNCiAqIOe7n+iuoXRhZ+S4i+eahOaWh+eroOaVsC4NCiAqDQogKiBAcGFyYW0gdGFnICYkdGFnDQogKiBAcGFyYW0gaW50ICRwbHVzIOaOp+WItuaYr+WQpuimgei/m+ihjOWFqOihqOaJq+aPjw0KICovDQpmdW5jdGlvbiBDb3VudFRhZygmJHRhZywgJHBsdXMgPSBudWxsKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KDQogICAgaWYgKCRwbHVzID09PSBudWxsKSB7DQogICAgICAgICRpZCA9ICR0YWctPklEOw0KDQogICAgICAgICRzID0gJHpicC0+ZGItPnNxbC0+Q291bnQoJHpicC0+dGFibGVbJ1Bvc3QnXSwgYXJyYXkoYXJyYXkoJ0NPVU5UJywgJyonLCAnbnVtJykpLCBhcnJheShhcnJheSgnTElLRScsICdsb2dfVGFnJywgJyV7JyAuICRpZCAuICd9JScpKSk7DQogICAgICAgICRudW0gPSBHZXRWYWx1ZUluQXJyYXlCeUN1cnJlbnQoJHpicC0+ZGItPlF1ZXJ5KCRzKSwgJ251bScpOw0KDQogICAgICAgICR0YWctPkNvdW50ID0gJG51bTsNCiAgICB9IGVsc2Ugew0KICAgICAgICAkdGFnLT5Db3VudCArPSAkcGx1czsNCiAgICB9DQp9DQoNCi8qKg0KICog5om56YeP57uf6K6h5oyH5a6adGFn5LiL5paH56ug5pWw5bm25L+d5a2YLg0KICoNCiAqIEBwYXJhbSBzdHJpbmcgJHN0cmluZyDnsbvkvLwnezF9ezJ9ezN9ezR9ezR9J+eahHRhZ0lE5LiyDQogKiBAcGFyYW0gaW50ICAgICRwbHVzICAg5o6n5Yi25piv5ZCm6KaB6L+b6KGM5YWo6KGo5omr5o+PDQogKg0KICogQHJldHVybiBib29sDQogKi8NCmZ1bmN0aW9uIENvdW50VGFnQXJyYXlTdHJpbmcoJHN0cmluZywgJHBsdXMgPSBudWxsLCAkYXJ0aWNsZWlkID0gbnVsbCkNCnsNCiAgICBnbG9iYWwgJHpicDsNCiAgICAvKiogQHZhciBUYWdbXSAkYXJyYXkgKi8NCiAgICAkYXJyYXkgPSAkemJwLT5Mb2FkVGFnc0J5SURTdHJpbmcoJHN0cmluZyk7DQoNCiAgICAvL+a3u+WKoOWkp+aVsOaNruaOpeWPoyx0YWcscGx1cyxpZA0KICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX0xhcmdlRGF0YV9Db3VudFRhZ0FycmF5J10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICRmcHJldHVybiA9ICRmcG5hbWUoJGFycmF5LCAkcGx1cywgJGFydGljbGVpZCk7DQogICAgICAgIGlmICgkZnBzaWduYWwgPT0gUExVR0lOX0VYSVRTSUdOQUxfUkVUVVJOKSB7DQogICAgICAgICAgICAkZnBzaWduYWwgPSBQTFVHSU5fRVhJVFNJR05BTF9OT05FOw0KDQogICAgICAgICAgICByZXR1cm4gJGZwcmV0dXJuOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgZm9yZWFjaCAoJGFycmF5IGFzICYkdGFnKSB7DQogICAgICAgIENvdW50VGFnKCR0YWcsICRwbHVzKTsNCiAgICAgICAgJHRhZy0+U2F2ZSgpOw0KICAgIH0NCg0KICAgIHJldHVybiB0cnVlOw0KfQ0KDQovKioNCiAqIOe7n+iuoeeUqOaIt+S4i+eahOaWh+eroOaVsOOAgemhtemdouaVsOOAgeivhOiuuuaVsOOAgemZhOS7tuaVsOetiS4NCiAqDQogKiBAcGFyYW0gJG1lbWJlcg0KICogQHBhcmFtIGFycmF5ICRwbHVzIOiuvue9ruaYr+WQpumcgOimgeWujOWFqOWFqOihqOaJq+aPjw0KICovDQpmdW5jdGlvbiBDb3VudE1lbWJlcigmJG1lbWJlciwgJHBsdXMgPSBhcnJheShudWxsLCBudWxsLCBudWxsLCBudWxsKSkNCnsNCiAgICBnbG9iYWwgJHpicDsNCiAgICBpZiAoISgkbWVtYmVyIGluc3RhbmNlb2YgTWVtYmVyKSkgew0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgJGlkID0gJG1lbWJlci0+SUQ7DQoNCiAgICBpZiAoJHBsdXNbMF0gPT09IG51bGwpIHsNCiAgICAgICAgJHMgPSAkemJwLT5kYi0+c3FsLT5Db3VudCgkemJwLT50YWJsZVsnUG9zdCddLCBhcnJheShhcnJheSgnQ09VTlQnLCAnKicsICdudW0nKSksIGFycmF5KGFycmF5KCc9JywgJ2xvZ19BdXRob3JJRCcsICRpZCksIGFycmF5KCc9JywgJ2xvZ19UeXBlJywgMCkpKTsNCiAgICAgICAgJG1lbWJlcl9BcnRpY2xlcyA9IEdldFZhbHVlSW5BcnJheUJ5Q3VycmVudCgkemJwLT5kYi0+UXVlcnkoJHMpLCAnbnVtJyk7DQogICAgICAgICRtZW1iZXItPkFydGljbGVzID0gJG1lbWJlcl9BcnRpY2xlczsNCiAgICB9IGVsc2Ugew0KICAgICAgICAkbWVtYmVyLT5BcnRpY2xlcyArPSAkcGx1c1swXTsNCiAgICB9DQoNCiAgICBpZiAoJHBsdXNbMV0gPT09IG51bGwpIHsNCiAgICAgICAgJHMgPSAkemJwLT5kYi0+c3FsLT5Db3VudCgkemJwLT50YWJsZVsnUG9zdCddLCBhcnJheShhcnJheSgnQ09VTlQnLCAnKicsICdudW0nKSksIGFycmF5KGFycmF5KCc9JywgJ2xvZ19BdXRob3JJRCcsICRpZCksIGFycmF5KCc9JywgJ2xvZ19UeXBlJywgMSkpKTsNCiAgICAgICAgJG1lbWJlcl9QYWdlcyA9IEdldFZhbHVlSW5BcnJheUJ5Q3VycmVudCgkemJwLT5kYi0+UXVlcnkoJHMpLCAnbnVtJyk7DQogICAgICAgICRtZW1iZXItPlBhZ2VzID0gJG1lbWJlcl9QYWdlczsNCiAgICB9IGVsc2Ugew0KICAgICAgICAkbWVtYmVyLT5QYWdlcyArPSAkcGx1c1sxXTsNCiAgICB9DQoNCiAgICBpZiAoJHBsdXNbMl0gPT09IG51bGwpIHsNCiAgICAgICAgaWYgKCRtZW1iZXItPklEID4gMCkgew0KICAgICAgICAgICAgJHMgPSAkemJwLT5kYi0+c3FsLT5Db3VudCgkemJwLT50YWJsZVsnQ29tbWVudCddLCBhcnJheShhcnJheSgnQ09VTlQnLCAnKicsICdudW0nKSksIGFycmF5KGFycmF5KCc9JywgJ2NvbW1fQXV0aG9ySUQnLCAkaWQpLCBhcnJheSgnPScsICdjb21tX0lzQ2hlY2tpbmcnLCAwKSkpOw0KICAgICAgICAgICAgJG1lbWJlcl9Db21tZW50cyA9IEdldFZhbHVlSW5BcnJheUJ5Q3VycmVudCgkemJwLT5kYi0+UXVlcnkoJHMpLCAnbnVtJyk7DQogICAgICAgICAgICAkbWVtYmVyLT5Db21tZW50cyA9ICRtZW1iZXJfQ29tbWVudHM7DQogICAgICAgIH0NCiAgICB9IGVsc2Ugew0KICAgICAgICAkbWVtYmVyLT5Db21tZW50cyArPSAkcGx1c1syXTsNCiAgICB9DQoNCiAgICBpZiAoJHBsdXNbM10gPT09IG51bGwpIHsNCiAgICAgICAgJHMgPSAkemJwLT5kYi0+c3FsLT5Db3VudCgkemJwLT50YWJsZVsnVXBsb2FkJ10sIGFycmF5KGFycmF5KCdDT1VOVCcsICcqJywgJ251bScpKSwgYXJyYXkoYXJyYXkoJz0nLCAndWxfQXV0aG9ySUQnLCAkaWQpKSk7DQogICAgICAgICRtZW1iZXJfVXBsb2FkcyA9IEdldFZhbHVlSW5BcnJheUJ5Q3VycmVudCgkemJwLT5kYi0+UXVlcnkoJHMpLCAnbnVtJyk7DQogICAgICAgICRtZW1iZXItPlVwbG9hZHMgPSAkbWVtYmVyX1VwbG9hZHM7DQogICAgfSBlbHNlIHsNCiAgICAgICAgJG1lbWJlci0+VXBsb2FkcyArPSAkcGx1c1szXTsNCiAgICB9DQp9DQoNCi8qKg0KICog5om56YeP57uf6K6h5oyH5a6a55So5oi35pWw5o2u5bm25L+d5a2YLg0KICoNCiAqIEBwYXJhbSBhcnJheSAkYXJyYXkg6K6w5b2V55So5oi3SUTnmoTmlbDnu4QNCiAqIEBwYXJhbSBhcnJheSAkcGx1cyAg6K6+572u5piv5ZCm6ZyA6KaB5a6M5YWo5YWo6KGo5omr5o+PDQogKi8NCmZ1bmN0aW9uIENvdW50TWVtYmVyQXJyYXkoJGFycmF5LCAkcGx1cyA9IGFycmF5KG51bGwsIG51bGwsIG51bGwsIG51bGwpKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KICAgICRhcnJheSA9IGFycmF5X3VuaXF1ZSgkYXJyYXkpOw0KICAgIGZvcmVhY2ggKCRhcnJheSBhcyAkdmFsdWUpIHsNCiAgICAgICAgaWYgKCR2YWx1ZSA9PSAwKSB7DQogICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmIChpc3NldCgkemJwLT5tZW1iZXJzWyR2YWx1ZV0pKSB7DQogICAgICAgICAgICBDb3VudE1lbWJlcigkemJwLT5tZW1iZXJzWyR2YWx1ZV0sICRwbHVzKTsNCiAgICAgICAgICAgICR6YnAtPm1lbWJlcnNbJHZhbHVlXS0+U2F2ZSgpOw0KICAgICAgICB9DQogICAgfQ0KfQ0KDQovLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KLyoqDQogKiDmmL7npLo0MDTpobXpnaIo5YaF572u5o+S5Lu25Ye95pWwKS4NCiAqDQogKiDlj6/pgJrov4fkuLvpopjkuK3nmoQ0MDQucGhw5qih5p2/6Ieq5a6a5LmJ5pi+56S65pWI5p6cDQogKg0KICogQGFwaSBGaWx0ZXJfUGx1Z2luX1picF9TaG93RXJyb3INCiAqDQogKiBAcGFyYW0gJGVycm9yQ29kZQ0KICogQHBhcmFtICRlcnJvckRlc2NyaXB0aW9uDQogKiBAcGFyYW0gJGZpbGUNCiAqIEBwYXJhbSAkbGluZQ0KICoNCiAqIEB0aHJvd3MgRXhjZXB0aW9uDQogKi8NCmZ1bmN0aW9uIEluY2x1ZGVfU2hvd0Vycm9yNDA0KCRlcnJvckNvZGUsICRlcnJvckRlc2NyaXB0aW9uLCAkZmlsZSwgJGxpbmUpDQp7DQogICAgZ2xvYmFsICR6YnA7DQogICAgaWYgKCFpbl9hcnJheSgiU3RhdHVzOiA0MDQgTm90IEZvdW5kIiwgaGVhZGVyc19saXN0KCkpKSB7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICAkemJwLT50ZW1wbGF0ZS0+U2V0VGFncygndGl0bGUnLCAkemJwLT50aXRsZSk7DQogICAgJHpicC0+dGVtcGxhdGUtPlNldFRlbXBsYXRlKCc0MDQnKTsNCiAgICAkemJwLT50ZW1wbGF0ZS0+RGlzcGxheSgpOw0KDQogICAgZXhpdDsNCn0NCg0KLyoqDQogKiDovpPlh7rlkI7lj7DmjIflrprlrZfkvZNmYW1pbHko5YaF572u5o+S5Lu25Ye95pWwKS4NCiAqLw0KZnVuY3Rpb24gSW5jbHVkZV9BZGRvbkFkbWluRm9udCgpDQp7DQogICAgZ2xvYmFsICR6YnA7DQogICAgJGYgPSAkcyA9ICcnOw0KICAgIGlmIChpc3NldCgkemJwLT5sYW5nWydmb250X2ZhbWlseSddKSAmJiB0cmltKCR6YnAtPmxhbmdbJ2ZvbnRfZmFtaWx5J10pKSB7DQogICAgICAgICRmID0gJ2ZvbnQtZmFtaWx5OicgLiAkemJwLT5sYW5nWydmb250X2ZhbWlseSddIC4gJzsnOw0KICAgIH0NCg0KICAgIGlmIChpc3NldCgkemJwLT5sYW5nWydmb250X3NpemUnXSkgJiYgdHJpbSgkemJwLT5sYW5nWydmb250X3NpemUnXSkpIHsNCiAgICAgICAgJHMgPSAnZm9udC1zaXplOicgLiAkemJwLT5sYW5nWydmb250X3NpemUnXSAuICc7JzsNCiAgICB9DQoNCiAgICBpZiAoJGYgfHwgJHMpIHsNCiAgICAgICAgZWNobyAnPHN0eWxlIHR5cGU9InRleHQvY3NzIj5ib2R5eycgLiAkcyAuICRmIC4gJ308L3N0eWxlPic7DQogICAgfQ0KfQ0KDQovKioNCiAqIEBkZXByZWNhdGVkDQogKg0KICogQHRocm93cyBFeGNlcHRpb24NCiAqDQogKiBAcmV0dXJuIHN0cmluZw0KICovDQpmdW5jdGlvbiBCdWlsZE1vZHVsZV9jYXRhbG9nKCkNCnsNCiAgICByZXR1cm4gTW9kdWxlQnVpbGRlcjo6Q2F0YWxvZygpOw0KfQ0KDQovKioNCiAqIEBkZXByZWNhdGVkDQogKg0KICogQHBhcmFtIHN0cmluZyAkZGF0ZQ0KICoNCiAqIEB0aHJvd3MgRXhjZXB0aW9uDQogKg0KICogQHJldHVybiBzdHJpbmcNCiAqLw0KZnVuY3Rpb24gQnVpbGRNb2R1bGVfY2FsZW5kYXIoJGRhdGUgPSAnJykNCnsNCiAgICByZXR1cm4gTW9kdWxlQnVpbGRlcjo6Q2FsZW5kYXIoJGRhdGUpOw0KfQ0KDQovKioNCiAqIEBkZXByZWNhdGVkDQogKg0KICogQHRocm93cyBFeGNlcHRpb24NCiAqDQogKiBAcmV0dXJuIHN0cmluZw0KICovDQpmdW5jdGlvbiBCdWlsZE1vZHVsZV9jb21tZW50cygpDQp7DQogICAgcmV0dXJuIE1vZHVsZUJ1aWxkZXI6OkNvbW1lbnRzKCk7DQp9DQoNCi8qKg0KICogQGRlcHJlY2F0ZWQNCiAqDQogKiBAdGhyb3dzIEV4Y2VwdGlvbg0KICoNCiAqIEByZXR1cm4gc3RyaW5nDQogKi8NCmZ1bmN0aW9uIEJ1aWxkTW9kdWxlX3ByZXZpb3VzKCkNCnsNCiAgICByZXR1cm4gTW9kdWxlQnVpbGRlcjo6TGF0ZXN0QXJ0aWNsZXMoKTsNCn0NCg0KLyoqDQogKiBAZGVwcmVjYXRlZA0KICoNCiAqIEB0aHJvd3MgRXhjZXB0aW9uDQogKg0KICogQHJldHVybiBzdHJpbmcNCiAqLw0KZnVuY3Rpb24gQnVpbGRNb2R1bGVfYXJjaGl2ZXMoKQ0Kew0KICAgIHJldHVybiBNb2R1bGVCdWlsZGVyOjpBcmNoaXZlcygpOw0KfQ0KDQovKioNCiAqIEBkZXByZWNhdGVkDQogKg0KICogQHRocm93cyBFeGNlcHRpb24NCiAqDQogKiBAcmV0dXJuIHN0cmluZw0KICovDQpmdW5jdGlvbiBCdWlsZE1vZHVsZV9uYXZiYXIoKQ0Kew0KICAgIHJldHVybiBNb2R1bGVCdWlsZGVyOjpOYXZiYXIoKTsNCn0NCg0KLyoqDQogKiBAZGVwcmVjYXRlZA0KICoNCiAqIEB0aHJvd3MgRXhjZXB0aW9uDQogKg0KICogQHJldHVybiBzdHJpbmcNCiAqLw0KZnVuY3Rpb24gQnVpbGRNb2R1bGVfdGFncygpDQp7DQogICAgcmV0dXJuIE1vZHVsZUJ1aWxkZXI6OlRhZ0xpc3QoKTsNCn0NCg0KLyoqDQogKiBAZGVwcmVjYXRlZA0KICoNCiAqIEBwYXJhbSBpbnQgJGxldmVsDQogKg0KICogQHRocm93cyBFeGNlcHRpb24NCiAqDQogKiBAcmV0dXJuIHN0cmluZw0KICovDQpmdW5jdGlvbiBCdWlsZE1vZHVsZV9hdXRob3JzKCRsZXZlbCA9IDQpDQp7DQogICAgcmV0dXJuIE1vZHVsZUJ1aWxkZXI6OkF1dGhvcnMoJGxldmVsKTsNCn0NCg0KLyoqDQogKiBAZGVwcmVjYXRlZA0KICoNCiAqIEBwYXJhbSBhcnJheSAkYXJyYXkNCiAqDQogKiBAdGhyb3dzIEV4Y2VwdGlvbg0KICoNCiAqIEByZXR1cm4gc3RyaW5nDQogKi8NCmZ1bmN0aW9uIEJ1aWxkTW9kdWxlX3N0YXRpc3RpY3MoJGFycmF5ID0gYXJyYXkoKSkNCnsNCiAgICByZXR1cm4gTW9kdWxlQnVpbGRlcjo6U3RhdGlzdGljcygkYXJyYXkpOw0KfQ0K</file>
	<file name='zb_system\css\admin2.css' crc32='82D7BAE4'  dt:dt='bin.base64'>QGNoYXJzZXQgInV0Zi04IjsNCg0KLyoNCuS9nOiAhe+8muaWsOmynOS6ug0K5Zyw5Z2A77yaaHR0cDovL3d3dy5odG1saXQuY29tLmNuDQrpgq7nrrHvvJp1MmxlaUB5YWhvby5jb20uY24NCiAgICAgeGlueHJAbXNuLmNvbQ0KKi8NCiogeyBwYWRkaW5nOiAwOyBtYXJnaW46IDA7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IH0NCmJvZHkgeyBtaW4td2lkdGg6IDk4MHB4OyBwYWRkaW5nOiAwOyBtYXJnaW46IDA7IGZvbnQtZmFtaWx5OiAiTWljcm9zb2Z0IFlhSGVpIiwgU1RIZWl0aSwgIkhpcmFnaW5vIFNhbnMgR0IiLCAiV2VuUXVhbllpIE1pY3JvIEhlaSIsICJIZWl0aSBTQyIsIE5TaW1TdW4sIFNpbVN1biwgQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZjsgY29sb3I6ICMzMzMzMzM7IGZvbnQtc2l6ZTogMTRweDsgbGluZS1oZWlnaHQ6IDIwcHg7IH0NCmRpdiwNCmgxLA0KaDIsDQpoMywNCmg0LA0KcCwNCmZvcm0sDQp1bCwNCmxhYmVsLA0KaW5wdXQsDQp0ZXh0YXJlYSwNCnNlbGVjdCwNCmltZywNCnNwYW4geyBtYXJnaW46IDA7IHBhZGRpbmc6IDA7IH0NCmEgeyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IGNvbG9yOiAjMzMzMzMzOyB9DQphOmhvdmVyIHsgY29sb3I6ICNkNjAwMDA7IH0NCi5jbGVhciB7IGNsZWFyOiBib3RoOyB9DQppbWcgeyBib3JkZXI6IG5vbmU7IH0NCmgxLA0KaDIsDQpoMywNCmg0LA0KaDUsDQpoNiB7IGRpc3BsYXk6IGJsb2NrOyBmb250LXdlaWdodDogYm9sZDsgfQ0KaDEgeyBmb250LXNpemU6IDJlbTsgbWFyZ2luOiAuNjdlbSAwOyB9DQpoMiB7IGZvbnQtc2l6ZTogMS41ZW07IG1hcmdpbjogLjgzZW0gMDsgfQ0KaDMgeyBmb250LXNpemU6IDEuMTdlbTsgbWFyZ2luOiAxZW0gMDsgfQ0KaDQgeyBmb250LXNpemU6IDFlbTsgbWFyZ2luOiAxLjMzZW0gMDsgfQ0KaDUgeyBmb250LXNpemU6IDAuODNlbTsgbWFyZ2luOiAxLjY3ZW0gMDsgfQ0KaDYgeyBmb250LXNpemU6IDAuNjdlbTsgbWFyZ2luOiAyLjMzZW0gMDsgfQ0KdWwsDQpvbCwNCmRsIHsgcGFkZGluZzogMDsgbWFyZ2luOiAwOyB9DQpkZCB7IHBhZGRpbmc6IDA7IG1hcmdpbjogMDsgfQ0KdWwgeyBsaXN0LXN0eWxlOiBub25lOyB9DQpsaSB7IGxpc3Qtc3R5bGUtdHlwZTogbm9uZTsgfQ0Kb2wgeyBsaXN0LXN0eWxlLXR5cGU6IGRlY2ltYWw7IG1hcmdpbi1sZWZ0OiAyZW07IH0NCmxhYmVsIHsgY3Vyc29yOiBwb2ludGVyOyB9DQoNCi8q5ZCO5Y+w6aG26YOoKi8NCi5oZWFkZXIgeyBtYXJnaW4tYm90dG9tOiA1cHg7IGhlaWdodDogODVweDsgcGFkZGluZzogMDsgYmFja2dyb3VuZDogIzNhNmVhNTsgcG9zaXRpb246IHJlbGF0aXZlOyB9DQouaGVhZGVyIC50b3AgeyB9DQoNCi8qKi8NCi5sb2dvIHsgd2lkdGg6IDIwMHB4OyBoZWlnaHQ6IDcwcHg7IHBhZGRpbmc6IDEwcHggMCAwIDA7IGxlZnQ6IDIwcHg7IH0NCi5sb2dvIGltZyB7IHdpZHRoOiAyMDBweDsgaGVpZ2h0OiA3MHB4OyBwYWRkaW5nOiAwIDAgMCAwOyBiYWNrZ3JvdW5kOiB1cmwoIi4uL2ltYWdlL2FkbWluL2xvZ28ucG5nIikgY2VudGVyIGNlbnRlciBuby1yZXBlYXQ7IH0NCg0KLyoqLw0KLnVzZXIgeyBwb3NpdGlvbjogYWJzb2x1dGU7IHJpZ2h0OiAxM3B4OyB0b3A6IDEwcHg7IHdpZHRoOiA0MDBweDsgaGVpZ2h0OiA0MHB4OyB0ZXh0LWFsaWduOiByaWdodDsgY29sb3I6ICNmZmZmZmY7IH0NCi51c2VyICNhdmF0YXIgeyBmbG9hdDogcmlnaHQ7IHdpZHRoOiA0MHB4OyBoZWlnaHQ6IDQwcHg7IG1hcmdpbi1sZWZ0OiAxMHB4OyBtYXJnaW4tdG9wOiAwcHg7IH0NCi51c2VybmFtZSB7IHBhZGRpbmc6IDA7IGhlaWdodDogMjBweDsgbGluZS1oZWlnaHQ6IDIwcHg7IG92ZXJmbG93OiBoaWRkZW47IH0NCi51c2VyYnRuIHsgcGFkZGluZzogMDsgaGVpZ2h0OiAyMHB4OyBsaW5lLWhlaWdodDogMjBweDsgfQ0KLnVzZXJidG4gYSB7IHBhZGRpbmc6IDA7IG1hcmdpbi1sZWZ0OiAxNXB4OyBjb2xvcjogI2ZmZmZmZjsgaGVpZ2h0OiAyMHB4OyBsaW5lLWhlaWdodDogMjBweDsgdmVydGljYWwtYWxpZ246IHRvcDsgfQ0KLnVzZXJidG4gYS5sb2dvdXQgeyBwYWRkaW5nLWxlZnQ6IDIwcHg7IGJhY2tncm91bmQ6IHVybCguLi9pbWFnZS9jb21tb24vdHVpY18yLnBuZykgbm8tcmVwZWF0IGxlZnQgY2VudGVyOyB9DQoudXNlcmJ0biAubG9nb3V0OmhvdmVyIHsgcGFkZGluZy1sZWZ0OiAyMHB4O3RleHQtc2hhZG93OiAwcHggMHB4IDJweCAjZmZmOyBjb2xvcjogI2ZmZjsgYmFja2dyb3VuZDogdXJsKC4uL2ltYWdlL2NvbW1vbi90dWljXzIucG5nKSBuby1yZXBlYXQgbGVmdCBjZW50ZXI7IH0NCi51c2VyYnRuIGEucHJvZmlsZSB7IHBhZGRpbmctbGVmdDogMjBweDsgYmFja2dyb3VuZDogdXJsKC4uL2ltYWdlL2NvbW1vbi9ob21lXzIucG5nKSBuby1yZXBlYXQgbGVmdCBjZW50ZXI7IH0NCi51c2VyYnRuIC5wcm9maWxlOmhvdmVyIHsgcGFkZGluZy1sZWZ0OiAyMHB4O3RleHQtc2hhZG93OiAwcHggMHB4IDJweCAjZmZmOyBjb2xvcjogI2ZmZjsgYmFja2dyb3VuZDogdXJsKC4uL2ltYWdlL2NvbW1vbi9ob21lXzIucG5nKSBuby1yZXBlYXQgbGVmdCBjZW50ZXI7IH0NCg0KLyoqLw0KLm1lbnUgeyBoZWlnaHQ6IDMwcHg7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgcmlnaHQ6IDEwcHg7IGJvdHRvbTogMHB4OyB9DQoubWVudSB1bCB7IGZsb2F0OiByaWdodDsgbWFyZ2luOiAwOyBwYWRkaW5nOiAwOyB9DQoubWVudSB1bCBsaSB7IGZsb2F0OiBsZWZ0OyBsaW5lLWhlaWdodDogMzBweDsgcGFkZGluZzogMDsgaGVpZ2h0OiAzMHB4OyBtYXJnaW46IDAgM3B4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IH0NCi5tZW51IHVsIGxpIGEgeyBmbG9hdDogbGVmdDsgbGluZS1oZWlnaHQ6IDMwcHg7IGhlaWdodDogMzBweDsgcGFkZGluZzogMHB4IDE1cHg7IGNvbG9yOiAjMzMzMzMzOyBiYWNrZ3JvdW5kOiAjZmZmZmZmOyB9DQoubWVudSB1bCBsaSBhOmhvdmVyIHsgZmxvYXQ6IGxlZnQ7IGxpbmUtaGVpZ2h0OiAzMHB4OyBoZWlnaHQ6IDMwcHg7IHBhZGRpbmc6IDBweCAxNXB4OyBjb2xvcjogI2ZmZmZmZjsgYmFja2dyb3VuZDogI2IwY2RlZTsgfQ0KLm1lbnUgdWwgbGkub24geyBmb250LXdlaWdodDogYm9sZDsgfQ0KDQovKuW3pui+ueWvvOiIqiovDQoubGVmdCB7IGZsb2F0OiBsZWZ0OyB3aWR0aDogMTQwcHg7IHBhZGRpbmc6IDBweDsgb3ZlcmZsb3c6IGhpZGRlbjsgbWFyZ2luOiAwIDAgMCAwOyBwb3NpdGlvbjogYWJzb2x1dGU7IH0NCi5sZWZ0ICNsZWZ0bWVudSB7IH0NCi5sZWZ0ICNsZWZ0bWVudSBsaSB7IGZsb2F0OiBsZWZ0OyB3aWR0aDogMTQwcHg7IGhlaWdodDogMzJweDsgbWFyZ2luLWJvdHRvbTogNXB4OyBiYWNrZ3JvdW5kOiAjZWRlZGVkOyBjdXJzb3I6IHBvaW50ZXI7IH0NCi5sZWZ0ICNsZWZ0bWVudSBhIHsgZmxvYXQ6IGxlZnQ7IHdpZHRoOiAxNDBweDsgaGVpZ2h0OiAzMnB4OyBsaW5lLWhlaWdodDogMzVweDsgY3Vyc29yOiBwb2ludGVyOyB9DQoubGVmdCAjbGVmdG1lbnUgYTpob3ZlciB7IGNvbG9yOiAjMDAwMDAwOyBiYWNrZ3JvdW5kOiAjYjBjZGVlOyB9DQoubGVmdCAjbGVmdG1lbnUgc3BhbiB7IGZsb2F0OiBsZWZ0OyB3aWR0aDogYXV0bzsgaGVpZ2h0OiAzMnB4OyBsaW5lLWhlaWdodDogMzJweDsgdGV4dC1hbGlnbjogbGVmdDsgY3Vyc29yOiBwb2ludGVyOyBtYXJnaW4tbGVmdDogMjVweDsgcGFkZGluZy1sZWZ0OiAyMnB4OyB9DQoNCi8q5a+86Iiq6auY5LquKi8NCi5sZWZ0ICNsZWZ0bWVudSAub24gYSwNCi5sZWZ0ICNsZWZ0bWVudSAjb24gYTpob3ZlciB7IGNvbG9yOiAjZmZmZmZmOyBiYWNrZ3JvdW5kOiAjMzM5OWNjOyB9DQoubGVmdCAjbGVmdG1lbnUgbGkuc3ViIHsgZmxvYXQ6IGxlZnQ7IHdpZHRoOiAxNDBweDsgaGVpZ2h0OiBhdXRvOyBtYXJnaW4tYm90dG9tOiAwOyBib3JkZXItYm90dG9tOiA1cHggc29saWQgI2ZmZjsgY3Vyc29yOiBwb2ludGVyOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgfQ0KLmxlZnQgI2xlZnRtZW51IGxpLnN1YiBzcGFuIHsgaGVpZ2h0OiAyNXB4OyBsaW5lLWhlaWdodDogMjVweDsgdGV4dC1hbGlnbjogbGVmdDsgd2lkdGg6IDEwNXB4OyBwYWRkaW5nLWxlZnQ6IDM1cHg7IHBhZGRpbmctcmlnaHQ6IDBweDsgb3ZlcmZsb3c6IGhpZGRlbjsgfQ0KLmxlZnQgI2xlZnRtZW51IGxpLnN1YiBhIHsgaGVpZ2h0OiAyNXB4OyBsaW5lLWhlaWdodDogMjVweDsgfQ0KLmxlZnQgI2xlZnRtZW51IGxpLnN1YiBhOmhvdmVyIHsgYmFja2dyb3VuZDogd2hpdGU7IH0NCi5sZWZ0ICNsZWZ0bWVudSBsaS5zdWIgc3Bhbi5tLW5vdyB7IGZvbnQtd2VpZ2h0OiBib2xkOyB9DQoNCi8q5a+86Iiq5Zu+5qCH5Yy6Ki8NCiNsZWZ0bWVudSBsaSBzcGFuIHsgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDsgYmFja2dyb3VuZC1wb3NpdGlvbjogMTAwcHggOHB4OyBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoLi4vaW1hZ2UvY29tbW9uL3dpbmRvd18xLnBuZyk7IH0NCiNsZWZ0bWVudSBsaS5vbiBzcGFuIHsgYmFja2dyb3VuZC1pbWFnZTogdXJsKC4uL2ltYWdlL2NvbW1vbi93aW5kb3dfMi5wbmcpOyB9DQojbGVmdG1lbnUgI25hdl9idWlsZCBzcGFuIHsgYmFja2dyb3VuZC1pbWFnZTogdXJsKC4uL2ltYWdlL2NvbW1vbi9yZWJ1aWxkXzEucG5nKTsgfQ0KI2xlZnRtZW51ICNuYXZfaG9tZSBzcGFuIHsgYmFja2dyb3VuZC1pbWFnZTogdXJsKC4uL2ltYWdlL2NvbW1vbi9ob21lXzEucG5nKTsgfQ0KI2xlZnRtZW51ICNuYXZfbmV3IHNwYW4geyBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoLi4vaW1hZ2UvY29tbW9uL25ld18xLnBuZyk7IH0NCiNsZWZ0bWVudSAjbmF2X2FydGljbGUgc3BhbiB7IGJhY2tncm91bmQtaW1hZ2U6IHVybCguLi9pbWFnZS9jb21tb24vYXJ0aWNsZV8xLnBuZyk7IH0NCiNsZWZ0bWVudSAjbmF2X3BhZ2Ugc3BhbiB7IGJhY2tncm91bmQtaW1hZ2U6IHVybCguLi9pbWFnZS9jb21tb24vcGFnZV8xLnBuZyk7IH0NCiNsZWZ0bWVudSAjbmF2X2NhdGVnb3J5IHNwYW4geyBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoLi4vaW1hZ2UvY29tbW9uL2NhdGVnb3J5XzEucG5nKTsgfQ0KI2xlZnRtZW51ICNuYXZfdGFncyBzcGFuIHsgYmFja2dyb3VuZC1pbWFnZTogdXJsKC4uL2ltYWdlL2NvbW1vbi90YWdzXzEucG5nKTsgfQ0KI2xlZnRtZW51ICNuYXZfY29tbWVudCBzcGFuIHsgYmFja2dyb3VuZC1pbWFnZTogdXJsKC4uL2ltYWdlL2NvbW1vbi9jb21tZW50c18xLnBuZyk7IH0NCiNsZWZ0bWVudSAjbmF2X3F1b3RlZCBzcGFuIHsgYmFja2dyb3VuZC1pbWFnZTogdXJsKC4uL2ltYWdlL2NvbW1vbi9xdW90ZWRfMS5wbmcpOyB9DQojbGVmdG1lbnUgI25hdl91cGxvYWQgc3BhbiB7IGJhY2tncm91bmQtaW1hZ2U6IHVybCguLi9pbWFnZS9jb21tb24vYWNjZXNzb3JpZXNfMS5wbmcpOyB9DQojbGVmdG1lbnUgI25hdl90aGVtZSBzcGFuIHsgYmFja2dyb3VuZC1pbWFnZTogdXJsKC4uL2ltYWdlL2NvbW1vbi90aGVtZXNfMS5wbmcpOyB9DQojbGVmdG1lbnUgI25hdl9wbHVnaW4gc3BhbiB7IGJhY2tncm91bmQtaW1hZ2U6IHVybCguLi9pbWFnZS9jb21tb24vcGx1Z2luXzEucG5nKTsgfQ0KI2xlZnRtZW51ICNuYXZfbW9kdWxlIHNwYW4geyBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoLi4vaW1hZ2UvY29tbW9uL2xpbmtfMS5wbmcpOyB9DQojbGVmdG1lbnUgI25hdl9tZW1iZXIgc3BhbiB7IGJhY2tncm91bmQtaW1hZ2U6IHVybCguLi9pbWFnZS9jb21tb24vdXNlcl8xLnBuZyk7IH0NCg0KLyrpq5jkuq7lr7zoiKrlm77moIfljLoqLw0KI2xlZnRtZW51ICNuYXZfYnVpbGQub24gc3BhbiB7IGJhY2tncm91bmQtaW1hZ2U6IHVybCguLi9pbWFnZS9jb21tb24vcmVidWlsZF8yLnBuZyk7IH0NCiNsZWZ0bWVudSAjbmF2X2hvbWUub24gc3BhbiB7IGJhY2tncm91bmQtaW1hZ2U6IHVybCguLi9pbWFnZS9jb21tb24vaG9tZV8yLnBuZyk7IH0NCiNsZWZ0bWVudSAjbmF2X25ldy5vbiBzcGFuIHsgYmFja2dyb3VuZC1pbWFnZTogdXJsKC4uL2ltYWdlL2NvbW1vbi9uZXdfMi5wbmcpOyB9DQojbGVmdG1lbnUgI25hdl9hcnRpY2xlLm9uIHNwYW4geyBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoLi4vaW1hZ2UvY29tbW9uL2FydGljbGVfMi5wbmcpOyB9DQojbGVmdG1lbnUgI25hdl9wYWdlLm9uIHNwYW4geyBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoLi4vaW1hZ2UvY29tbW9uL3BhZ2VfMi5wbmcpOyB9DQojbGVmdG1lbnUgI25hdl9jYXRlZ29yeS5vbiBzcGFuIHsgYmFja2dyb3VuZC1pbWFnZTogdXJsKC4uL2ltYWdlL2NvbW1vbi9jYXRlZ29yeV8yLnBuZyk7IH0NCiNsZWZ0bWVudSAjbmF2X3RhZ3Mub24gc3BhbiB7IGJhY2tncm91bmQtaW1hZ2U6IHVybCguLi9pbWFnZS9jb21tb24vdGFnc18yLnBuZyk7IH0NCiNsZWZ0bWVudSAjbmF2X2NvbW1lbnQub24gc3BhbiB7IGJhY2tncm91bmQtaW1hZ2U6IHVybCguLi9pbWFnZS9jb21tb24vY29tbWVudHNfMi5wbmcpOyB9DQojbGVmdG1lbnUgI25hdl9xdW90ZWQub24gc3BhbiB7IGJhY2tncm91bmQtaW1hZ2U6IHVybCguLi9pbWFnZS9jb21tb24vcXVvdGVkXzIucG5nKTsgfQ0KI2xlZnRtZW51ICNuYXZfdXBsb2FkLm9uIHNwYW4geyBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoLi4vaW1hZ2UvY29tbW9uL2FjY2Vzc29yaWVzXzIucG5nKTsgfQ0KI2xlZnRtZW51ICNuYXZfdGhlbWUub24gc3BhbiB7IGJhY2tncm91bmQtaW1hZ2U6IHVybCguLi9pbWFnZS9jb21tb24vdGhlbWVzXzIucG5nKTsgfQ0KI2xlZnRtZW51ICNuYXZfcGx1Z2luLm9uIHNwYW4geyBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoLi4vaW1hZ2UvY29tbW9uL3BsdWdpbl8yLnBuZyk7IH0NCiNsZWZ0bWVudSAjbmF2X21vZHVsZS5vbiBzcGFuIHsgYmFja2dyb3VuZC1pbWFnZTogdXJsKC4uL2ltYWdlL2NvbW1vbi9saW5rXzIucG5nKTsgfQ0KI2xlZnRtZW51ICNuYXZfbWVtYmVyLm9uIHNwYW4geyBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoLi4vaW1hZ2UvY29tbW9uL3VzZXJfMi5wbmcpOyB9DQojbGVmdG1lbnUgbGkgc3BhbiB7IGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7IGJhY2tncm91bmQtcG9zaXRpb246IDBweCA4cHg7IH0NCiNsZWZ0bWVudSBsaS5zcGxpdCB7IGhlaWdodDogMHB4ICFpbXBvcnRhbnQ7IGJhY2tncm91bmQ6ICNmZmY7IH0NCiNsZWZ0bWVudSBsaS5zcGxpdCBociB7IGRpc3BsYXk6IG5vbmU7IH0NCg0KLyrkuLvopoHlhoXlrrnljLoqLw0KLm1haW4geyBwYWRkaW5nLWxlZnQ6IDE1MHB4OyBwYWRkaW5nLXJpZ2h0OiAxMHB4OyB9DQoNCi8q5ZCO5Y+w6aaW6aG1Ki8NCiNkaXZNYWluIHsgZmxvYXQ6IGxlZnQ7IHdpZHRoOiAxMDAlOyBwYWRkaW5nOiAwcHg7IG1hcmdpbjogMHB4OyB9DQojZGl2TWFpbiBhLA0KI2Rpdk1haW4yIGEgeyBjb2xvcjogIzFkNGM3ZDsgfQ0KI2Rpdk1haW4gYTpob3ZlciwNCiNkaXZNYWluMiAgYTpob3ZlciB7IGNvbG9yOiAjZDYwMDAwOyB9DQojZGl2TWFpbjIgeyBwYWRkaW5nOiAwcHg7IG1hcmdpbjogMHB4OyB9DQouZGl2SGVhZGVyIHsgaGVpZ2h0OiAxLjhlbTsgbGluZS1oZWlnaHQ6IDEuOGVtOyBmb250LXNpemU6IDEuNWVtOyBwYWRkaW5nOiA1cHggMCA0MnB4IDA7IH0NCi5kaXZIZWFkZXIyIHsgaGVpZ2h0OiAxLjhlbTsgbGluZS1oZWlnaHQ6IDEuOGVtOyBmb250LXNpemU6IDEuNWVtOyBwYWRkaW5nOiA1cHggMCA0MnB4IDA7IGJvcmRlci1ib3R0b206IDVweCBzb2xpZCAjZTBlMGUwOyBtYXJnaW4tYm90dG9tOjVweDsgfQ0KLm1haW4+I2Rpdk1haW4+ZGl2W2NsYXNzXj0iZGl2SGVhZGVyIl0sLm1haW4+I2Rpdk1haW4yPmRpdltjbGFzc149ImRpdkhlYWRlciJde3BhZGRpbmctbGVmdDo0MHB4O2JhY2tncm91bmQ6dXJsKCcuLi9pbWFnZS9hZG1pbi9ub25lLmdpZicpIDNweCA5cHggbm8tcmVwZWF0O2JhY2tncm91bmQtc2l6ZTozMnB4O30NCg0KDQovKuihqCAgIOagvCovDQp0YWJsZSB7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IGJhY2tncm91bmQ6ICNmZmZmZmY7IGxpbmUtaGVpZ2h0OiAxMjAlOyB9DQp0YWJsZSBsYWJlbCB7IC1tcy10ZXh0LXNpemUtYWRqdXN0OiAxMDAlOyAvKueUqOS6juino+WGs0lFMTAgZm9yIFdQOOWtl+S9k+i/h+Wkp+eahOmXrumimCovIH0NCnRkLHRoIHsgbWFyZ2luOiAwOyB0ZXh0LWluZGVudDogMDsgdmVydGljYWwtYWxpZ246IG1pZGRsZTsgfQ0KdHIgaW1nIHsgbWFyZ2luLWJvdHRvbTogLTRweDsgfQ0KdHIuY29sb3IxIHsgYmFja2dyb3VuZDogI2VkZWRlZDsgfQ0KdHIuY29sb3IyIHsgYmFja2dyb3VuZDogI0Y0RjRGNDsgfQ0KdHIuY29sb3IzIHsgYmFja2dyb3VuZDogI2ZmZmZmZjsgfQ0KdHIuY29sb3I0IHsgYmFja2dyb3VuZDogI2ZmZmZkZDsgfQ0KLnRhYmxlQm9yZGVyIHsgbGluZS1oZWlnaHQ6IDEuOGVtOyBtYXJnaW4tYm90dG9tOiAwLjhlbTsgbWFyZ2luLXRvcDogMC40ZW07IC1tcy10ZXh0LXNpemUtYWRqdXN0OiAxMDAlOyAvKueUqOS6juino+WGs0lFMTAgZm9yIFdQOOWtl+S9k+i/h+Wkp+eahOmXrumimCovIH0NCi50YWJsZUJvcmRlciB0aCB7IHRleHQtYWxpZ246IGxlZnQ7IH0NCi50YWJsZUJvcmRlci10aGNlbnRlciB0aCB7IHRleHQtYWxpZ246IGNlbnRlcjsgfQ0KLnVpLXNvcnRhYmxlIHRyLmNvbG9yNCB7IGN1cnNvcjogbW92ZTsgfQ0KLm5vdGVpbmZvIHsgZm9udC13ZWlnaHQ6IG5vcm1hbDsgZm9udC1zaXplOiAwLjllbTsgY29sb3I6ICM2NjY7IGZvbnQtc3R5bGU6IGl0YWxpYzsgfQ0KLnRhYmxlRnVsbCB7IHdpZHRoOiAxMDAlOyB9DQoudGRDZW50ZXIgeyB0ZXh0LWFsaWduOiBjZW50ZXI7IH0NCi50ZDUgIHsgd2lkdGg6IDUlOyB9DQoudGQxMCB7IHdpZHRoOiAxMCU7IH0NCi50ZDE1IHsgd2lkdGg6IDE1JTsgfQ0KLnRkMjAgeyB3aWR0aDogMjAlOyB9DQoudGQyNSB7IHdpZHRoOiAyNSU7IH0NCi50ZDMwIHsgd2lkdGg6IDMwJTsgfQ0KLnRkMzUgeyB3aWR0aDogMzUlOyB9DQp0YWJsZSA+IHRib2R5ID4gdHIgPiB0ZDpob3ZlciwNCnRhYmxlID4gdGJvZHkgPiB0ciA+IHRoOmhvdmVyLA0KdGFibGUgPiB0Ym9keSA+IHRyOmhvdmVyID4gdGQsDQp0YWJsZSA+IHRib2R5ID4gdHI6aG92ZXIgPiB0aCB7YmFja2dyb3VuZC1jb2xvcjogI2ZmZmZkZDt9DQp0YWJsZSA+IHRib2R5ID4gdHI6bnRoLW9mLXR5cGUob2RkKSB7YmFja2dyb3VuZC1jb2xvcjogI0Y0RjRGNDt9DQp0YWJsZSA+IHRoZWFkID4gdHIge2JhY2tncm91bmQtY29sb3I6ICNlZGVkZWQ7fQ0KdGFibGV7bWFyZ2luOjAuNWVtIDAgMC41ZW0gMDtib3JkZXI6bm9uZTtsaW5lLWhlaWdodDoxLjg7Ym94LXNoYWRvdzowIDAgMC4xZW0gcmdiYSgwLDAsMCwwLjMpO30NCnRkLHRoe2JvcmRlcjpub25lO3BhZGRpbmc6MC41ZW07IGJvcmRlci1yaWdodDogMXB4IHNvbGlkICNlZmVmZWY7fQ0KdGQ6bGFzdC1jaGlsZHtib3JkZXItcmlnaHQ6bm9uZTt9DQp0aDpsYXN0LWNoaWxke2JvcmRlci1yaWdodDpub25lO30NCg0KLyrooaggICDljZUqLw0KZm9ybSB7IGJvcmRlcjogMHB4IHNvbGlkIGJsYWNrOyBwYWRkaW5nOiAwLjBlbTsgbWFyZ2luOiAwLjVlbSAwOyB9DQpmb3JtIHAgeyBwYWRkaW5nOiAwLjVlbSAwICAwLjVlbSAwOyBsaW5lLWhlaWdodDogMS41ZW07IH0NCmlucHV0IHsgcGFkZGluZzogMC4yNWVtIDAuMjVlbSAwLjI1ZW0gMC4yNWVtOyBib3JkZXI6IDFweCBzb2xpZCAjY2NjOyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBib3R0b207IGJhY2tncm91bmQ6ICNmZmY7IGZvbnQtc2l6ZTogMWVtOyB9DQppbnB1dFt0eXBlPSJyYWRpbyJdIHsgYm9yZGVyOiBub25lOyBiYWNrZ3JvdW5kOiBub25lOyB9DQpzZWxlY3QgeyBwYWRkaW5nOiAwLjE1ZW0gMC4yNWVtIDAuMjBlbSAwLjI1ZW07IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IGJhY2tncm91bmQtcG9zaXRpb246IGJvdHRvbTsgYmFja2dyb3VuZDogI2ZmZjsgZm9udC1zaXplOiAxLjBlbTsgfQ0KdGV4dGFyZWEgeyBib3JkZXI6IDFweCBzb2xpZCAjY2NjOyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBib3R0b207IGJhY2tncm91bmQ6ICNmZmY7IGZvbnQtc2l6ZTogMWVtOyB9DQppbnB1dC5idXR0b24sDQppbnB1dFt0eXBlPSJzdWJtaXQiXSwNCmlucHV0W3R5cGU9ImJ1dHRvbiJdIHsgY29sb3I6ICNmZmZmZmY7IGZvbnQtc2l6ZTogMS4xZW07IGhlaWdodDogMjlweDsgcGFkZGluZzogMnB4IDE4cHggM3B4IDE4cHg7IG1hcmdpbjogMCAwLjVlbTsgYmFja2dyb3VuZDogIzNhNmVhNTsgYm9yZGVyOiAxcHggc29saWQgIzMzOTljYzsgY3Vyc29yOiBwb2ludGVyOyB9DQppbnB1dC5idXR0b246aG92ZXIgeyBiYWNrZ3JvdW5kOiAjMzM5OWNjOyB9DQppbnB1dC5idXR0b24yIHsgd2lkdGg6IGF1dG87IH0NCmlucHV0W2Rpc2FibGVkXSwNCmlucHV0W2Rpc2FibGVkXTpob3ZlciB7IGJhY2tncm91bmQ6ICNlZWU7IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IGN1cnNvcjogbm90LWFsbG93ZWQ7IGNvbG9yOiBibGFjazsgfQ0KaW5wdXRbcmVhZG9ubHldLA0KaW5wdXRbcmVhZG9ubHldOmhvdmVyIHsgYmFja2dyb3VuZDogI2VlZTsgYm9yZGVyOiAxcHggc29saWQgI2NjYzsgY3Vyc29yOiBub3QtYWxsb3dlZDsgY29sb3I6ICM4MDgwODA7IH0NCnNlbGVjdC5lZGl0IHsgd2lkdGg6IDMwMHB4OyB9DQppbnB1dC5lZGl0IHsgd2lkdGg6IDI5M3B4OyB9DQouZm9ybS1ncm91cCB7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgbWFyZ2luLWJvdHRvbTogMDsgdmVydGljYWwtYWxpZ246IG1pZGRsZTsgd2lkdGg6IDEwMCU7IG1hcmdpbi1ib3R0b206IDEwcHg7IH0NCi5mb3JtLWdyb3VwIGxhYmVsIHsgcGFkZGluZy10b3A6IDdweDsgbWFyZ2luLWJvdHRvbTogMDsgcG9zaXRpb246IHJlbGF0aXZlOyBtaW4taGVpZ2h0OiAxcHg7IG1heC13aWR0aDogMTAwJTsgZGlzcGxheTogaW5saW5lLWJsb2NrOyB9DQouZm9ybS1ncm91cCBsYWJlbC50aXRsZSB7IHBhZGRpbmctdG9wOiA3cHg7IHdpZHRoOiAxMiU7IGZsb2F0OiBsZWZ0OyBmb250LXdlaWdodDogYm9sZDsgfQ0KLmZvcm0tZ3JvdXAgbGFiZWxbZm9yPSJOb1JlZnJlc2giXSB7IHdpZHRoOiAyNiU7IH0NCi5mb3JtLWdyb3VwIHNlbGVjdCwNCi5mb3JtLWdyb3VwIGlucHV0W3R5cGU9InRleHQiXSwNCi5mb3JtLWdyb3VwIGlucHV0W3R5cGU9Im51bWJlciJdLA0KLmZvcm0tZ3JvdXAgaW5wdXRbdHlwZT0icGFzc3dvcmQiXSwNCi5mb3JtLWdyb3VwIHRleHRhcmVhIHsgd2lkdGg6IDgwJTsgZmxvYXQ6IGxlZnQ7IHBvc2l0aW9uOiByZWxhdGl2ZTsgbWluLWhlaWdodDogMXB4OyBwYWRkaW5nLXJpZ2h0OiAxNXB4OyBwYWRkaW5nLWxlZnQ6IDE1cHg7IGRpc3BsYXk6IGJsb2NrOyBwYWRkaW5nOiA2cHggIWltcG9ydGFudDsgfQ0KLmZvcm0tZ3JvdXAgc2VsZWN0IHsgd2lkdGg6IDIzMHB4OyB9DQouZm9ybS1ncm91cCAuaW1nY2hlY2sgeyBtYXJnaW4tdG9wOiA4cHg7IG1hcmdpbi1sZWZ0OiAwcHg7IH0NCnRleHRhcmVhI2VkaXRvcl9jb250ZW50IHsgd2lkdGg6IDEwMCU7IGhlaWdodDogMzAwcHg7IG1hcmdpbjogMDsgcGFkZGluZzogMC41ZW0gMC41ZW07IH0NCnRleHRhcmVhI2VkaXRvcl9pbnRybyB7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDE1MHB4OyBtYXJnaW46IDA7IHBhZGRpbmc6IDAuNWVtIDAuNWVtOyB9DQoNCi8q5o+Q56S6RElWKi8NCmRpdi5oaW50IHsgd2lkdGg6IDEwMCU7IG1hcmdpbjogMCAwIDAuMmVtIDA7IH0NCmRpdi5oaW50IHAgeyBwYWRkaW5nOiAwLjJlbSAwLjVlbSAwLjNlbSAyLjJlbTsgbGluZS1oZWlnaHQ6IDEuNWVtOyB9DQpkaXYuaGludCBmb250IHsgY29sb3I6IGJsYWNrOyB9DQpkaXYuaGludCBwLmhpbnRfZ29vZCB7IGJhY2tncm91bmQ6ICNkNWZmY2UgdXJsKC4uL2ltYWdlL2FkbWluL29rLnBuZykgbm8tcmVwZWF0IDhweCBjZW50ZXI7IH0NCmRpdi5oaW50IHAuaGludF9iYWQgeyBiYWNrZ3JvdW5kOiAjZmZjZWNlIHVybCguLi9pbWFnZS9hZG1pbi9leGNsYW1hdGlvbi5wbmcpIG5vLXJlcGVhdCA4cHggY2VudGVyOyB9DQpkaXYuaGludCBwLmhpbnRfdGlwcyB7IGJhY2tncm91bmQ6ICNkYmUzZmYgdXJsKC4uL2ltYWdlL2FkbWluL2luZm9ybWF0aW9uLnBuZykgbm8tcmVwZWF0IDhweCBjZW50ZXI7IH0NCg0KLyrlkI7lj7AqLw0KZm9ybS5zZWFyY2ggeyBiYWNrZ3JvdW5kOiAjZjBmMGYwOyBwYWRkaW5nOiAwLjVlbTsgLW1zLXRleHQtc2l6ZS1hZGp1c3Q6IDEwMCU7IC8q55So5LqO6Kej5YazSUUxMCBmb3IgV1A45a2X5L2T6L+H5aSn55qE6Zeu6aKYKi8gfQ0KZm9ybS5zZWFyY2h7Ym94LXNoYWRvdzowIDAgMC4xZW0gcmdiYSgwLDAsMCwwLjMpO3BhZGRpbmc6MWVtO3Bvc2l0aW9uOnJlbGF0aXZlO2JhY2tncm91bmQ6I2ZmZjttYXJnaW46MC40ZW0gMCAwLjhlbSAwO2JvcmRlci1yYWRpdXM6MC4xZW07fQ0KaHIgeyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxcHg7IGJvcmRlcjogbm9uZTsgcGFkZGluZzogMDsgdmlzaWJpbGl0eTogaGlkZGVuOyB9DQoNCi8q5ZCO5Y+w57yW6L6R6aG1LOaWh+eroOe8lui+keWSjOmhtemdoue8lui+kSovDQojZGl2RWRpdFJpZ2h0IHsgZmxvYXQ6IHJpZ2h0OyB3aWR0aDogMjcwcHg7IHRleHQtYWxpZ246IHJpZ2h0OyBtYXJnaW4tbGVmdDogLTI3MHB4IH0NCiNkaXZFZGl0UG9zdCB7IG1hcmdpbi10b3A6IDMwcHg7IH0NCiNkaXZFZGl0TGVmdCB7IGZsb2F0OiBsZWZ0OyB3aWR0aDogMTAwJTsgfQ0KDQovKuaWh+eroOe8lui+keaPkOS6pOWMuumaj+WKqCovDQojZGl2Qm94IHsgd2lkdGg6IDI3MHB4OyBwb3NpdGlvbjogcmVsYXRpdmU7IH0NCiNkaXZGbG9hdCB7IHdpZHRoOiAyNThweDsgfQ0KI2RpdkZsb2F0IGlucHV0LmJ1dHRvbiB7IG1hcmdpbjogMC4yZW0gMDsgfQ0KLmJveGZsb2F0IHsgcG9zaXRpb246IGZpeGVkOyBfcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDBweDsgei1pbmRleDogMjk1OyB9DQouZWRpdG1vZDIgeyBtYXJnaW46IDAuMmVtIDA7IHBhZGRpbmctcmlnaHQ6IDI3NXB4OyB9DQojZGl2SW50cm8geyBwYWRkaW5nLWJvdHRvbTogMjBweDsgfQ0KLmVkaXRtb2QgeyBtYXJnaW46IDFlbSAwOyB9DQouZWRpdG1vZDMgeyBtYXJnaW46IDA7IHdpZHRoOiA5OSU7IH0NCi5lZGl0aW5wdXRuYW1lIHsgcGFkZGluZzogMCAycHggMCAzcHg7IGxpbmUtaGVpZ2h0OiAxZW07IGZvbnQtc2l6ZTogMS4xZW07IGZvbnQtd2VpZ2h0OiBib2xkOyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IH0NCmRpdi5wb3N0X2VkaXQgaW5wdXQjZWR0VGl0bGUgeyBtYXJnaW46IDVweCAwIDAgMDsgcGFkZGluZzogM3B4OyBsaW5lLWhlaWdodDogMS44ZW07IGhlaWdodDogMS44ZW07IGZvbnQtc2l6ZTogMS4yZW07IHdpZHRoOiA5OSU7IGNvbG9yOiAjMzMzOyB9DQpkaXYucG9zdF9lZGl0IGlucHV0I2VkdEFsaWFzLA0KaW5wdXQjZWR0VGFnIHsgbWFyZ2luLXRvcDogNXB4OyBwYWRkaW5nOiAzcHg7IHdpZHRoOiA1MCU7IH0NCiN1bFRhZyB7IG1hcmdpbjogMCAzZW07IH0NCiNhamF4dGFncyB7IGJhY2tncm91bmQ6ICNmOGY4Zjg7IGJveC1zaGFkb3c6IDAgMCAxMHB4ICNhYWE7IHBhZGRpbmc6IC41ZW07IH0NCiNhamF4dGFncyBhIHsgbWFyZ2luLXJpZ2h0OiAuNWVtOyB9DQojYWpheHRhZ3MgYS5zZWxlY3RlZCB7IGNvbG9yOiBibGFjazsgYmFja2dyb3VuZDogI0Y4Rjg4OTsgfQ0KI2VkaXRvcl90eHQgeyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAzMDBweDsgfQ0KDQovKuWQjuWPsOS4u+mimOeuoeeQhumhtSovDQpkaXYudGhlbWUgeyB3aWR0aDogMjMwcHg7IGhlaWdodDogMzIwcHg7IH0NCmRpdi50aGVtZSBpbWcgeyBtYXJnaW4tYm90dG9tOiAtM3B4OyB9DQpkaXYudGhlbWUtbm93IHsgZmxvYXQ6IGxlZnQ7IGJhY2tncm91bmQ6ICNiMGNkZWU7IHBhZGRpbmc6IC42ZW0gMWVtOyBtYXJnaW46IDAgMWVtIDFlbSAwOyB9DQpkaXYudGhlbWUtb3RoZXIgeyBmbG9hdDogbGVmdDsgYmFja2dyb3VuZDogI2YwZjBmMDsgcGFkZGluZzogLjZlbSAxZW07IG1hcmdpbjogMCAxZW0gMWVtIDA7IH0NCmRpdi50aGVtZS1vdGhlciBhIHsgY3Vyc29yOiBwb2ludGVyOyB9DQpkaXYudGhlbWUtb3RoZXIgLnRoZW1lLW5hbWUgaW1nIHsgb3BhY2l0eTogMC41MDsgfQ0KZGl2LnRoZW1lPi50aGVtZS1uYW1lLGRpdi50aGVtZT4udGhlbWUtYXV0aG9yLGRpdi50aGVtZT4udGhlbWUtc3R5bGUsZGl2LnRoZW1lPnB7aGVpZ2h0OjIuNGVtO30NCmRpdi50aGVtZT4udGhlbWUtbmFtZXtvdmVyZmxvdzogaGlkZGVuO3doaXRlLXNwYWNlIDpub3dyYXA7fQ0KZGl2LnRoZW1lLW5vdyAuYmV0dGVyVGlwIGltZyB7IGJveC1zaGFkb3c6IDAgMCAxMHB4ICMzYTZlYTU7IH0NCmRpdi50aGVtZS1ub3cgLmJldHRlclRpcCBpbWcsDQpkaXYudGhlbWUtb3RoZXIgLmJldHRlclRpcCBpbWcgeyBib3JkZXI6IDJweCBzb2xpZCAjZjZmNmY2OyB9DQpkaXYudGhlbWUtb3RoZXIgLmJldHRlclRpcCBpbWcgeyBib3gtc2hhZG93OiAwIDAgMTBweCAjYWFhOyB9DQpkaXYudGhlbWUtb3RoZXIgLmJldHRlclRpcCBpbWc6aG92ZXIgeyBib3JkZXI6IDJweCBzb2xpZCAjYjBjZGVlOyBib3gtc2hhZG93OiAwIDAgMTBweCAjMzM5OWNjOyB9DQpkaXYudGhlbWUtbm93IGRpdiwNCmRpdi50aGVtZS1vdGhlciBkaXYgeyBtYXgtd2lkdGg6IDIyMHB4OyAgICAgLypvdmVyZmxvdzpoaWRkZW47Ki8gcGFkZGluZzogMC41ZW0gMCAwLjVlbSAwOyB9DQppbnB1dC50aGVtZS1jb25maWcsDQppbnB1dC50aGVtZS1hY3RpdmF0ZSB7IGZsb2F0OiByaWdodDsgaGVpZ2h0OiAyNnB4OyB3aWR0aDogNjRweDsgbWFyZ2luOiAwOyBwYWRkaW5nOiAycHggNXB4IDNweCA1cHg7IGZvbnQtc2l6ZTogMWVtOyB9DQppbnB1dC50aGVtZS1jb25maWcgeyBtYXJnaW4tdG9wOiAtM3B4OyB9DQpkaXYudGhlbWUgc2VsZWN0LmVkaXQgeyB3aWR0aDogMTMwcHg7IH0NCi5oaWRkZW4geyBkaXNwbGF5OiBub25lOyB9DQoucGFnZWJhciB7IHBhZGRpbmc6IDFlbSAwIDJlbSAwOyB9DQpzcGFuLnRpdGxlIHsgZm9udC13ZWlnaHQ6IGJvbGQ7IH0NCnNwYW4uc3RhciB7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgbWFyZ2luOiA2cHg7IGNvbG9yOiByZWQ7IH0NCnNwYW4ubm90ZSB7IGZvbnQtc2l6ZTogMC45ZW07IH0NCi5wYWdlYmFyIHNwYW4geyBjb2xvcjogIzMzMzsgZm9udC13ZWlnaHQ6IGJvbGRlcjsgcGFkZGluZzogM3B4IDVweCAycHggNXB4OyBtYXJnaW46IDFweDsgfQ0KLnBhZ2ViYXIgYSB7IGJvcmRlci1yYWRpdXM6MC4zZW07Ym9yZGVyOiAxcHggc29saWQgI2VmZWZlZjtwYWRkaW5nOiAycHg7IHBhZGRpbmc6IDJweCA1cHggMnB4IDVweDsgbWFyZ2luOiAxcHg7IH0NCi5wYWdlYmFyIGE6aG92ZXJ7Ym9yZGVyOiAxcHggc29saWQgI2NjYzt9DQovKuato+aWh0RJVuS4i+eahOWvvOiIquadoSovDQouU3ViTWVudSB7IHBhZGRpbmc6IDAgMCAwcHggMDsgbWFyZ2luOiAwLjRlbSAwIDAuOGVtIDA7IHdpZHRoOiAxMDAlOyB0ZXh0LWFsaWduOiBsZWZ0OyBmb250LXNpemU6IDFlbTsgaGVpZ2h0OiAzMHB4OyBsaW5lLWhlaWdodDogMzBweDsgYm9yZGVyLWJvdHRvbTogMHB4IHNvbGlkICMzMzk5Y2M7IGRpc3BsYXk6IG5vbmU7IH0NCi5TdWJNZW51IHNwYW4geyBmbG9hdDogbGVmdDsgbWFyZ2luOiAwIDAgMCAwOyB0ZXh0LWFsaWduOiBjZW50ZXI7IHBhZGRpbmc6IDBweCAxMHB4OyBjdXJzb3I6IHBvaW50ZXI7IGNvbG9yOiAjMzMzMzMzOyB9DQouU3ViTWVudSBzcGFuLm0tbGVmdCwNCi5TdWJNZW51IHNwYW4ubS1yaWdodCB7IGZsb2F0OiBsZWZ0OyB9DQouU3ViTWVudSBhOmhvdmVyIHsgYmFja2dyb3VuZDogI2IwY2RlZTsgdGV4dC1kZWNvcmF0aW9uOiBub25lOyBjb2xvcjogYmxhY2s7IH0NCi5TdWJNZW51IGEgeyBjb2xvcjogYmxhY2s7IGJhY2tncm91bmQ6ICNlMGUxZTI7IG1hcmdpbjogMCA1cHggMCAwOyBmbG9hdDogbGVmdDsgfQ0KLlN1Yk1lbnUgc3Bhbi5tLW5vdyB7IGJhY2tncm91bmQ6ICMzMzk5Y2M7IGNvbG9yOiB3aGl0ZTsgfQ0KDQovKiDnvZHnq5norr7nva7pobUgKi8NCi5jb250ZW50LWJveCB1bCB7IHBhZGRpbmc6IDEwcHggMCAwIDBweDsgfQ0KLmNvbnRlbnQtYm94IGxpIHsgZmxvYXQ6IGxlZnQ7IHBhZGRpbmc6IDAgMCAwIDA7IGhlaWdodDogMmVtOyBsaW5lLWhlaWdodDogMmVtOyBtYXJnaW46IDA7IH0NCi5jb250ZW50LWJveCAuY29udGVudC1ib3gtdGFicyBhLmN1cnJlbnQgeyBiYWNrZ3JvdW5kOiAjZWRlZGVkOyBwYWRkaW5nOiA1cHggMTBweDsgbWFyZ2luOiAwIDlweCAwIDA7IGxpbmUtaGVpZ2h0OiAyLjJlbTsgaGVpZ2h0OiAyZW07IGNvbG9yOiBibGFjazsgZm9udC13ZWlnaHQ6IGJvbGRlcjsgfQ0KLmNvbnRlbnQtYm94IC5jb250ZW50LWJveC10YWJzIGEgeyBib3JkZXI6IDBweCBzb2xpZCAjNzE5MGJhOyBwYWRkaW5nOiA1cHggMTBweDsgbWFyZ2luOiAwIDlweCAwIDA7IGxpbmUtaGVpZ2h0OiAyLjJlbTsgaGVpZ2h0OiAyZW07IH0NCi50b3Rvcm8geyBwYWRkaW5nOiAxMHB4OyB9DQoudG90b3JvIGRkIHsgbGluZS1oZWlnaHQ6IDI4cHg7IG1hcmdpbi1ib3R0b206IDVweDsgfQ0KLnRvdG9ybyAudG90b3JvdHh0IHsgZm9udC1zaXplOiAxMnB4OyB9DQojdG90b3JvYm94IHRleHRhcmVhIHsgYmFja2dyb3VuZDogI2ZmZmZmZjsgcGFkZGluZzogMTBweCAwOyBib3JkZXI6IG5vbmU7IH0NCg0KLypjaGVja2JveCovDQouaW1nY2hlY2sgeyBiYWNrZ3JvdW5kOiB1cmwoLi4vaW1hZ2UvYWRtaW4vY2hlY2tib3gucG5nKSBuby1yZXBlYXQgMCBib3R0b207IHdpZHRoOiA0MHB4OyBoZWlnaHQ6IDE3cHg7IGRpc3BsYXk6IGlubGluZS1ibG9jazsvKglmbG9hdDpsZWZ0OyovIGN1cnNvcjogcG9pbnRlcjsgbWFyZ2luLWJvdHRvbTogLTNweDsgbWFyZ2luLWxlZnQ6IDVweDsgfQ0KLmltZ2NoZWNrLW9uIHsgYmFja2dyb3VuZDogdXJsKC4uL2ltYWdlL2FkbWluL2NoZWNrYm94LnBuZykgbm8tcmVwZWF0IDAgdG9wOyB9DQojYmF0Y2ggaWZyYW1lIHsgZmxvYXQ6IGxlZnQ7IG1hcmdpbjogNXB4IDVweCAwIDhweDsgfQ0KI2JhdGNoIHAgeyBmbG9hdDogbGVmdDsgfQ0KI2JhdGNoIGltZyB7IGZsb2F0OiBsZWZ0OyBtYXJnaW46IDdweCA1cHggMCA5cHg7IH0NCiNiYXRjaCBhLA0KcC5oaW50IGEgeyBiYWNrZ3JvdW5kOiB1cmwoLi4vaW1hZ2UvYWRtaW4vYnVsbGV0X2dvLnBuZykgbm8tcmVwZWF0IDRweCAxcHg7IHBhZGRpbmctbGVmdDogMjBweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IH0NCiNiYXRjaCB7IHdpZHRoOiAxMDAlOyBtYXJnaW46IDAgMCA1cHggMDsgYmFja2dyb3VuZDogI2RiZTNmZjsgZmxvYXQ6IGxlZnQ7IHBhZGRpbmc6IDAgMCAwIDA7IH0NCiNiYXRjaCBwIHsgcGFkZGluZzogMC4zZW0gMC41ZW0gMC4zZW0gMDsgZm9udC1zaXplOiAxLjBlbTsgfQ0Kc3Bhbi5idXR0b24geyBjdXJzb3I6IHBvaW50ZXI7IH0NCmEuYnV0dG9uLA0Kc3Bhbi5idXR0b24geyBib3JkZXItcmFkaXVzOiAycHg7IHBhZGRpbmc6IDJweCAzcHggMnB4IDNweDsgbGluZS1oZWlnaHQ6IDEuMGVtOyBmb250LXNpemU6IDFlbTsgfQ0KYS5idXR0b246aG92ZXIsDQpzcGFuLmJ1dHRvbjpob3ZlciB7IGJveC1zaGFkb3c6IDAgMCAxcHggIzAwMDsgYm9yZGVyLXJhZGl1czogMC4zZW07IHBhZGRpbmc6IDJweCAzcHggMnB4IDNweDsgfQ0KDQovKuS+p+agj+euoeeQhiovDQoud2lkZ2V0LWxlZnQgeyBmbG9hdDogbGVmdDsgY2xlYXI6IGxlZnQ7IHdpZHRoOiAxMDAlOyBtYXJnaW4tcmlnaHQ6IC0yOTBweDsgb3ZlcmZsb3c6IGhpZGRlbjsgfQ0KLndpZGdldC1saXN0IHsgbWluLXdpZHRoOiA1MzBweDsgbWFyZ2luLXJpZ2h0OiAyOTBweDsgYm9yZGVyOiAycHggc29saWQgI0VFRTsgfQ0KLnNpZGVyYmFyLWxpc3QgeyBmbG9hdDogcmlnaHQ7IHdpZHRoOiAyOTBweDsgbWFyZ2luLWxlZnQ6IDA7IH0NCi53aWRnZXQtbGlzdC1oZWFkZXIsDQouc2lkZXJiYXItaGVhZGVyLA0KLnNpZGVyYmFyLW5vdGUgeyBjbGVhcjogYm90aDsgYmFja2dyb3VuZDogI0VERURFRDsgcGFkZGluZzogNXB4OyBmb250LXNpemU6IDEuMWVtOyBmb250LXdlaWdodDogYm9sZDsgdGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW4tYm90dG9tOiAzcHg7IH0NCi53aWRnZXQgeyB3aWR0aDogMjUycHg7IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IG1hcmdpbjogM3B4IDRweCAzcHggNHB4OyBwYWRkaW5nOiAwcHg7IGZsb2F0OiBsZWZ0OyB9DQoud2lkZ2V0IGltZyB7IG1hcmdpbjogM3B4OyBtYXJnaW4tYm90dG9tOiAtM3B4OyB9DQoud2lkZ2V0LXRpdGxlIHsgbWFyZ2luOiAwcHg7IHBhZGRpbmc6IDZweDsgY29sb3I6ICMzMzM7IGN1cnNvcjogbW92ZTsgfQ0KLndpZGdldC10aXRsZSBzcGFuIHsgZGlzcGxheTogaW5saW5lLWJsb2NrOyB9DQoud2lkZ2V0X2lzaGlkZGVuX3RydWUgaW1nLm1vcmUtYWN0aW9uIHsgb3BhY2l0eTogMC40MDsgfQ0KLndpZGdldC1hY3Rpb24geyBmbG9hdDogcmlnaHQ7IH0NCi5zaWRlcmJhci1kcm9wIHsgZmxvYXQ6IHJpZ2h0OyBiYWNrZ3JvdW5kOiAjZmVmZWZlOyBib3JkZXI6IDJweCBzb2xpZCAjZWVlOyBtYXJnaW46IDAgNXB4IDEwcHggMTVweDsgfQ0KLnNpZGVyYmFyLXNvcnQtbGlzdCB7IGZsb2F0OiByaWdodDsgd2lkdGg6IDI2MnB4OyBtaW4taGVpZ2h0OiAzMHB4OyBwb3NpdGlvbjogcmVsYXRpdmU7IHotaW5kZXg6IDA7IH0NCi5zaWRlcmJhci1oZWFkZXI6aG92ZXIgeyBjdXJzb3I6IHBvaW50ZXI7IGNvbG9yOiAjMDAwMDAwOyBiYWNrZ3JvdW5kOiAjYjBjZGVlOyB9DQouc2lkZXJiYXItaGVhZGVyIC51aS1pY29uIHsgZmxvYXQ6IHJpZ2h0OyB9DQoud2lkZ2V0LWxpc3Qtbm90ZSwNCi5zaWRlcmJhci1ub3RlIHsgY29sb3I6ICM2NjY7IGJhY2tncm91bmQ6ICNmZmY7IG1hcmdpbjogMDsgcGFkZGluZzogMDsgdGV4dC1hbGlnbjogY2VudGVyOyB9DQouc2lkZXJiYXItbm90ZSB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgei1pbmRleDogMTsgdG9wOiAwOyBsZWZ0OiAwOyBtYXJnaW4tdG9wOiAzcHg7IHdpZHRoOiAyNTJweDsgfQ0KLnNpZGVyYmFyLXNvcnQtbGlzdCAud2lkZ2V0IHsgcG9zaXRpb246IHJlbGF0aXZlOyB6LWluZGV4OiAyOyB9DQoud2lkZ2V0X3NvdXJjZV9zeXN0ZW0gLndpZGdldC10aXRsZSB7IGJhY2tncm91bmQ6ICNlM2U0ZTQ7IH0NCi53aWRnZXRfc291cmNlX3VzZXIgLndpZGdldC10aXRsZSB7IGJhY2tncm91bmQ6ICNjNmQ0ZTU7IH0NCi53aWRnZXRfc291cmNlX3RoZW1lIC53aWRnZXQtdGl0bGUgeyBiYWNrZ3JvdW5kOiAjZDdlM2JjOyB9DQoud2lkZ2V0X3NvdXJjZV9wbHVnaW4gLndpZGdldC10aXRsZSB7IGJhY2tncm91bmQ6ICNkNGNkZGQ7IH0NCi53aWRnZXRfc291cmNlX290aGVyIC53aWRnZXQtdGl0bGUgeyBiYWNrZ3JvdW5kOiAjZGVkOWMwOyB9DQoNCi8qLmN1c3RvbS1zdGF0ZS1hY3RpdmV7YmFja2dyb3VuZDogI0I1RENGMDt9Ki8NCi5zaWRlcmJhci1saXN0IC5yb2xsIHsgZGlzcGxheTogbm9uZTsgfQ0KI2RpYWxvZy1jb25maXJtLA0KI2RpYWxvZy1mb3JtIHsgZGlzcGxheTogbm9uZTsgfQ0KI2RpYWxvZy1mb3JtIGZvcm0geyBwYWRkaW5nLWxlZnQ6IDEwcHg7IH0NCi5lZHVpLWRlZmF1bHQgLmVkdWktZWRpdG9yIHsgd2lkdGg6IDEwMCUgIWltcG9ydGFudDsgfQ0KLnBsdWdpbi1ub3RlIHsgY3Vyc29yOiBwb2ludGVyOyB9DQojbG9hZGluZyB7IGRpc3BsYXk6IG5vbmU7IHBvc2l0aW9uOiBmaXhlZDsgei1pbmRleDogMTAwMDsgdG9wOiAwOyBsZWZ0OiAwOyBoZWlnaHQ6IDEwMCU7IHdpZHRoOiAxMDAlOyBiYWNrZ3JvdW5kOiByZ2JhKDE3MCwgMTcwLCAxNzAsIC4zKSB1cmwoJy4uL2ltYWdlL2FkbWluL2xvYWRpbmctYmlnLmdpZicpIDUwJSA1MCUgbm8tcmVwZWF0OyB9DQoubG9naW4geyBoZWlnaHQ6IDEwMHB4OyBtYXJnaW46IDAgYXV0bzsgcGFkZGluZy1sZWZ0OiAxMHB4OyB9DQoubG9naW4gZGQgeyB3aWR0aDogMTgwcHg7IGZsb2F0OiBsZWZ0OyB9</file>
	<file name='zb_system\function\lib\upload.php' crc32='29E4A4F9'  dt:dt='bin.base64'>PD9waHANCg0KaWYgKCFkZWZpbmVkKCdaQlBfUEFUSCcpKSB7DQogICAgZXhpdCgnQWNjZXNzIGRlbmllZCcpOw0KfQ0KDQovKioNCiAqIOS4iuS8oOexuy4NCiAqDQogKiBAcHJvcGVydHkgc3RyaW5nIE5hbWUNCiAqIEBwcm9wZXJ0eSBzdHJpbmcgRnVsbEZpbGUNCiAqIEBwcm9wZXJ0eSBzdHJpbmcgU2l6ZQ0KICogQHByb3BlcnR5IHN0cmluZyBEaXINCiAqIEBwcm9wZXJ0eSBpbnQgUG9zdFRpbWUNCiAqIEBwcm9wZXJ0eSBpbnR8c3RyaW5nIEF1dGhvcklEDQogKiBAcHJvcGVydHkgc3RyaW5nIFNvdXJjZU5hbWUNCiAqIEBwcm9wZXJ0eSBzdHJpbmcgTWltZVR5cGUNCiAqIEBwcm9wZXJ0eSBNZW1iZXIgQXV0aG9yDQogKi8NCmNsYXNzIFVwbG9hZCBleHRlbmRzIEJhc2UNCnsNCiAgICBwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoKQ0KICAgIHsNCiAgICAgICAgZ2xvYmFsICR6YnA7DQogICAgICAgIHBhcmVudDo6X19jb25zdHJ1Y3QoJHpicC0+dGFibGVbJ1VwbG9hZCddLCAkemJwLT5kYXRhaW5mb1snVXBsb2FkJ10sIF9fQ0xBU1NfXyk7DQoNCiAgICAgICAgJHRoaXMtPlBvc3RUaW1lID0gdGltZSgpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEBwYXJhbSBzdHJpbmcgJGV4dExpc3QNCiAgICAgKg0KICAgICAqIEByZXR1cm4gYm9vbA0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBDaGVja0V4dE5hbWUoJGV4dExpc3QgPSAnJykNCiAgICB7DQogICAgICAgIGdsb2JhbCAkemJwOw0KICAgICAgICAkZSA9IEdldEZpbGVFeHQoJHRoaXMtPk5hbWUpOw0KICAgICAgICAkZXh0TGlzdCA9IHN0cnRvbG93ZXIoJGV4dExpc3QpOw0KICAgICAgICAvLyDml6DorrrlpoLkvZXvvIznpoHmraIucGhw44CBLnBocDXkuYvnsbvnmoTmlofku7bnmoTkuIrkvKANCiAgICAgICAgaWYgKHByZWdfbWF0Y2goJy9waHAvaScsICRlKSkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIGlmICh0cmltKCRleHRMaXN0KSA9PSAnJykgew0KICAgICAgICAgICAgJGV4dExpc3QgPSAkemJwLT5vcHRpb25bJ1pDX1VQTE9BRF9GSUxFVFlQRSddOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIEhhc05hbWVJblN0cmluZygkZXh0TGlzdCwgJGUpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEByZXR1cm4gYm9vbA0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBDaGVja1NpemUoKQ0KICAgIHsNCiAgICAgICAgZ2xvYmFsICR6YnA7DQogICAgICAgICRuID0gMTAyNCAqIDEwMjQgKiAoaW50KSAkemJwLT5vcHRpb25bJ1pDX1VQTE9BRF9GSUxFU0laRSddOw0KDQogICAgICAgIHJldHVybiAkbiA+PSAkdGhpcy0+U2l6ZTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBAcmV0dXJuIGJvb2wNCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gRGVsRmlsZSgpDQogICAgew0KICAgICAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9VcGxvYWRfRGVsRmlsZSddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAgICAgJGZwcmV0dXJuID0gJGZwbmFtZSgkdGhpcyk7DQogICAgICAgICAgICBpZiAoJGZwc2lnbmFsID09IFBMVUdJTl9FWElUU0lHTkFMX1JFVFVSTikgew0KICAgICAgICAgICAgICAgICRmcHNpZ25hbCA9IFBMVUdJTl9FWElUU0lHTkFMX05PTkU7DQoNCiAgICAgICAgICAgICAgICByZXR1cm4gJGZwcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGlmIChmaWxlX2V4aXN0cygkdGhpcy0+RnVsbEZpbGUpKSB7DQogICAgICAgICAgICBAdW5saW5rKCR0aGlzLT5GdWxsRmlsZSk7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBAcGFyYW0gJHRtcA0KICAgICAqDQogICAgICogQHJldHVybiBib29sDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIFNhdmVGaWxlKCR0bXApDQogICAgew0KICAgICAgICBnbG9iYWwgJHpicDsNCg0KICAgICAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9VcGxvYWRfU2F2ZUZpbGUnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgICAgICRmcHJldHVybiA9ICRmcG5hbWUoJHRtcCwgJHRoaXMpOw0KICAgICAgICAgICAgaWYgKCRmcHNpZ25hbCA9PSBQTFVHSU5fRVhJVFNJR05BTF9SRVRVUk4pIHsNCiAgICAgICAgICAgICAgICAkZnBzaWduYWwgPSBQTFVHSU5fRVhJVFNJR05BTF9OT05FOw0KDQogICAgICAgICAgICAgICAgcmV0dXJuICRmcHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIGlmICghZmlsZV9leGlzdHMoJHpicC0+dXNlcnNkaXIgLiAkdGhpcy0+RGlyKSkgew0KICAgICAgICAgICAgQG1rZGlyKCR6YnAtPnVzZXJzZGlyIC4gJHRoaXMtPkRpciwgMDc1NSwgdHJ1ZSk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKFBIUF9TWVNURU0gPT09IFNZU1RFTV9XSU5ET1dTKSB7DQogICAgICAgICAgICAkZm4gPSBpY29udigiVVRGLTgiLCAkemJwLT5sYW5nWyd3aW5kb3dzX2NoYXJhY3Rlcl9zZXQnXSAuICIvL0lHTk9SRSIsICR0aGlzLT5OYW1lKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICRmbiA9ICR0aGlzLT5OYW1lOw0KICAgICAgICB9DQogICAgICAgIGlmICgkdGhpcy0+Q2hlY2tFeHROYW1lKCkpIHsNCiAgICAgICAgICAgIEBtb3ZlX3VwbG9hZGVkX2ZpbGUoJHRtcCwgJHpicC0+dXNlcnNkaXIgLiAkdGhpcy0+RGlyIC4gJGZuKTsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogQHBhcmFtICRzdHI2NA0KICAgICAqDQogICAgICogQHJldHVybiBib29sDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIFNhdmVCYXNlNjRGaWxlKCRzdHI2NCkNCiAgICB7DQogICAgICAgIGdsb2JhbCAkemJwOw0KDQogICAgICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1VwbG9hZF9TYXZlQmFzZTY0RmlsZSddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAgICAgJGZwcmV0dXJuID0gJGZwbmFtZSgkc3RyNjQsICR0aGlzKTsNCiAgICAgICAgICAgIGlmICgkZnBzaWduYWwgPT0gUExVR0lOX0VYSVRTSUdOQUxfUkVUVVJOKSB7DQogICAgICAgICAgICAgICAgJGZwc2lnbmFsID0gUExVR0lOX0VYSVRTSUdOQUxfTk9ORTsNCg0KICAgICAgICAgICAgICAgIHJldHVybiAkZnByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoIWZpbGVfZXhpc3RzKCR6YnAtPnVzZXJzZGlyIC4gJHRoaXMtPkRpcikpIHsNCiAgICAgICAgICAgIEBta2RpcigkemJwLT51c2Vyc2RpciAuICR0aGlzLT5EaXIsIDA3NTUsIHRydWUpOw0KICAgICAgICB9DQogICAgICAgICRzID0gYmFzZTY0X2RlY29kZSgkc3RyNjQpOw0KICAgICAgICAkdGhpcy0+U2l6ZSA9IHN0cmxlbigkcyk7DQogICAgICAgIGlmIChQSFBfU1lTVEVNID09PSBTWVNURU1fV0lORE9XUykgew0KICAgICAgICAgICAgJGZuID0gaWNvbnYoIlVURi04IiwgIkdCSy8vSUdOT1JFIiwgJHRoaXMtPk5hbWUpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgJGZuID0gJHRoaXMtPk5hbWU7DQogICAgICAgIH0NCiAgICAgICAgaWYgKCR0aGlzLT5DaGVja0V4dE5hbWUoKSkgew0KICAgICAgICAgICAgZmlsZV9wdXRfY29udGVudHMoJHpicC0+dXNlcnNkaXIgLiAkdGhpcy0+RGlyIC4gJGZuLCAkcyk7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEBwYXJhbSBzdHJpbmcgJHMNCiAgICAgKg0KICAgICAqIEByZXR1cm4gYm9vbHxzdHJpbmcNCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gVGltZSgkcyA9ICdZLW0tZCBIOmk6cycpDQogICAgew0KICAgICAgICByZXR1cm4gZGF0ZSgkcywgJHRoaXMtPlBvc3RUaW1lKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBAcGFyYW0gJG5hbWUNCiAgICAgKiBAcGFyYW0gJHZhbHVlDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIF9fc2V0KCRuYW1lLCAkdmFsdWUpDQogICAgew0KICAgICAgICBpZiAoaW5fYXJyYXkoJG5hbWUsIGFycmF5KCdVcmwnLCAnRGlyJywgJ0Z1bGxGaWxlJywgJ0F1dGhvcicpKSkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1VwbG9hZF9TZXQnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgICAgICRmcG5hbWUoJHRoaXMsICRuYW1lLCAkdmFsdWUpOw0KICAgICAgICB9DQogICAgICAgIHBhcmVudDo6X19zZXQoJG5hbWUsICR2YWx1ZSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogQHBhcmFtICRuYW1lDQogICAgICoNCiAgICAgKiBAcmV0dXJuIE1lbWJlcnxtaXhlZHxzdHJpbmcNCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gX19nZXQoJG5hbWUpDQogICAgew0KICAgICAgICBnbG9iYWwgJHpicDsNCiAgICAgICAgaWYgKCRuYW1lID09ICdVcmwnKSB7DQogICAgICAgICAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9VcGxvYWRfVXJsJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICRmcG5hbWUoJHRoaXMpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICByZXR1cm4gJHpicC0+aG9zdCAuICd6Yl91c2Vycy8nIC4gJHRoaXMtPkRpciAuIHJhd3VybGVuY29kZSgkdGhpcy0+TmFtZSk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKCRuYW1lID09ICdEaXInKSB7DQogICAgICAgICAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9VcGxvYWRfRGlyJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICRmcG5hbWUoJHRoaXMpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICByZXR1cm4gJ3VwbG9hZC8nIC4gZGF0ZSgnWScsICR0aGlzLT5Qb3N0VGltZSkgLiAnLycgLiBkYXRlKCdtJywgJHRoaXMtPlBvc3RUaW1lKSAuICcvJzsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoJG5hbWUgPT0gJ0Z1bGxGaWxlJykgew0KICAgICAgICAgICAgcmV0dXJuICR6YnAtPnVzZXJzZGlyIC4gJHRoaXMtPkRpciAuICR0aGlzLT5OYW1lOw0KICAgICAgICB9DQogICAgICAgIGlmICgkbmFtZSA9PSAnQXV0aG9yJykgew0KICAgICAgICAgICAgcmV0dXJuICR6YnAtPkdldE1lbWJlckJ5SUQoJHRoaXMtPkF1dGhvcklEKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1VwbG9hZF9HZXQnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgICAgICRmcHJldHVybiA9ICRmcG5hbWUoJHRoaXMsICRuYW1lKTsNCiAgICAgICAgICAgIGlmICgkZnBzaWduYWwgPT0gUExVR0lOX0VYSVRTSUdOQUxfUkVUVVJOKSB7DQogICAgICAgICAgICAgICAgJGZwc2lnbmFsID0gUExVR0lOX0VYSVRTSUdOQUxfTk9ORTsNCg0KICAgICAgICAgICAgICAgIHJldHVybiAkZnByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gcGFyZW50OjpfX2dldCgkbmFtZSk7DQogICAgfQ0KfQ0K</file>
</files>